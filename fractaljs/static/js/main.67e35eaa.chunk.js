(this.webpackJsonpfratcaljs=this.webpackJsonpfratcaljs||[]).push([[0],{127:function(t,e,a){t.exports=function(){return new Worker(a.p+"520087e4063d59e7b0e5.worker.js")}},144:function(t,e,a){t.exports=a(278)},149:function(t,e,a){},155:function(t,e,a){var r={"./burningbird.ts":156,"./burningship.ts":157,"./example.ts":158,"./julia.ts":159,"./mandelbrot.ts":160,"./mandelbrot3.ts":161,"./mandelbrot4.ts":162,"./phoenix.ts":163,"./tippetts.ts":164};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=i,t.exports=n,n.id=155},156:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"burningbird",uiOrder:2.5,name:"Burning Bird",preset:{x:-.46,y:.07,w:3.26,iter:50},fn:{normal:(t,e,a)=>{var r,n=0,i=0,s=0,o=0,c=0;for(e=-e;r=(n+n)*i+e,n=s-o+t,i=Math.abs(r),!(++c>=a)&&!((s=n*n)+(o=i*i)>4););return c},smooth:(t,e,a)=>{var n,i,s=0,o=0,c=0,l=0,h=0;for(e=-e;i=(s+s)*o+e,s=c-l+t,o=Math.abs(i),!(++h>=a)&&!((c=s*s)+(l=o*o)>4););if(h===a)return h;for(n=0;n<4;++n)i=(s+s)*o+e,c=(s=c-l+t)*s,l=(o=Math.abs(i))*o;return 5+h-Math.log(Math.log(c+l))*r}}}},157:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"burningship",uiOrder:2,name:"Burning Ship",preset:{x:-.4,y:.55,w:3,iter:50},fn:{normal:(t,e,a)=>{var r,n,i=0,s=0,o=0,c=0,l=0;for(e=-e;n=(i+i)*s+e,r=o-c+t,i=Math.abs(r),s=Math.abs(n),!(++l>=a)&&!((o=i*i)+(c=s*s)>4););return l},smooth:(t,e,a)=>{var n,i,s,o=0,c=0,l=0,h=0,d=0;for(e=-e;s=(o+o)*c+e,i=l-h+t,o=Math.abs(i),c=Math.abs(s),!(++d>=a)&&!((l=o*o)+(h=c*c)>4););if(d===a)return d;for(n=0;n<4;++n)s=(o+o)*c+e,i=l-h+t,l=(o=Math.abs(i))*o,h=(c=Math.abs(s))*c;return 5+d-Math.log(Math.log(l+h))*r}}}},158:function(t,e,a){"use strict";a.r(e),e.default={fractalId:"example",hidden:!0,uiOrder:-1,name:"example",preset:{x:-.7,y:0,w:2.5,iter:50},fn:{normal:(t,e,a)=>0,smooth:(t,e,a)=>0}}},159:function(t,e,a){"use strict";a.r(e);const r=1/Math.log(2);e.default={fractalId:"juliaex1",uiOrder:5,name:"Julia",preset:{x:0,y:0,w:2.2,iter:50},fn:{normal:function(t,e,a){for(var r=t,n=e,i=t*t,s=e*e,o=0;o<a&&i+s<=4;++o)n=(r+r)*n+.01,i=(r=i-s+.285)*r,s=n*n;return o},smooth:function(t,e,a){for(var n=t,i=e,s=t*t,o=e*e,c=0,l=0;c<a&&s+o<=4;++c)i=(n+n)*i+.01,s=(n=s-o+.285)*n,o=i*i;if(c===a)return c;for(l=0;l<4;++l)i=(n+n)*i+.01,s=(n=s-o+.285)*n,o=i*i;return 5+c-Math.log(Math.log(s+o))*r}}}},160:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"mandelbrot",uiOrder:0,name:"Mandelbrot",preset:{x:-.7,y:0,w:2.5,iter:50},fn:{normal:(t,e,a)=>{for(var r=0,n=0,i=0,s=0,o=0;o<a&&i+s<=4;++o)n=(r+r)*n+e,i=(r=i-s+t)*r,s=n*n;return o},smooth:(t,e,a)=>{for(var n=0,i=0,s=0,o=0,c=0,l=0;c<a&&s+o<=4;++c)i=(n+n)*i+e,s=(n=s-o+t)*n,o=i*i;if(c===a)return c;for(l=0;l<4;++l)i=(n+n)*i+e,s=(n=s-o+t)*n,o=i*i;return 5+c-Math.log(Math.log(s+o))*r}}}},161:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(4);e.default={fractalId:"mandelbrot3",uiOrder:3,name:"Multibrot *3",preset:{x:0,y:0,w:3,iter:50},fn:{normal:(t,e,a)=>{for(var r=0,n=0,i=0,s=0,o=0;r=i*r-3*r*s+t,n=3*i*n-s*n+e,!(++o>=a)&&!((i=r*r)+(s=n*n)>4););return o},smooth:(t,e,a)=>{for(var n,i,s=0,o=0,c=0,l=0,h=0;s=c*s-3*s*l+t,o=i=3*c*o-l*o+e,!(++h>=a)&&!((c=s*s)+(l=o*o)>4););if(h===a)return h;for(n=0;n<4;++n)i=3*c*o-l*o+e,c=(s=c*s-3*s*l+t)*s,l=(o=i)*o;return 5+h-Math.log(Math.log(c+l))*r}}}},162:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(4);e.default={fractalId:"mandelbrot4",uiOrder:4,name:"Multibrot *4",preset:{x:0,y:0,w:3,iter:50},fn:{normal:(t,e,a)=>{for(var r,n=0,i=0,s=0,o=0,c=0;r=4*s*n*i-4*n*o*i+e,n=s*s-6*s*o+o*o+t,i=r,!(++c>=a)&&!((s=n*n)+(o=i*i)>4););return c},smooth:(t,e,a)=>{for(var n,i=0,s=0,o=0,c=0,l=0;n=4*o*i*s-4*i*c*s+e,i=o*o-6*o*c+c*c+t,s=n,!(++l>=a)&&!((o=i*i)+(c=s*s)>4););return l===a?l:5+l-Math.log(Math.log(o+c))*r}}}},163:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"phoenixex1",uiOrder:6,name:"Phoenix",preset:{x:-.7,y:-.05,w:1.6,iter:250},fn:{normal:function(t,e,a){for(var r,n,i=-e,s=t,o=0,c=0,l=0,h=0,d=0;d<a&&l+h<=4;++d)l=(r=i*i-s*s+.5667+-.5*o)*r,h=(n=2*i*s+-.5*c)*n,o=i,c=s,i=r,s=n;return d},smooth:function(t,e,a){for(var n,i,s=-e,o=t,c=0,l=0,h=0,d=0,u=0;u<a&&h+d<=4;++u)h=(n=s*s-o*o+.5667+-.5*c)*n,d=(i=2*s*o+-.5*l)*i,c=s,l=o,s=n,o=i;if(u===a)return u;for(var f=0;f<4;++f)h=(n=s*s-o*o+.5667+-.5*c)*n,d=(i=2*s*o+-.5*l)*i,c=s,l=o,s=n,o=i;return 5+u-Math.log(Math.log(s*s+o*o))*r}}}},164:function(t,e,a){"use strict";a.r(e);e.default={fractalId:"tippetts",uiOrder:1,name:"Tippetts",preset:{x:-.5,y:0,w:4,iter:50},fn:{normal:(t,e,a)=>{for(var r=0,n=0,i=0,s=0,o=0;o<a&&i+s<=4;++o)i=(r=i-s+t)*r,s=(n=(r+r)*n+e)*n;return o}}}},278:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),i=a(10),s=a.n(i),o=(a(149),a(12)),c=a(309),l=a(322),h=a(319),d=a(312),u=a(330),f=a(313),m=a(13),p=a.n(m),x=a(8),w=a(98),v=a(20);class b{constructor(){this.listeners=void 0,this.listeners={}}on(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}notify(t,e){setTimeout(()=>{const a=this.listeners[t]||[];e&&(e.evt=t),a.forEach(t=>{t(e)})},0)}}var g=a(50),y=a(127),E=a.n(y);class k{constructor(t,e){this.id=void 0,this.available=!0,this.tile=void 0,this.worker=void 0,this.callback=void 0,this.id=t,this.createWebWorker(),this.callback=e}createWebWorker(){this.worker=new E.a,this.worker.postMessage({action:"init",id:this.id}),this.worker.onmessage=this.onmessage.bind(this)}cancel(){if(this.available)throw new Error("Canceling an available worker");this.worker.terminate(),this.createWebWorker(),this.tile.buffer=new Float32Array(this.tile.width*this.tile.height),this.available=!0}draw(t){if(!this.available)throw new Error("Worker already busy");this.tile=t.tile,this.available=!1,this.worker.postMessage(t,[t.tile.buffer.buffer])}onmessage(t){const e=t.data;this.tile.buffer=e.tile.buffer,this.available=!0,this.callback(this,e)}}var F=a(128),M=a.n(F);class O{constructor(t,e){this.scheduleId=0,this.orders=[],this.workers=[],this.upperCallback=void 0,this.handlers=void 0,this.upperCallback=e;for(let a=0;a<t.nbThreads;a+=1){const t=this.onWorkerResponse.bind(this);this.workers.push(new k(a,t))}this.throttledSchedule=M.a.throttle(this.throttledSchedule.bind(this),200)}onWorkerResponse(t,e){e.scheduleId===this.scheduleId&&this.upperCallback(e);const a=this.orders.shift();a&&t.draw(a),this.isWorking||this.handlers.accept()}get availableWorkers(){return this.workers.filter(t=>t.available)}get busyWorkers(){return this.workers.filter(t=>!t.available)}get isWorking(){return this.orders.length||this.busyWorkers.length}throttledSchedule(t){this.orders=t.map(t=>Object(x.a)({},t,{scheduleId:this.scheduleId})),this.busyWorkers.forEach(t=>t.cancel()),this.availableWorkers.forEach(t=>{const e=this.orders.shift();e&&t.draw(e)})}schedule(t){var e=this;return Object(v.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.scheduleId++,e.isWorking&&(e.orders=[],e.handlers&&e.handlers.reject("Scheduler interrupted")),e.throttledSchedule(t),a.abrupt("return",new Promise((t,a)=>{e.handlers={accept:t,reject:a}}));case 4:case"end":return a.stop()}}),a)})))()}}class j{constructor(t){this.canvas=void 0,this.offCanvas=void 0,this.context=void 0,this.lastId=null,this.lastType=null,this.lastMatrix=null,this.canvas=t.canvas,this.context=t.context,this.offCanvas=document.createElement("canvas"),this.offCanvas.width=this.canvas.width,this.offCanvas.height=this.canvas.height}redraw(t,e,a){if(this.lastType!==e&&(this.lastMatrix=null),this.lastId===a)return;let r;if(this.lastMatrix){const e=this.lastMatrix.inverse().multiply(t).inverse(),a=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.offCanvas.getContext("2d").putImageData(a,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform(e.a,e.b,e.c,e.d,e.e,e.f),this.context.drawImage(this.offCanvas,0,0),this.context.setTransform(1,0,0,1,0,0);const n=(e.c*e.f-e.d*e.e+e.e)/(e.a*e.d-e.a-e.b*e.c-e.d+1),i=(e.a*e.f-e.b*e.e-e.f)/(e.a*-e.d+e.a+e.b*e.c+e.d-1);e.a>1.001&&e.d>1.001?r={x:n,y:i,reverse:!1}:e.a<.99&&e.d<.99?r={x:n,y:i,reverse:!0}:(Math.abs(e.e)>.01||Math.abs(e.f)>.01)&&(r={x:this.canvas.width/2,y:this.canvas.height/2,reverse:!0},e.e<-.01&&(r.x=0),e.e>.01&&(r.x=this.canvas.width),e.f<-.01&&(r.y=0),e.f>.01&&(r.y=this.canvas.height))}else this.lastType=e;return this.lastId=a,this.lastMatrix=t,r}}const I=a(155),C={};I.keys().forEach(t=>{const e=I(t).default;C[e.fractalId]=e});const T=t=>{const e=C[t];return Object(x.a)({fractalId:t},e.preset)},S=Object(x.a)({},{nbTiles:100,supersampling:!0},{},{});let D=0;class N{constructor(t,e,a,r){this.id=void 0,this.x1=void 0,this.x2=void 0,this.y1=void 0,this.y2=void 0,this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.buffer=void 0,this.id=D++,this.x1=t,this.x2=e,this.y1=a,this.y2=r,this.x=(t+e)/2,this.y=(a+r)/2,this.width=e-t+1,this.height=r-a+1,this.buffer=new Float32Array(this.width*this.height)}static getTiling(t,e){const a=S.nbTiles,r=t/e,n=Math.round(Math.sqrt(a/r)),i=Math.round(Math.sqrt(a/r)*r);console.log("Tiling [".concat(t," x ").concat(e,"] with ").concat(a," tiles --\x3e "),"[".concat(i," * ").concat(n,"] = ").concat(n*i," tiles of "),"~ [".concat(Math.round(t/i)," x ").concat(Math.round(e/n),"]"));const s=[];for(let o=0;o<n;o+=1)for(let a=0;a<i;a+=1){const r=Math.round(a*t/i),c=Math.round((a+1)*t/i)-1,l=Math.round(o*e/n),h=Math.round((o+1)*e/n)-1;s.push(new N(r,c,l,h))}return s}}class W{constructor(t,e,a){this.ctx=void 0,this.painter=void 0,this.scheduler=void 0,this.redrawer=void 0,this.width=void 0,this.height=void 0,this.imageData=void 0,this.imageBuffer=void 0,this.tiles=void 0,this.ctx=t,this.resize(),this.callback=this.callback.bind(this),this.scheduler=new O(t,this.callback),this.painter=e,this.redrawer=new j(t)}resize(){const t=this.ctx.canvas;this.imageData=this.ctx.context.createImageData(t.width,t.height),this.imageBuffer=new Uint32Array(this.imageData.data.buffer),this.width=t.width,this.height=t.height,this.tiles=N.getTiling(this.width,this.height)}getIterationsAt(t){return((t,e)=>{const a=C[t];return e&&a.fn.smooth||a.fn.normal})(this.ctx.fractalId,this.ctx.smooth)(t.x,t.y,this.ctx.iter)}getHistogram(){const t=new Array(this.ctx.iter+1).fill(0);var e,a=Object(g.a)(this.tiles);try{for(a.s();!(e=a.n()).done;){const a=e.value;for(let e in a.buffer){const r=Math.round(a.buffer[e]);r>=0&&r<=this.ctx.iter&&(t[r]+=1)}}}catch(r){a.e(r)}finally{a.f()}return t}drawColor(){this.ctx.event.notify("draw.redraw",{}),this.tiles.forEach(t=>{this.painter.paint(t,this.imageBuffer,this.width)}),this.ctx.context.putImageData(this.imageData,0,0,0,0,this.width,this.height)}draw(t){this.ctx.event.notify("draw.start",{});this.redrawer.redraw;let e;this.redrawer&&(e=this.redrawer.redraw(this.ctx.camera.matrix,this.ctx.fractalId,t.id||-1));const a=Object.assign({},this.ctx.camera.matrix,{type:this.ctx.fractalId,smooth:this.ctx.smooth,iter:this.ctx.iter}),r=this.tiles.map(e=>({action:"draw",tile:e,params:t,model:a}));return e&&(r.forEach(t=>{t.dist=Math.sqrt(Math.pow(t.tile.x-e.x,2)+Math.pow(t.tile.y-e.y,2))}),r.sort((t,a)=>e.reverse?a.dist-t.dist:t.dist-a.dist)),this.scheduler.schedule(r)}callback(t){if("end-draw"!==t.action)throw new Error;const e=t.tile;this.painter.paint(e,this.imageBuffer,this.width),this.ctx.context.putImageData(this.imageData,0,0,e.x1,e.y1,e.width,e.height)}}const L={0:"0#080560;0.2#2969CB;0.40#F1FEFE;0.60#FCA425;0.85#000000",1:"0.0775#78591e;0.55#d6e341",2:"0#0000FF;0.33#FFFFFF;0.66#FF0000",3:"0.08#09353e;0.44#1fc3e6;0.77#08173e",4:"0#000085;0.25#fffff5;0.5#ffb500;0.75#9c0000",5:"0#000000;0.25#000000;0.5#7f7f7f;0.75#ffffff;0.975#ffffff",10:"0#000000;0.25#16A085;0.5#FFFFFF;0.75#16A085",11:"0#000000;0.25#27AE60;0.5#FFFFFF;0.75#27AE60",12:"0#000000;0.25#2980B9;0.5#FFFFFF;0.75#2980B9",13:"0#000000;0.25#8E44AD;0.5#FFFFFF;0.75#8E44AD",14:"0#000000;0.25#2C3E50;0.5#FFFFFF;0.75#2C3E50",15:"0#000000;0.25#F39C12;0.5#FFFFFF;0.75#F39C12",16:"0#000000;0.25#D35400;0.5#FFFFFF;0.75#D35400",17:"0#000000;0.25#C0392B;0.5#FFFFFF;0.75#C0392B",18:"0#000000;0.25#BDC3C7;0.5#FFFFFF;0.75#BDC3C7",19:"0#000000;0.25#7F8C8D;0.5#FFFFFF;0.75#7F8C8D"};function A(t,e){let a,r=t.length;if(r!==e.length)throw new Error("Need an equal count of xs and ys.");if(0===r)return function(t){return 0};if(1===r){const t=+e[0];return function(e){return t}}const n=[];for(a=0;a<r;a++)n.push(a);n.sort((e,a)=>t[e]<t[a]?-1:1);let i=t,s=e;for(t=[],e=[],a=0;a<r;a++)t.push(+i[n[a]]),e.push(+s[n[a]]);let o=[],c=[],l=[];for(a=0;a<r-1;a++){let r=t[a+1]-t[a],n=e[a+1]-e[a];c.push(r),o.push(n),l.push(n/r)}const h=[l[0]];for(a=0;a<c.length-1;a++){let t=l[a],e=l[a+1];if(t*e<=0)h.push(0);else{let r=c[a],n=c[a+1],i=r+n;h.push(3*i/((i+n)/t+(i+r)/e))}}h.push(l[l.length-1]);let d=[],u=[];for(a=0;a<h.length-1;a++){let t=h[a],e=l[a],r=1/c[a],n=t+h[a+1]-e-e;d.push((e-t-n)*r),u.push(n*r*r)}return function(a){let r=t.length-1;if(a===t[r])return e[r];let n,i=0,s=u.length-1;for(;i<=s;){n=Math.floor(.5*(i+s));const r=t[n];if(r<a)i=n+1;else{if(!(r>a))return e[n];s=n-1}}r=Math.max(0,s);let o=a-t[r],c=o*o;return e[r]+h[r]*o+d[r]*c+u[r]*o*c}}const R=(t,e=400)=>((t,e)=>{const a=[],r=[],n=[],i=[],s=new Int32Array(t);return e.split(";").forEach(t=>{const e=t.split("#");a.push(Number(e[0])),r.push(parseInt(e[1].substring(0,2),16)),n.push(parseInt(e[1].substring(2,4),16)),i.push(parseInt(e[1].substring(4,6),16))}),(()=>{a.push(a[0]+1),r.push(r[0]),n.push(n[0]),i.push(i[0]);const e=A(a,r),o=A(a,n),c=A(a,i),l=new Uint8Array(s.buffer);let h=0;for(let r=0;r<t;r+=1){let n=r/t;n<a[0]&&(n+=1),l[h+0]=e(n),l[h+1]=o(n),l[h+2]=c(n),l[h+3]=255,h+=4}})(),s})(e,L[t]);class z{constructor(t){this.id=0,this.offset=0,this.fn="s",this.density=0,this.resolution=0,this.buffer=new Int32Array,this.set(t)}set(t){"fn"in t&&(this.fn=t.fn),"offset"in t&&(this.offset=t.offset),"density"in t&&(this.density=t.density),"id"in t&&(this.id=t.id,this.buffer=R(t.id,1e3),this.resolution=this.buffer.length)}paint(t,e,a){var r,n,i,s,o=this.offset*this.resolution,c=this.density,l=this.resolution,h=this.buffer,d=0,u=0;for("s"===this.fn&&(c*=7,o=(this.offset+.85)%1*this.resolution),n=0;n<t.height;n+=1)for(u=(n+t.y1)*a+t.x1,r=0;r<t.width;r+=1)0===(i=t.buffer[d])?s=4278190080:("s"===this.fn&&(i=Math.sqrt(i)),s=h[~~((i*c+o)%l)]),e[u]=s,d+=1,u+=1}}class P{constructor(t,e){this.x=void 0,this.y=void 0,t instanceof P?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}midPoint(t){return new P((t.x+this.x)/2,(t.y+this.y)/2)}minus(t){return new P(this.x-t.x,this.y-t.y)}plus(t){return new P(this.x+t.x,this.y+t.y)}times(t){return t instanceof P?new P(this.x*t.x,this.y*t.y):new P(this.x*t,this.y*t)}minVal(){return Math.min(this.x,this.y)}}class B{constructor(t,e,a,r,n,i){this.a=t,this.b=e,this.c=a,this.d=r,this.e=n,this.f=i}transform(t){return new P(t.x*this.a+t.y*this.c+this.e,t.x*this.b+t.y*this.d+this.f)}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}isInvertible(){const t=this.a*this.d-this.b*this.c;return Math.abs(t)>1e-15}inverse(){if(!this.isInvertible())return this.inverseGaussJordan();const t=this.a*this.d-this.b*this.c;return new B(this.d/t,-this.b/t,-this.c/t,this.a/t,(this.c*this.f-this.d*this.e)/t,-(this.a*this.f-this.b*this.e)/t)}multiply(t){return new B(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}inverseGaussJordan(){function t(t,e,a,r){const n=t[e],i=t[a];for(let s=0;s<6;s++)n[s]+=i[s]*r}function e(t,e,a){const r=t[e];for(let n=0;n<6;n++)r[n]*=a}const a=[[this.a,this.c,this.e,1,0,0],[this.b,this.d,this.f,0,1,0],[0,0,1,0,0,1]];return t(a,1,2,-a[1][2]),t(a,0,2,-a[0][2]),t(a,1,0,-a[1][0]/a[0][0]),t(a,0,1,-a[0][1]/a[1][1]),e(a,0,1/a[0][0]),e(a,1,1/a[1][1]),new B(a[0][3],a[1][3],a[0][4],a[1][4],a[0][5],a[1][5])}toString(){return"".concat(this.a," ").concat(this.c," ").concat(this.e,"\n").concat(this.b," ").concat(this.d," ").concat(this.f,"\n0 0 1")}static GetTriangleToTriangle(t,e,a,r,n,i,s,o,c,l,h,d){const u=new B(t-n,e-i,a-n,r-i,n,i),f=new B(s-h,o-d,c-h,l-d,h,d),m=u.inverse();return f.multiply(m)}static GetRotationMatrix(t){const e=Math.cos(t),a=Math.sin(t);return new B(e,a,-a,e,0,0)}static GetScaleMatrix(t,e){return new B(t,0,0,e,0,0)}static GetShearMatrix(t,e){return new B(1,e,t,1,0,0)}}B.identity=new B(1,0,0,1,0,0);class G{constructor(t,e,a,r=B.identity){this.matrix_inv=void 0,this.matrix=void 0,this.affineMatrix=void 0,this.screen=void 0,this.resolutionLimit=void 0,this.pos=void 0,this.w=void 0,this.affineMatrix=r,this.screen=t;const n=t.minVal();this.resolutionLimit=111e-17*n,this.pos=e,this.w=a,this.matrix=B.identity,this.matrix_inv=B.identity,this.reproject()}reproject(){this.w=Math.max(this.w,this.resolutionLimit);const t=((t,e,a)=>{const r=t.transform(new P(1,-1)),n=t.transform(new P(-1,1)),i=t.transform(new P(-1,-1));if(e>=a){const t=(e-a)/2,s=t+a;return B.GetTriangleToTriangle(s,a,t,0,t,a,r.x,r.y,n.x,n.y,i.x,i.y)}{const t=(a-e)/2,s=t+e;return B.GetTriangleToTriangle(e,s,0,t,0,s,r.x,r.y,n.x,n.y,i.x,i.y)}})(this.affineMatrix,this.screen.x,this.screen.y),e=(a=this.pos.x,r=this.pos.y,n=this.w,B.GetTriangleToTriangle(1,0,0,1,0,0,a+n/2,r,a,r+n/2,a,r));var a,r,n;this.matrix=e.multiply(t),this.matrix_inv=this.matrix.inverse()}affineTransform(t,e,a){let r=B.identity;switch(t){case"rotation":r=B.GetRotationMatrix(e);break;case"shear":r=B.GetShearMatrix(e,a);break;case"scale":r=B.GetScaleMatrix(e,a)}this.affineMatrix=this.affineMatrix.multiply(r),this.reproject()}affineReset(){this.affineMatrix=B.identity,this.reproject()}clone(){return new G(this.screen,this.pos,this.w,this.affineMatrix)}scr2cpx(t){return this.matrix.transform(t)}cpx2scr(t){return this.matrix_inv.transform(t)}getPos(){return this.pos}setPos(t,e){this.pos=t,e&&(this.w=e),this.reproject()}resize(t,e){this.screen=new P(t,e);const a=Math.min(t,e);this.resolutionLimit=111e-17*a,this.reproject()}isZoomLimit(){return this.w<=this.resolutionLimit}}class U{constructor(t){this.ctx=void 0,this.painter=void 0,this.renderer=void 0;let e=navigator.hardwareConcurrency||4;e>=6&&e--,this.ctx={canvas:t.canvas,context:t.canvas.getContext("2d"),nbThreads:e,event:new b,camera:new G(new P(t.canvas.width,t.canvas.height),new P(t.x,t.y),t.w,t.viewport),smooth:t.smooth,iter:t.iter,fractalId:t.fractalId},this.painter=new z(t.painter),this.renderer=new W(this.ctx,this.painter,this)}get canvas(){return this.ctx.canvas}set(t){"fractalId"in t&&(this.ctx.fractalId=t.fractalId),"smooth"in t&&(this.ctx.smooth=t.smooth),"iter"in t&&(this.ctx.iter=t.iter),"x"in t&&this.ctx.camera.setPos(new P(t.x,t.y),t.w),"painter"in t&&this.painter.set(t.painter)}draw(t){var e=this;return Object(v.a)(p.a.mark((function a(){var r,n,i,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t||(t={details:"normal"}),r=(new Date).getTime(),a.next=4,e.renderer.draw(t);case 4:return n=a.sent,i=(new Date).getTime(),s=i-r,console.log("Frame '".concat(t.details,"' drawn in ").concat(s,"ms")),a.abrupt("return",n);case 9:case"end":return a.stop()}}),a)})))()}drawColor(){this.renderer.drawColor()}resize(t,e){this.ctx.camera.resize(t,e),this.renderer.resize()}getHistogram(){return this.renderer.getHistogram()}getIterationsAt(t){return this.renderer.getIterationsAt(t)}}var _=a(28);const H=Object(_.b)({name:"set",initialState:{fractalId:"mandelbrot",smooth:!0,x:0,y:0,w:0,iter:0},reducers:{setSet:(t,e)=>e.payload,updateSet:(t,e)=>Object(x.a)({},t,{},e.payload)}}),J=H.reducer,K=H.actions,Y=K.setSet,q=K.updateSet;var V=a(96),X=a.n(V);const Z={left:37,up:38,right:39,down:40,"+":107,"-":109,esc:27,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},Q=[],$=[];document.addEventListener("keyup",t=>{Q[t.keyCode]=!1}),document.addEventListener("keydown",t=>{Q[t.keyCode]=!0;const e=t.shiftKey?.1:1;var a,r=Object(g.a)($);try{for(r.s();!(a=r.n()).done;){const t=a.value;if(t.combo.every(t=>Q[t]))return void t.func(e)}}catch(n){r.e(n)}finally{r.f()}});const tt=(t,e)=>{const a=t.split(" "),r=[];var n,i=Object(g.a)(a);try{for(i.s();!(n=i.n()).done;){const t=n.value;if(!(t in Z))throw new Error("Unknown key".concat(t));r.push(Z[t])}}catch(s){i.e(s)}finally{i.f()}$.push({combo:r,func:e}),$.sort((t,e)=>e.combo.length-t.combo.length)},et=Math.PI/18;class at{constructor(t,e){this.dispatch=e,this.engine=void 0,this.camera=void 0,this.engine=t,this.camera=t.ctx.camera,this.setupKeyboard(),this.setupMouse(),this.setupTouch()}pan(t){const e=this.camera,a=e.screen.times(t),r=e.scr2cpx(new P(0,0)),n=e.scr2cpx(a),i=r.minus(n),s=e.getPos().plus(i);this.dispatch(Lt(s))}affineTransform(t,e,a){this.camera.affineTransform(t,e,a),this.engine.draw()}affineReset(){this.camera.affineReset(),this.engine.draw()}zoom(t,e){const a=this.camera;if(t<1&&a.isZoomLimit())return void this.engine.ctx.event.notify("zoom.limit");const r=e||a.screen.times(.5),n=a.scr2cpx(r),i=a.getPos().minus(n),s=n.plus(i.times(t));this.dispatch(Lt(s,a.w*t))}setupKeyboard(){tt("up",t=>this.pan(new P(0,.1*t))),tt("down",t=>this.pan(new P(0,-.1*t))),tt("right",t=>this.pan(new P(-.1*t,0))),tt("left",t=>this.pan(new P(.1*t,0))),tt("+",t=>this.zoom(1/(1.3*t))),tt("-",t=>this.zoom(1.3*t)),tt("V",()=>this.affineReset()),tt("R left",t=>this.affineTransform("rotation",-et*t)),tt("R right",t=>this.affineTransform("rotation",+et*t)),tt("S right",t=>this.affineTransform("scale",1/(1+.1*t),1)),tt("S left",t=>this.affineTransform("scale",1+.1*t,1)),tt("S up",t=>this.affineTransform("scale",1,1/(1+.1*t))),tt("S down",t=>this.affineTransform("scale",1,1+.1*t)),tt("H right",t=>this.affineTransform("shear",-.1*t,0)),tt("H left",t=>this.affineTransform("shear",.1*t,0)),tt("H up",t=>this.affineTransform("shear",0,-.1*t)),tt("H down",t=>this.affineTransform("shear",0,.1*t))}setupTouch(){var t=new X.a(this.engine.canvas,{});let e,a,r=!1;t.get("pan").set({direction:X.a.DIRECTION_ALL,threshold:1}),t.get("pinch").set({enable:!0}),t.on("doubletap",t=>{const e=new P(t.center.x,t.center.y);this.zoom(.4,new P(e))}),t.on("panstart",t=>{r=!0,e=new P(t.center.x,t.center.y),a=this.camera.clone()}),t.on("panend",t=>{r=!1}),t.on("panmove",t=>{if(r){const r=new P(t.center.x,t.center.y).minus(e),n=a.scr2cpx(new P(0,0)),i=a.scr2cpx(r).minus(n),s=a.getPos().minus(i);this.dispatch(Lt(s))}});var n=!1;let i;t.on("pinchstart",t=>{console.log("pinchstart"),n=!0,i=new P(t.center.x,t.center.y),a=this.camera.clone()}),t.on("pinchend",(function(t){console.log("pinchend"),n=!1})),t.on("pinch",t=>{if(n){var e=a.scr2cpx(i),r=a.scr2cpx(new P(t.center.x,t.center.y)),s=B.GetTriangleToTriangle(e.x,e.y,e.x+1,e.y,e.x,e.y+1,r.x,r.y,r.x+t.scale,r.y,r.x,r.y+t.scale),o=s.inverse().transform(a.pos);let n=a.w/s.a;n<this.camera.resolutionLimit&&(this.engine.ctx.event.notify("zoom.limit"),n=this.camera.resolutionLimit),this.dispatch(Lt(o,n))}})}setupMouse(){this.engine.canvas.addEventListener("wheel",t=>{const e=t||window.event;e.preventDefault();const a=e.shiftKey?.1:1;let r=e.deltaY;r=r>0?1.3*a:1/(1.3*a);const n=new P(e.offsetX,e.offsetY);this.zoom(r,n)})}}function rt(t,e,a){const r=t,n=r.draw.bind(r);let i=0,s="";const o=t=>new Promise(e=>setTimeout(()=>e(),t)),c=()=>{const t=r.getHistogram(),e=r.ctx.camera.screen.x*r.ctx.camera.screen.y,a=r.ctx.iter;let n=0;for(let r=Math.round(.9*a);r<=a;r+=1)n+=t[r];const i=100*n/e;return{shouldIncrease:i>.2,shouldDecrease:i<.05,txt:"10% fringe is ".concat(n,"px or ").concat(i.toFixed(2),"%")}};r.draw=Object(v.a)(p.a.mark((function t(){var a,l,h,d;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i+=1,a=i,(l=r.ctx.fractalId+r.ctx.smooth)===s){t.next=9;break}return t.next=7,n({details:"subsampling",size:4});case 7:if(i===a){t.next=9;break}return t.abrupt("return");case 9:return s=l,t.next=12,n({details:"normal",id:a});case 12:if(i===a){t.next=14;break}return t.abrupt("return");case 14:h=c();case 15:if(!h.shouldIncrease){t.next=26;break}return d=Math.round(1.5*r.ctx.iter),e(q({iter:d})),r.ctx.iter=d,t.next=21,n({details:"normal",id:a});case 21:if(i===a){t.next=23;break}return t.abrupt("return");case 23:h=c(),t.next=15;break;case 26:if(h.shouldDecrease&&(d=Math.round(Math.max(50,r.ctx.iter/1.5)),e(q({iter:d})),r.ctx.iter=d),!S.supersampling){t.next=34;break}return t.next=30,o(1e3);case 30:if(i===a){t.next=32;break}return t.abrupt("return");case 32:return t.next=34,n({details:"supersampling",size:4,id:a});case 34:t.next=38;break;case 36:t.prev=36,t.t0=t.catch(0);case 38:case"end":return t.stop()}}),t,null,[[0,36]])})))}const nt=Object(_.b)({name:"colors",initialState:{offset:0,id:0,density:20,fn:"s"},reducers:{setColorId:(t,e)=>Object(x.a)({},t,{id:e.payload}),setOffset:(t,e)=>Object(x.a)({},t,{offset:e.payload}),setDensity:(t,e)=>Object(x.a)({},t,{density:e.payload}),setPaint:(t,e)=>Object(x.a)({},t,{},e.payload)}}),it=nt.reducer,st=nt.actions,ot=st.setOffset,ct=st.setColorId,lt=st.setDensity,ht=st.setPaint;var dt=a(97),ut=a.n(dt);const ft={t:"mandelbrot",i:"50",fs:"1",ct:"0",co:"0",cd:"20",cf:"n",va:"1.0000",vb:"0.0000",vc:"0.0000",vd:"1.0000"},mt=t=>{const e=t.ctx.camera,a=t.painter;try{const r={};r.t=t.ctx.fractalId,r.x=e.pos.x,r.y=e.pos.y,r.w=e.w,r.i=String(t.ctx.iter),r.fs=t.ctx.smooth?"1":"0",r.ct=String(a.id),r.co=String(Math.round(100*a.offset)),r.cd=String(+a.density.toFixed(2)),r.cf=a.fn,r.va=e.affineMatrix.a.toFixed(4),r.vb=e.affineMatrix.b.toFixed(4),r.vc=e.affineMatrix.c.toFixed(4),r.vd=e.affineMatrix.d.toFixed(4);for(let t in r)r[t]===ft[t]&&delete r[t];const n=Object.entries(r).map(([t,e])=>"".concat(t,"_").concat(e)).join("&");window.history.replaceState("","","#B".concat(n))}catch(r){console.error("Could not set URL",r)}};const pt=()=>{try{const t=document.location.hash;if(t.startsWith("#B"))return function(t){const e=t.substr(2).split("&").reduce((t,e)=>{const a=e.split("_");return Object.assign(t,{[a[0]]:a[1]})},{}),a=Object(x.a)({},ft,{},e),r={x:parseFloat(a.x),y:parseFloat(a.y),w:parseFloat(a.w),iter:parseInt(a.i),fractalId:a.t,smooth:1===parseInt(a.fs),viewport:B.identity};return r.viewport=new B(parseFloat(a.va),parseFloat(a.vb),parseFloat(a.vc),parseFloat(a.vd),0,0),{desc:r,painter:{offset:parseInt(a.co)/100,density:parseFloat(a.cd),id:parseInt(a.ct,10),fn:a.cf}}}(t)}catch(t){console.error("Could not read URL",t)}return null},xt=(t,e=!1)=>{const a=pt();if(!a||e){let e=Object(x.a)({},T("mandelbrot"),{smooth:!0,viewport:B.identity}),a={offset:0,density:20,id:0,fn:"s"};return t(Y(ut()(e,"viewport"))),t(ct(a.id)),t(ot(0)),t(lt(20)),{desc:e,painter:a}}{const e=a.desc,r=a.painter;return t(Y(ut()(a.desc,"viewport"))),t(ct(r.id)),t(ot(r.offset)),t(lt(r.density)),{desc:e,painter:r}}};var wt=a(51),vt=a.n(wt),bt=a(52),gt=a.n(bt);const yt=Object(_.b)({name:"ui",initialState:{drawer:!1,mouseOnCanvas:!1,tab:"fractal",infobox:!1,mouse:{x:0,y:0,iter:0},narrowDevice:!1,orientableDevice:!1},reducers:{setDrawer:(t,e)=>Object(x.a)({},t,{drawer:e.payload}),setTab:(t,e)=>Object(x.a)({},t,{tab:e.payload}),setInfobox:(t,e)=>Object(x.a)({},t,{infobox:e.payload}),setMouseOnCanvas:(t,e)=>Object(x.a)({},t,{mouseOnCanvas:e.payload}),setMouseInfo:(t,e)=>Object(x.a)({},t,{mouse:e.payload}),setNarrowDevice:(t,e)=>Object(x.a)({},t,{narrowDevice:e.payload}),setSnack:(t,e)=>Object(x.a)({},t,{snack:e.payload})}}),Et=yt.reducer,kt=yt.actions,Ft=kt.setDrawer,Mt=kt.setTab,Ot=kt.setInfobox,jt=kt.setMouseOnCanvas,It=kt.setMouseInfo,Ct=kt.setSnack,Tt=kt.setNarrowDevice;let St;const Dt=t=>function(){var e=Object(v.a)(p.a.mark((function e(a,r){var n,i,s,o,c,l,h,d,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tt("I",()=>a(Ot(!r().ui.infobox))),tt("esc",()=>a(Ft(!r().ui.drawer))),tt("D",()=>{a(Ft(!0)),a(Mt("debug"))}),i=(n=()=>[window.innerWidth,window.innerHeight])(),s=Object(w.a)(i,2),t.width=s[0],t.height=s[1],window.addEventListener("resize",()=>{var e=n(),a=Object(w.a)(e,2);t.width=a[0],t.height=a[1],St.resize(t.width,t.height),St.draw()}),o=t=>a(Tt(t.matches)),c=window.matchMedia("(max-width: 450px)"),o(c),c.addListener(o),window.addEventListener("error",gt()(()=>{console.error("error caught, resetting engine");const t=xt(a,!0);St.set(Object(x.a)({},t)),St.draw()},200)),t.addEventListener("mouseenter",()=>{a(jt(!0))}),t.addEventListener("mouseleave",()=>{a(jt(!1))}),t.addEventListener("mousemove",vt()(t=>{const e=St.ctx.camera.scr2cpx(new P(t.offsetX,t.offsetY)),r=St.getIterationsAt(e);a(It({x:e.x,y:e.y,iter:r}))},50)),l=xt(a),h=l.desc,d=l.painter,St=new U(Object(x.a)({},h,{painter:d,canvas:t})),window.engine=St,u=gt()(()=>{mt(St)},250),St.ctx.event.on("draw.start",u),St.ctx.event.on("draw.redraw",u),St.ctx.event.on("zoom.limit",()=>{a(Ct("Sorry, FractalJS cannot zoom further..."))}),St.ctx.event.on("zoom.limit",gt()(()=>{a(Ct(void 0))},5e3)),new at(St,a),rt(St,a),St.draw();case 28:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Nt=t=>function(){var e=Object(v.a)(p.a.mark((function e(a,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t),a(q(n)),St.ctx.camera.affineReset(),a(ht({density:20})),St.painter.set({density:20}),St.set(n),St.draw();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Wt=t=>function(){var e=Object(v.a)(p.a.mark((function e(a,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(q({smooth:t})),St.set({smooth:t}),St.draw();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Lt=(t,e)=>function(){var a=Object(v.a)(p.a.mark((function a(r){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e?(r(q({x:t.x,y:t.y})),St.ctx.camera.setPos(t)):(r(q({x:t.x,y:t.y,w:e})),St.ctx.camera.setPos(t,e)),St.draw();case 2:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),At=t=>function(){var e=Object(v.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(ot(t)),St.painter.set({offset:t}),St.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=t=>function(){var e=Object(v.a)(p.a.mark((function e(a,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(lt(t)),St.painter.set({density:r().colors.density}),St.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),zt=t=>function(){var e=Object(v.a)(p.a.mark((function e(a,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(ht({id:t,fn:"s"})),St.painter.set({id:t,fn:"s"}),St.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var Pt=a(310);const Bt=Object(c.a)(t=>({swatches:{display:"flex",flexWrap:"wrap",marginLeft:-t.spacing(1),"& > *":{"& > *":{textTransform:"none",width:"100%"},width:"50%",paddingLeft:t.spacing(1),paddingBottom:t.spacing(1)}}}));var Gt=function(){const t=Bt(),e=Object(o.b)(),a=Object(o.c)(t=>t.set.fractalId),r=Object.values(C).filter(t=>!t.hidden).sort((t,e)=>(t.uiOrder||0)-(e.uiOrder||0)).map(t=>n.a.createElement("div",{key:t.fractalId},n.a.createElement(Pt.a,{variant:a===t.fractalId?"contained":"outlined",color:a===t.fractalId?"primary":"default",onClick:()=>e(Nt(t.fractalId))},t.name)));return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav",subheader:n.a.createElement(f.a,{component:"div"},"Pick a fractal set")},n.a.createElement(u.a,null,n.a.createElement("div",{className:t.swatches},r))))},Ut=a(329),_t=a(74);const Ht=Math.pow(400,.01),Jt=(()=>{const t=[],e=document.createElement("canvas"),a=e.getContext("2d");e.width=100,e.height=50;const r=a.createImageData(e.width,e.height),n=new Uint32Array(r.data.buffer);return[0,2,3,4,5,10,11,12,13,14,15,16,17,18,19].forEach(i=>{const s=R(i,100);for(let t=0;t<100;t+=1)for(let e=0;e<50;e+=1)n[100*e+t]=s[Math.round(.6*t+.6*e)%100];a.putImageData(r,0,0,0,0,e.width,e.height);const o=e.toDataURL("image/png");t.push({id:i,dataURL:o})}),t})(),Kt=Object(c.a)(t=>({swatches:{display:"flex",flexWrap:"wrap",marginRight:-t.spacing(1),"& > *":{paddingBottom:t.spacing(1),paddingRight:t.spacing(1),width:"20%",height:"56px",position:"relative","& > img":{width:"100%",height:"100%",borderRadius:"4px"},"& > i":{position:"absolute",bottom:0,right:0,color:"white",fontSize:"36px",padding:"0px",textShadow:"2px 2px 2px #888"}}},txt:{width:"100px"}}));var Yt=function(){const t=Kt(),e=Object(o.b)(),a=Object(o.c)(t=>t.colors),r=Jt.map(t=>n.a.createElement("div",{key:t.id,onClick:()=>e(zt(t.id))},n.a.createElement("img",{alt:"",src:t.dataURL}),a.id===t.id?n.a.createElement("i",{className:"material-icons"},"check_circle"):null)),i=Math.log(20*a.density)/Math.log(Ht);return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav",dense:!0},n.a.createElement(f.a,{component:"div"},"Pick & adjust a color palette"),n.a.createElement(u.a,null,n.a.createElement("div",{className:t.swatches},r)),n.a.createElement(u.a,null,n.a.createElement(_t.a,{className:t.txt},"Move"),n.a.createElement(Ut.a,{min:0,max:1,step:.001,value:a.offset,onChange:vt()((t,a)=>e(At(a)),100)})),n.a.createElement(u.a,null,n.a.createElement(_t.a,{className:t.txt},"Stretch"),n.a.createElement(Ut.a,{min:0,max:100,step:1,value:i,onChange:vt()((t,a)=>{return e(Rt((r=a,.05*Math.pow(Ht,r))));var r},100)}))))},qt=a(314),Vt=a(315),Xt=a(326);var Zt=function(){const t=Object(o.b)(),e=Object(o.c)(t=>t.set.smooth),a=Object(o.c)(t=>t.ui);return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav",subheader:n.a.createElement(f.a,{component:"div"},"Advanced settings")},n.a.createElement(u.a,null,n.a.createElement(qt.a,{primary:"Smooth rendering"}),n.a.createElement(Vt.a,null,n.a.createElement(Xt.a,{edge:"end",onChange:e=>{t(Wt(e.target.checked))},checked:e,color:"primary"}))),a.narrowDevice?null:n.a.createElement(u.a,null,n.a.createElement(qt.a,{primary:"Information box"}),n.a.createElement(Vt.a,null,n.a.createElement(Xt.a,{edge:"end",onChange:e=>{t(Ot(e.target.checked))},checked:a.infobox,color:"primary"})))))},Qt=a(327),$t=a(317),te=a(324),ee=a(318),ae=a(132);const re=Object(c.a)(t=>Object(Qt.a)({avatar:{backgroundColor:t.palette.primary.main},inline:{display:"inline"},key:{display:"inline-block",verticalAlign:"middle",border:"1px solid #888",background:"#EEE",borderRadius:"4px",padding:"1px 4px",margin:"2px 0px",fontSize:"13px",minWidth:"1.8em",textAlign:"center",color:"black"}})),ne=()=>{const t=re();return n.a.createElement("small",null,n.a.createElement("span",{className:t.key},"\u2190")," ",n.a.createElement("span",{className:t.key},"\u2191")," ",n.a.createElement("span",{className:t.key},"\u2192")," ",n.a.createElement("span",{className:t.key},"\u2193")," ,"," ",n.a.createElement("span",{className:t.key},"+")," ",n.a.createElement("span",{className:t.key},"-"),n.a.createElement("br",null),"(+ ",n.a.createElement("span",{className:t.key},"S")," ",n.a.createElement("span",{className:t.key},"H")," ",n.a.createElement("span",{className:t.key},"R"),","," ",n.a.createElement("span",{className:t.key},"V")," )",n.a.createElement("br",null),"(+ ",n.a.createElement("span",{className:t.key},"shift")," )")},ie=()=>{const t=re();return n.a.createElement(_t.a,{component:"span",variant:"body1",className:t.inline,color:"textPrimary"},"FractalJS is open-source. You can report bugs, or add you favorite fractal set by heading to"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/solendil/fractaljs/"},"GitHub"),".")};function se(){const t=re();return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.a,{component:"nav",style:{maxWidth:"360px"}},n.a.createElement(f.a,{component:"div"},"Controls"),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?n.a.createElement(u.a,null,n.a.createElement($t.a,null,n.a.createElement(te.a,{className:t.avatar},n.a.createElement("i",{className:"material-icons"},"touch_app"))),n.a.createElement(qt.a,{primary:"Touch",secondary:"Swipe & Pinch to zoom"})):null,matchMedia("(pointer:fine)").matches||matchMedia("(hover:hover)").matches?n.a.createElement(u.a,null,n.a.createElement($t.a,null,n.a.createElement(te.a,{className:t.avatar},n.a.createElement("i",{className:"material-icons"},"mouse"))),n.a.createElement(qt.a,{primary:"Mouse",secondary:"Drag & wheel zoom"})):null,"undefined"===typeof window.orientation&&-1===navigator.userAgent.indexOf("IEMobile")?n.a.createElement(u.a,null,n.a.createElement($t.a,null,n.a.createElement(te.a,{className:t.avatar},n.a.createElement("i",{className:"material-icons"},"keyboard"))),n.a.createElement(qt.a,{primary:"Keyboard",secondary:n.a.createElement(ne,null)})):null,n.a.createElement(ee.a,null),n.a.createElement(f.a,{component:"div"},"About"),n.a.createElement(u.a,null,n.a.createElement(ie,null)),n.a.createElement(u.a,null,n.a.createElement(ae.a,{href:"https://github.com/solendil/fractaljs","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","data-show-count":!0,"aria-label":"Star solendil/fractaljs on GitHub"},"Star")," ")))}function oe(){const t=St,e=t.ctx.camera;return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav"},n.a.createElement(f.a,{component:"div"},"Debug"),n.a.createElement(u.a,null,"Threads: ",t.ctx.nbThreads),n.a.createElement(u.a,null,"Screen: ",e.screen.x," * ",e.screen.y)))}var ce=a(133),le=a.n(ce),he=a(316),de=a(134);var ue=t=>{const e=navigator;return e.share?n.a.createElement(he.a,{className:t.className,onClick:()=>{e.share({title:"FractalJS",text:"Check out this fractal picture !",url:window.location.href})}},n.a.createElement("i",{className:"material-icons"},"share")):null};const fe=Object(c.a)(t=>({bar:{backgroundColor:Object(de.fade)(t.palette.primary.main,.8),backdropFilter:"blur(8px)",position:"fixed",display:"flex",[t.breakpoints.only("xs")]:{width:"100%",height:"56px",bottom:0},[t.breakpoints.up("sm")]:{height:"100%",flexDirection:"column",left:0,flexWrap:"wrap-reverse"}},icons:{color:"white",[t.breakpoints.only("xs")]:{width:"64px"},[t.breakpoints.up("sm")]:{width:"56px"}},brand:{[t.breakpoints.only("xs")]:{display:"none"},color:"white",fontSize:"20px",lineHeight:"56px",writingMode:"vertical-rl",transform:"rotate(180deg)",fontFamily:"roboto",paddingBottom:"56px",paddingTop:"0.5em",letterSpacing:"3px",fontWeight:500,flexGrow:1,textDecoration:"none"}}));var me=()=>{const t=fe(),e=Object(o.b)(),a=le()(pe,(a,r)=>a.hidden?null:n.a.createElement(he.a,{key:r,className:t.icons,onClick:()=>{e(Mt(r)),e(Ft(!0))}},n.a.createElement("i",{className:"material-icons"},a.icon))).filter(Boolean);return a.push(n.a.createElement("a",{href:"https://github.com/solendil/FractalJS",target:"_",className:t.brand,key:"brand"},"FractalJS")),a.splice(2,0,n.a.createElement(ue,{key:"share",className:t.icons})),n.a.createElement("div",{className:t.bar},a)};const pe={fractal:{icon:"home",component:n.a.createElement(Gt,null)},palette:{icon:"invert_colors",component:n.a.createElement(Yt,null)},settings:{icon:"settings",component:n.a.createElement(Zt,null)},about:{icon:"info_outline",component:n.a.createElement(se,null)},debug:{hidden:!0,component:n.a.createElement(oe,null)}},xe=Object(c.a)(t=>({appBar:{top:"auto",bottom:0},drawer:{minWidth:"360px",[t.breakpoints.up("sm")]:{width:"360px"}},trans:{[t.breakpoints.only("xs")]:{borderTopLeftRadius:"10px",borderTopRightRadius:"10px"}},handle:{width:"33%",margin:"4px auto -2px auto",height:"4px"}}));var we=()=>{const t=xe(),e=Object(o.b)(),a=Object(o.c)(t=>({drawer:t.ui.drawer,tab:t.ui.tab})),r=a.drawer,i=a.tab,s=Object(h.a)("(min-width:450px)"),c=pe[i||"fractal"].component;return n.a.createElement(n.a.Fragment,null,n.a.createElement(me,null),n.a.createElement(l.a,{anchor:s?"left":"bottom",open:r,disableDiscovery:!0,disableSwipeToOpen:!0,PaperProps:{className:t.trans},BackdropProps:{invisible:!0},onClose:()=>e(Ft(!1)),onOpen:()=>e(Ft(!0))},n.a.createElement("div",{className:t.drawer},s?null:n.a.createElement(ee.a,{className:t.handle}),c)))},ve=a(320),be=a(323);const ge=Object(c.a)(t=>({box:{position:"fixed",bottom:0,right:0,margin:"16px",background:"white",padding:"16px"}}));var ye=function(){const t=ge(),e=Object(o.c)(t=>t.set),a=Object(o.c)(t=>t.ui);if(a.narrowDevice)return null;if(!a.infobox)return null;const r={};return a.mouseOnCanvas?(r.x=a.mouse.x,r.y=a.mouse.y,r.iter=a.mouse.iter,r.w=e.w):(r.x=e.x,r.y=e.y,r.iter=e.iter,r.w=e.w),n.a.createElement(ve.a,{elevation:3,className:t.box},n.a.createElement(_t.a,{color:"primary",gutterBottom:!0,variant:"h6"},a.mouseOnCanvas?"Mouse":"Screen"),n.a.createElement(_t.a,{component:"div"},n.a.createElement(be.a,{fontFamily:"Monospace"},"X: ",r.x.toFixed(16)),n.a.createElement(be.a,{fontFamily:"Monospace"},"Y: ",r.y.toFixed(16)),n.a.createElement(be.a,{fontFamily:"Monospace"},"iterations: ",r.iter.toFixed(2)),n.a.createElement(be.a,{fontFamily:"Monospace"},"extent: ",r.w.toExponential(2))))},Ee=a(325);const ke=Object(c.a)(t=>({snackbar:{[t.breakpoints.only("xs")]:{bottom:64}}}));var Fe=()=>{const t=Object(o.c)(t=>t.ui),e=ke();return t.snack?n.a.createElement(Ee.a,{open:!0,className:e.snackbar,message:"Sorry, FractalJS cannot zoom further..."}):null};var Me=()=>{const t=Object(o.b)(),e=Object(r.useRef)(null),a=Object(o.c)(t=>t.ui),i=Object(h.a)("(min-width:450px)");n.a.useEffect(()=>{const a=e.current;t(Dt(a))},[t]);let s="";return a.drawer&&(s=i?"offset-left":"offset-top-".concat(a.tab)),n.a.createElement("div",null,n.a.createElement("canvas",{ref:e,className:s}),n.a.createElement(we,null),n.a.createElement(ye,null),n.a.createElement(Fe,null))},Oe=a(321);const je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(t,e){navigator.serviceWorker.register(t).then(t=>{t.onupdatefound=()=>{const a=t.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(t=>{console.error("Error during service worker registration:",t)})}var Ce=a(25);var Te=Object(Ce.c)({ui:Et,set:J,colors:it}),Se=a(135);const De=Object(_.a)({reducer:Te}),Ne=Object(Se.a)({palette:{},breakpoints:{values:{xs:0,sm:450,md:960,lg:1280,xl:1920}}});s.a.render(n.a.createElement(o.a,{store:De},n.a.createElement(Oe.a,{theme:Ne},n.a.createElement(Me,null))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat(".","/service-worker.js");je?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then(a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(t=>{t.unregister().then(()=>{window.location.reload()})}):Ie(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ie(e,t)})}}()}},[[144,1,2]]]);
//# sourceMappingURL=main.67e35eaa.chunk.js.map