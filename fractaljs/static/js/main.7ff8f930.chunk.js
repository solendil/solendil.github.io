(this.webpackJsonpfratcaljs=this.webpackJsonpfratcaljs||[]).push([[0],{127:function(t,e,a){t.exports=function(){return new Worker(a.p+"184f355f6bc47b7f0801.worker.js")}},142:function(t,e,a){t.exports=a(274)},147:function(t,e,a){},153:function(t,e,a){var n={"./burningbird.ts":154,"./burningship.ts":155,"./example.ts":156,"./mandelbrot.ts":157,"./mandelbrot3.ts":158,"./mandelbrot4.ts":159,"./tippetts.ts":160};function r(t){var e=s(t);return a(e)}function s(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=s,t.exports=r,r.id=153},154:function(t,e,a){"use strict";a.r(e);var n=1/Math.log(2);e.default={fractalId:"burningbird",uiOrder:2.5,name:"Burning Bird",preset:{x:-.46,y:.07,w:3.26,iter:50},fn:{normal:(t,e,a)=>{var n,r=0,s=0,i=0,o=0,c=0;for(e=-e;n=(r+r)*s+e,r=i-o+t,s=Math.abs(n),!(++c>=a)&&!((i=r*r)+(o=s*s)>4););return c},smooth:(t,e,a)=>{var r,s,i=0,o=0,c=0,l=0,h=0;for(e=-e;s=(i+i)*o+e,i=c-l+t,o=Math.abs(s),!(++h>=a)&&!((c=i*i)+(l=o*o)>4););if(h===a)return h;for(r=0;r<4;++r)s=(i+i)*o+e,c=(i=c-l+t)*i,l=(o=Math.abs(s))*o;return 5+h-Math.log(Math.log(c+l))*n}}}},155:function(t,e,a){"use strict";a.r(e);var n=1/Math.log(2);e.default={fractalId:"burningship",uiOrder:2,name:"Burning Ship",preset:{x:-.4,y:.55,w:3,iter:50},fn:{normal:(t,e,a)=>{var n,r,s=0,i=0,o=0,c=0,l=0;for(e=-e;r=(s+s)*i+e,n=o-c+t,s=Math.abs(n),i=Math.abs(r),!(++l>=a)&&!((o=s*s)+(c=i*i)>4););return l},smooth:(t,e,a)=>{var r,s,i,o=0,c=0,l=0,h=0,d=0;for(e=-e;i=(o+o)*c+e,s=l-h+t,o=Math.abs(s),c=Math.abs(i),!(++d>=a)&&!((l=o*o)+(h=c*c)>4););if(d===a)return d;for(r=0;r<4;++r)i=(o+o)*c+e,s=l-h+t,l=(o=Math.abs(s))*o,h=(c=Math.abs(i))*c;return 5+d-Math.log(Math.log(l+h))*n}}}},156:function(t,e,a){"use strict";a.r(e),e.default={fractalId:"example",hidden:!0,uiOrder:-1,name:"example",preset:{x:-.7,y:0,w:2.5,iter:50},fn:{normal:(t,e,a)=>0,smooth:(t,e,a)=>0}}},157:function(t,e,a){"use strict";a.r(e);var n=1/Math.log(2);e.default={fractalId:"mandelbrot",uiOrder:0,name:"Mandelbrot",preset:{x:-.7,y:0,w:2.5,iter:50},fn:{normal:(t,e,a)=>{for(var n=0,r=0,s=0,i=0,o=0;o<a&&s+i<=4;++o)r=(n+n)*r+e,s=(n=s-i+t)*n,i=r*r;return o},smooth:(t,e,a)=>{for(var r=0,s=0,i=0,o=0,c=0,l=0;c<a&&i+o<=4;++c)s=(r+r)*s+e,i=(r=i-o+t)*r,o=s*s;if(c===a)return c;for(l=0;l<4;++l)s=(r+r)*s+e,i=(r=i-o+t)*r,o=s*s;return 5+c-Math.log(Math.log(i+o))*n}}}},158:function(t,e,a){"use strict";a.r(e);var n=1/Math.log(4);e.default={fractalId:"mandelbrot3",uiOrder:3,name:"Multibrot *3",preset:{x:0,y:0,w:3,iter:50},fn:{normal:(t,e,a)=>{for(var n=0,r=0,s=0,i=0,o=0;n=s*n-3*n*i+t,r=3*s*r-i*r+e,!(++o>=a)&&!((s=n*n)+(i=r*r)>4););return o},smooth:(t,e,a)=>{for(var r,s,i=0,o=0,c=0,l=0,h=0;i=c*i-3*i*l+t,o=s=3*c*o-l*o+e,!(++h>=a)&&!((c=i*i)+(l=o*o)>4););if(h===a)return h;for(r=0;r<4;++r)s=3*c*o-l*o+e,c=(i=c*i-3*i*l+t)*i,l=(o=s)*o;return 5+h-Math.log(Math.log(c+l))*n}}}},159:function(t,e,a){"use strict";a.r(e);var n=1/Math.log(4);e.default={fractalId:"mandelbrot4",uiOrder:4,name:"Multibrot *4",preset:{x:0,y:0,w:3,iter:50},fn:{normal:(t,e,a)=>{for(var n,r=0,s=0,i=0,o=0,c=0;n=4*i*r*s-4*r*o*s+e,r=i*i-6*i*o+o*o+t,s=n,!(++c>=a)&&!((i=r*r)+(o=s*s)>4););return c},smooth:(t,e,a)=>{for(var r,s=0,i=0,o=0,c=0,l=0;r=4*o*s*i-4*s*c*i+e,s=o*o-6*o*c+c*c+t,i=r,!(++l>=a)&&!((o=s*s)+(c=i*i)>4););return l===a?l:5+l-Math.log(Math.log(o+c))*n}}}},160:function(t,e,a){"use strict";a.r(e);e.default={fractalId:"tippetts",uiOrder:1,name:"Tippetts",preset:{x:-.5,y:0,w:4,iter:50},fn:{normal:(t,e,a)=>{for(var n=0,r=0,s=0,i=0,o=0;o<a&&s+i<=4;++o)s=(n=s-i+t)*n,i=(r=(n+n)*r+e)*r;return o}}}},274:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(147),a(11)),c=a(309),l=a(317),h=a(314),d=a(307),u=a(322),f=a(306),m=a(308),p=a(12),b=a.n(p),x=a(7),w=a(97),v=a(20);class g{constructor(){this.listeners=void 0,this.listeners={}}on(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}notify(t,e){setTimeout(()=>{const a=this.listeners[t]||[];e&&(e.evt=t),a.forEach(t=>{t(e)})},0)}}var y=a(50),E=a(127),k=a.n(E);class F{constructor(t,e){this.id=void 0,this.available=!0,this.worker=void 0,this.callback=void 0,this.id=t,this.worker=new k.a,this.worker.postMessage({action:"init",id:t}),this.worker.onmessage=this.onmessage.bind(this),this.callback=e}draw(t){const e=t.tile;0===e.buffer.length&&(e.buffer=new Float32Array(e.width*e.height)),this.available=!1,this.worker.postMessage(t,[e.buffer.buffer])}onmessage(t){const e=t.data;this.available=!0,this.callback(this,e)}}class M{constructor(t,e){this.orders=[],this.workers=[],this.upperCallback=void 0,this.batchId=1,this.handlers=void 0,this.upperCallback=e;for(let a=0;a<t.nbThreads;a+=1)this.workers.push(new F(a,this.callback.bind(this)))}callback(t,e){e.batchId===this.batchId&&this.upperCallback(e);const a=this.orders.shift();a?t.draw(a):this.workers.every(t=>t.available)&&this.handlers.resolve()}interrupt(){this.orders=[],this.handlers&&this.handlers.reject()}schedule(t){var e=this;return Object(v.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.batchId++,e.orders=t.map(t=>Object(x.a)({},t,{batchId:e.batchId})),e.workers.forEach(t=>{const a=e.orders.shift();a&&t.draw(a)}),a.abrupt("return",new Promise((t,a)=>{e.handlers={resolve:t,reject:a}}));case 4:case"end":return a.stop()}}),a)})))()}}class O{constructor(t){this.canvas=void 0,this.offCanvas=void 0,this.context=void 0,this.lastId=null,this.lastType=null,this.lastMatrix=null,this.canvas=t.canvas,this.context=t.context,this.offCanvas=document.createElement("canvas"),this.offCanvas.width=this.canvas.width,this.offCanvas.height=this.canvas.height}redraw(t,e,a){if(this.lastType!==e&&(this.lastMatrix=null),this.lastId===a)return;let n;if(this.lastMatrix){const e=this.lastMatrix.inverse().multiply(t).inverse(),a=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.offCanvas.getContext("2d").putImageData(a,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform(e.a,e.b,e.c,e.d,e.e,e.f),this.context.drawImage(this.offCanvas,0,0),this.context.setTransform(1,0,0,1,0,0);const r=(e.c*e.f-e.d*e.e+e.e)/(e.a*e.d-e.a-e.b*e.c-e.d+1),s=(e.a*e.f-e.b*e.e-e.f)/(e.a*-e.d+e.a+e.b*e.c+e.d-1);e.a>1.001&&e.d>1.001?n={x:r,y:s,reverse:!1}:e.a<.99&&e.d<.99?n={x:r,y:s,reverse:!0}:(Math.abs(e.e)>.01||Math.abs(e.f)>.01)&&(n={x:this.canvas.width/2,y:this.canvas.height/2,reverse:!0},e.e<-.01&&(n.x=0),e.e>.01&&(n.x=this.canvas.width),e.f<-.01&&(n.y=0),e.f>.01&&(n.y=this.canvas.height))}else this.lastType=e;return this.lastId=a,this.lastMatrix=t,n}}const j=a(153),I={};j.keys().forEach(t=>{const e=j(t).default;I[e.fractalId]=e});const C=t=>{const e=I[t];return Object(x.a)({fractalId:t},e.preset)};class T{constructor(t,e,a){this.nbTiles=100,this.ctx=void 0,this.painter=void 0,this.scheduler=void 0,this.redrawer=void 0,this.width=void 0,this.height=void 0,this.imageData=void 0,this.imageBuffer=void 0,this.tiles=void 0,this.ctx=t,this.resize(),this.callback=this.callback.bind(this),this.scheduler=new M(t,this.callback),this.painter=e,this.redrawer=new O(t)}resize(){this.scheduler&&this.scheduler.interrupt();const t=this.ctx.canvas;this.imageData=this.ctx.context.createImageData(t.width,t.height),this.imageBuffer=new Uint32Array(this.imageData.data.buffer),this.width=t.width,this.height=t.height;const e=this.width/this.height,a=Math.round(Math.sqrt(this.nbTiles/e)),n=Math.round(Math.sqrt(this.nbTiles/e)*e);console.debug("Screen ".concat(this.width,"px * ").concat(this.height,"px (ratio ").concat(e.toFixed(2),"),")+" ".concat(n," * ").concat(a," = ").concat(a*n," tiles (").concat(this.nbTiles," asked)")+", each ~ ".concat(Math.round(t.width/n),"px * ").concat(Math.round(this.ctx.canvas.height/a),"px")),this.tiles=[];for(let r=0;r<a;r+=1)for(let e=0;e<n;e+=1){const s=this.tiles.length,i=Math.round(e*t.width/n),o=Math.round((e+1)*t.width/n)-1,c=Math.round(r*t.height/a),l=Math.round((r+1)*t.height/a)-1,h=(i+o)/2,d=(c+l)/2,u=o-i+1,f=l-c+1,m=new Float32Array(u*f),p=c*t.width+i;this.tiles.push({id:s,i:e,j:r,x1:i,x2:o,y1:c,y2:l,x:h,y:d,width:u,height:f,buffer:m,indexScreen:p})}}getIterationsAt(t){return((t,e)=>{const a=I[t];return e&&a.fn.smooth||a.fn.normal})(this.ctx.fractalId,this.ctx.smooth)(t.x,t.y,this.ctx.iter)}getHistogram(){const t=new Array(this.ctx.iter+1).fill(0);var e,a=Object(y.a)(this.tiles);try{for(a.s();!(e=a.n()).done;){const a=e.value;for(let e in a.buffer){const n=Math.round(a.buffer[e]);n>=0&&n<=this.ctx.iter&&(t[n]+=1)}}}catch(n){a.e(n)}finally{a.f()}return t}drawColor(){this.ctx.event.notify("draw.redraw",{}),this.tiles.forEach(t=>{this.painter.paint(t,this.imageBuffer,this.width)}),this.ctx.context.putImageData(this.imageData,0,0,0,0,this.width,this.height)}draw(t){this.ctx.event.notify("draw.start",{}),this.scheduler.interrupt();this.redrawer.redraw;let e;this.redrawer&&(e=this.redrawer.redraw(this.ctx.camera.matrix,this.ctx.fractalId,t.id||-1));const a=Object.assign({},this.ctx.camera.matrix,{type:this.ctx.fractalId,smooth:this.ctx.smooth,iter:this.ctx.iter}),n=this.tiles.map(e=>({action:"draw",tile:e,params:t,model:a}));return e&&(n.forEach(t=>{t.dist=Math.sqrt(Math.pow(t.tile.x-e.x,2)+Math.pow(t.tile.y-e.y,2))}),n.sort((t,a)=>e.reverse?a.dist-t.dist:t.dist-a.dist)),this.scheduler.schedule(n).catch(()=>{})}callback(t){if("end-draw"!==t.action)throw new Error;const e=t.tile;this.tiles[e.id].buffer=e.buffer,this.painter.paint(e,this.imageBuffer,this.width),this.ctx.context.putImageData(this.imageData,0,0,e.x1,e.y1,e.width,e.height)}}const S={0:"0#080560;0.2#2969CB;0.40#F1FEFE;0.60#FCA425;0.85#000000",1:"0.0775#78591e;0.55#d6e341",2:"0#0000FF;0.33#FFFFFF;0.66#FF0000",3:"0.08#09353e;0.44#1fc3e6;0.77#08173e",4:"0#000085;0.25#fffff5;0.5#ffb500;0.75#9c0000",5:"0#000000;0.25#000000;0.5#7f7f7f;0.75#ffffff;0.975#ffffff",10:"0#000000;0.25#16A085;0.5#FFFFFF;0.75#16A085",11:"0#000000;0.25#27AE60;0.5#FFFFFF;0.75#27AE60",12:"0#000000;0.25#2980B9;0.5#FFFFFF;0.75#2980B9",13:"0#000000;0.25#8E44AD;0.5#FFFFFF;0.75#8E44AD",14:"0#000000;0.25#2C3E50;0.5#FFFFFF;0.75#2C3E50",15:"0#000000;0.25#F39C12;0.5#FFFFFF;0.75#F39C12",16:"0#000000;0.25#D35400;0.5#FFFFFF;0.75#D35400",17:"0#000000;0.25#C0392B;0.5#FFFFFF;0.75#C0392B",18:"0#000000;0.25#BDC3C7;0.5#FFFFFF;0.75#BDC3C7",19:"0#000000;0.25#7F8C8D;0.5#FFFFFF;0.75#7F8C8D"};function N(t,e){let a,n=t.length;if(n!==e.length)throw new Error("Need an equal count of xs and ys.");if(0===n)return function(t){return 0};if(1===n){const t=+e[0];return function(e){return t}}const r=[];for(a=0;a<n;a++)r.push(a);r.sort((e,a)=>t[e]<t[a]?-1:1);let s=t,i=e;for(t=[],e=[],a=0;a<n;a++)t.push(+s[r[a]]),e.push(+i[r[a]]);let o=[],c=[],l=[];for(a=0;a<n-1;a++){let n=t[a+1]-t[a],r=e[a+1]-e[a];c.push(n),o.push(r),l.push(r/n)}const h=[l[0]];for(a=0;a<c.length-1;a++){let t=l[a],e=l[a+1];if(t*e<=0)h.push(0);else{let n=c[a],r=c[a+1],s=n+r;h.push(3*s/((s+r)/t+(s+n)/e))}}h.push(l[l.length-1]);let d=[],u=[];for(a=0;a<h.length-1;a++){let t=h[a],e=l[a],n=1/c[a],r=t+h[a+1]-e-e;d.push((e-t-r)*n),u.push(r*n*n)}return function(a){let n=t.length-1;if(a===t[n])return e[n];let r,s=0,i=u.length-1;for(;s<=i;){r=Math.floor(.5*(s+i));const n=t[r];if(n<a)s=r+1;else{if(!(n>a))return e[r];i=r-1}}n=Math.max(0,i);let o=a-t[n],c=o*o;return e[n]+h[n]*o+d[n]*c+u[n]*o*c}}const D=(t,e=400)=>((t,e)=>{const a=[],n=[],r=[],s=[],i=new Int32Array(t);return e.split(";").forEach(t=>{const e=t.split("#");a.push(Number(e[0])),n.push(parseInt(e[1].substring(0,2),16)),r.push(parseInt(e[1].substring(2,4),16)),s.push(parseInt(e[1].substring(4,6),16))}),(()=>{a.push(a[0]+1),n.push(n[0]),r.push(r[0]),s.push(s[0]);const e=N(a,n),o=N(a,r),c=N(a,s),l=new Uint8Array(i.buffer);let h=0;for(let n=0;n<t;n+=1){let r=n/t;r<a[0]&&(r+=1),l[h+0]=e(r),l[h+1]=o(r),l[h+2]=c(r),l[h+3]=255,h+=4}})(),i})(e,S[t]);class A{constructor(t){this.id=0,this.offset=0,this.fn="s",this.density=0,this.resolution=0,this.buffer=new Int32Array,this.set(t)}set(t){"fn"in t&&(this.fn=t.fn),"offset"in t&&(this.offset=t.offset),"density"in t&&(this.density=t.density),"id"in t&&(this.id=t.id,this.buffer=D(t.id,1e3),this.resolution=this.buffer.length)}paint(t,e,a){var n,r,s,i,o=this.offset*this.resolution,c=this.density,l=this.resolution,h=this.buffer,d=0,u=0;for("s"===this.fn&&(c*=7,o=(this.offset+.85)%1*this.resolution),r=0;r<t.height;r+=1)for(u=(r+t.y1)*a+t.x1,n=0;n<t.width;n+=1)0===(s=t.buffer[d])?i=4278190080:("s"===this.fn&&(s=Math.sqrt(s)),i=h[~~((s*c+o)%l)]),e[u]=i,d+=1,u+=1}}class L{constructor(t,e){this.x=void 0,this.y=void 0,t instanceof L?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}midPoint(t){return new L((t.x+this.x)/2,(t.y+this.y)/2)}minus(t){return new L(this.x-t.x,this.y-t.y)}plus(t){return new L(this.x+t.x,this.y+t.y)}times(t){return t instanceof L?new L(this.x*t.x,this.y*t.y):new L(this.x*t,this.y*t)}minVal(){return Math.min(this.x,this.y)}}class R{constructor(t,e,a,n,r,s){this.a=t,this.b=e,this.c=a,this.d=n,this.e=r,this.f=s}transform(t){return new L(t.x*this.a+t.y*this.c+this.e,t.x*this.b+t.y*this.d+this.f)}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}isInvertible(){const t=this.a*this.d-this.b*this.c;return Math.abs(t)>1e-15}inverse(){if(!this.isInvertible())return this.inverseGaussJordan();const t=this.a*this.d-this.b*this.c;return new R(this.d/t,-this.b/t,-this.c/t,this.a/t,(this.c*this.f-this.d*this.e)/t,-(this.a*this.f-this.b*this.e)/t)}multiply(t){return new R(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}inverseGaussJordan(){function t(t,e,a,n){const r=t[e],s=t[a];for(let i=0;i<6;i++)r[i]+=s[i]*n}function e(t,e,a){const n=t[e];for(let r=0;r<6;r++)n[r]*=a}const a=[[this.a,this.c,this.e,1,0,0],[this.b,this.d,this.f,0,1,0],[0,0,1,0,0,1]];return t(a,1,2,-a[1][2]),t(a,0,2,-a[0][2]),t(a,1,0,-a[1][0]/a[0][0]),t(a,0,1,-a[0][1]/a[1][1]),e(a,0,1/a[0][0]),e(a,1,1/a[1][1]),new R(a[0][3],a[1][3],a[0][4],a[1][4],a[0][5],a[1][5])}toString(){return"".concat(this.a," ").concat(this.c," ").concat(this.e,"\n").concat(this.b," ").concat(this.d," ").concat(this.f,"\n0 0 1")}static GetTriangleToTriangle(t,e,a,n,r,s,i,o,c,l,h,d){const u=new R(t-r,e-s,a-r,n-s,r,s),f=new R(i-h,o-d,c-h,l-d,h,d),m=u.inverse();return f.multiply(m)}static GetRotationMatrix(t){const e=Math.cos(t),a=Math.sin(t);return new R(e,a,-a,e,0,0)}static GetScaleMatrix(t,e){return new R(t,0,0,e,0,0)}static GetShearMatrix(t,e){return new R(1,e,t,1,0,0)}}R.identity=new R(1,0,0,1,0,0);class z{constructor(t,e,a,n=R.identity){this.matrix_inv=void 0,this.matrix=void 0,this.affineMatrix=void 0,this.screen=void 0,this.resolutionLimit=void 0,this.pos=void 0,this.w=void 0,this.affineMatrix=n,this.screen=t;const r=t.minVal();this.resolutionLimit=111e-17*r,this.pos=e,this.w=a,this.matrix=R.identity,this.matrix_inv=R.identity,this.reproject()}reproject(){this.w=Math.max(this.w,this.resolutionLimit);const t=((t,e,a)=>{const n=t.transform(new L(1,-1)),r=t.transform(new L(-1,1)),s=t.transform(new L(-1,-1));if(e>=a){const t=(e-a)/2,i=t+a;return R.GetTriangleToTriangle(i,a,t,0,t,a,n.x,n.y,r.x,r.y,s.x,s.y)}{const t=(a-e)/2,i=t+e;return R.GetTriangleToTriangle(e,i,0,t,0,i,n.x,n.y,r.x,r.y,s.x,s.y)}})(this.affineMatrix,this.screen.x,this.screen.y),e=(a=this.pos.x,n=this.pos.y,r=this.w,R.GetTriangleToTriangle(1,0,0,1,0,0,a+r/2,n,a,n+r/2,a,n));var a,n,r;this.matrix=e.multiply(t),this.matrix_inv=this.matrix.inverse()}affineTransform(t,e,a){let n=R.identity;switch(t){case"rotation":n=R.GetRotationMatrix(e);break;case"shear":n=R.GetShearMatrix(e,a);break;case"scale":n=R.GetScaleMatrix(e,a)}this.affineMatrix=this.affineMatrix.multiply(n),this.reproject()}affineReset(){this.affineMatrix=R.identity,this.reproject()}clone(){return new z(this.screen,this.pos,this.w,this.affineMatrix)}scr2cpx(t){return this.matrix.transform(t)}cpx2scr(t){return this.matrix_inv.transform(t)}getPos(){return this.pos}setPos(t,e){this.pos=t,e&&(this.w=e),this.reproject()}resize(t,e){this.screen=new L(t,e);const a=Math.min(t,e);this.resolutionLimit=111e-17*a,this.reproject()}isZoomLimit(){return this.w<=this.resolutionLimit}}class P{constructor(t){this.ctx=void 0,this.painter=void 0,this.renderer=void 0;let e=navigator.hardwareConcurrency||4;e>=6&&e--,this.ctx={canvas:t.canvas,context:t.canvas.getContext("2d"),nbThreads:e,event:new g,camera:new z(new L(t.canvas.width,t.canvas.height),new L(t.x,t.y),t.w,t.viewport),smooth:t.smooth,iter:t.iter,fractalId:t.fractalId},this.painter=new A(t.painter),this.renderer=new T(this.ctx,this.painter,this)}get canvas(){return this.ctx.canvas}set(t){"fractalId"in t&&(this.ctx.fractalId=t.fractalId),"smooth"in t&&(this.ctx.smooth=t.smooth),"iter"in t&&(this.ctx.iter=t.iter),"x"in t&&this.ctx.camera.setPos(new L(t.x,t.y),t.w),"painter"in t&&this.painter.set(t.painter)}draw(t){var e=this;return Object(v.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t||(t={details:"normal"}),a.abrupt("return",e.renderer.draw(t));case 2:case"end":return a.stop()}}),a)})))()}drawColor(){this.renderer.drawColor()}resize(t,e){this.ctx.camera.resize(t,e),this.renderer.resize()}getHistogram(){return this.renderer.getHistogram()}getIterationsAt(t){return this.renderer.getIterationsAt(t)}}var B=a(28);const W=Object(B.b)({name:"set",initialState:{fractalId:"mandelbrot",smooth:!0,x:0,y:0,w:0,iter:0},reducers:{setSet:(t,e)=>e.payload,updateSet:(t,e)=>Object(x.a)({},t,{},e.payload)}}),G=W.reducer,U=W.actions,_=U.setSet,H=U.updateSet;var J=a(95),K=a.n(J);const V={left:37,up:38,right:39,down:40,"+":107,"-":109,esc:27,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},Y=[],q=[];document.addEventListener("keyup",t=>{Y[t.keyCode]=!1}),document.addEventListener("keydown",t=>{Y[t.keyCode]=!0;const e=t.shiftKey?.1:1;var a,n=Object(y.a)(q);try{for(n.s();!(a=n.n()).done;){const t=a.value;if(t.combo.every(t=>Y[t]))return void t.func(e)}}catch(r){n.e(r)}finally{n.f()}});const X=(t,e)=>{const a=t.split(" "),n=[];var r,s=Object(y.a)(a);try{for(s.s();!(r=s.n()).done;){const t=r.value;if(!(t in V))throw new Error("Unknown key".concat(t));n.push(V[t])}}catch(i){s.e(i)}finally{s.f()}q.push({combo:n,func:e}),q.sort((t,e)=>e.combo.length-t.combo.length)},Z=Math.PI/18;class Q{constructor(t,e){this.dispatch=e,this.engine=void 0,this.camera=void 0,this.engine=t,this.camera=t.ctx.camera,this.setupKeyboard(),this.setupMouse(),this.setupTouch()}pan(t){const e=this.camera,a=e.screen.times(t),n=e.scr2cpx(new L(0,0)),r=e.scr2cpx(a),s=n.minus(r),i=e.getPos().plus(s);this.dispatch(St(i))}affineTransform(t,e,a){this.camera.affineTransform(t,e,a),this.engine.draw()}affineReset(){this.camera.affineReset(),this.engine.draw()}zoom(t,e){const a=this.camera;if(t<1&&a.isZoomLimit())return void this.engine.ctx.event.notify("zoom.limit");const n=e||a.screen.times(.5),r=a.scr2cpx(n),s=a.getPos().minus(r),i=r.plus(s.times(t));this.dispatch(St(i,a.w*t))}setupKeyboard(){X("up",t=>this.pan(new L(0,.1*t))),X("down",t=>this.pan(new L(0,-.1*t))),X("right",t=>this.pan(new L(-.1*t,0))),X("left",t=>this.pan(new L(.1*t,0))),X("+",t=>this.zoom(1/(1.3*t))),X("-",t=>this.zoom(1.3*t)),X("V",()=>this.affineReset()),X("R left",t=>this.affineTransform("rotation",-Z*t)),X("R right",t=>this.affineTransform("rotation",+Z*t)),X("S right",t=>this.affineTransform("scale",1/(1+.1*t),1)),X("S left",t=>this.affineTransform("scale",1+.1*t,1)),X("S up",t=>this.affineTransform("scale",1,1/(1+.1*t))),X("S down",t=>this.affineTransform("scale",1,1+.1*t)),X("H right",t=>this.affineTransform("shear",-.1*t,0)),X("H left",t=>this.affineTransform("shear",.1*t,0)),X("H up",t=>this.affineTransform("shear",0,-.1*t)),X("H down",t=>this.affineTransform("shear",0,.1*t))}setupTouch(){var t=new K.a(this.engine.canvas,{});let e,a,n=!1;t.get("pan").set({direction:K.a.DIRECTION_ALL,threshold:1}),t.get("pinch").set({enable:!0}),t.on("doubletap",t=>{const e=new L(t.center.x,t.center.y);this.zoom(.4,new L(e))}),t.on("panstart",t=>{n=!0,e=new L(t.center.x,t.center.y),a=this.camera.clone()}),t.on("panend",t=>{n=!1}),t.on("panmove",t=>{if(n){const n=new L(t.center.x,t.center.y).minus(e),r=a.scr2cpx(new L(0,0)),s=a.scr2cpx(n).minus(r),i=a.getPos().minus(s);this.dispatch(St(i))}});var r=!1;let s;t.on("pinchstart",t=>{console.log("pinchstart"),r=!0,s=new L(t.center.x,t.center.y),a=this.camera.clone()}),t.on("pinchend",(function(t){console.log("pinchend"),r=!1})),t.on("pinch",t=>{if(r){var e=a.scr2cpx(s),n=a.scr2cpx(new L(t.center.x,t.center.y)),i=R.GetTriangleToTriangle(e.x,e.y,e.x+1,e.y,e.x,e.y+1,n.x,n.y,n.x+t.scale,n.y,n.x,n.y+t.scale),o=i.inverse().transform(a.pos);let r=a.w/i.a;r<this.camera.resolutionLimit&&(this.engine.ctx.event.notify("zoom.limit"),r=this.camera.resolutionLimit),this.dispatch(St(o,r))}})}setupMouse(){this.engine.canvas.addEventListener("wheel",t=>{const e=t||window.event;e.preventDefault();const a=e.shiftKey?.1:1;let n=e.deltaY;n=n>0?1.3*a:1/(1.3*a);const r=new L(e.offsetX,e.offsetY);this.zoom(n,r)})}}function $(t,e,a){const n=t,r=n.draw.bind(n);let s=0,i="";const o=t=>new Promise(e=>setTimeout(()=>e(),t)),c=t=>{const e=n.ctx.iter,a=t.reduce((t,e)=>t+e,0),r=t[0];let s=Number.MAX_VALUE,i=-1;for(let n=1;n<t.length;n+=1)0!==t[n]&&(i=n,s=Math.min(n,s));const o=i-s;let c=0;for(let n=e-Math.ceil(o/10);n<t.length;n+=1)c+=t[n];const l=100*r/a,h=100*c/r,d={shouldIncrease:!1,shouldDecrease:!1};return l>1&&h>1?d.shouldIncrease=!0:l>1&&h>1&&(d.shouldDecrease=!0),d};n.draw=Object(v.a)(b.a.mark((function t(){var a,l,h,d,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s+=1,a=s,(l=n.ctx.fractalId+n.ctx.smooth)===i){t.next=8;break}return t.next=6,r({details:"subsampling",size:4});case 6:if(s===a){t.next=8;break}return t.abrupt("return");case 8:i=l,h={};case 10:return t.next=12,r({details:"normal",id:a});case 12:if(s===a){t.next=14;break}return t.abrupt("return");case 14:d=n.getHistogram(),(h=c(d)).shouldIncrease&&(u=n.ctx.iter,e(H({iter:1.5*u})),n.ctx.iter=Math.round(1.5*u));case 17:if(h.shouldIncrease){t.next=10;break}case 18:return t.next=20,o(1e3);case 20:if(s===a){t.next=22;break}return t.abrupt("return");case 22:return t.next=24,r({details:"supersampling",size:4,id:a});case 24:case"end":return t.stop()}}),t)})))}const tt=Object(B.b)({name:"colors",initialState:{offset:0,id:0,density:20,fn:"s"},reducers:{setColorId:(t,e)=>Object(x.a)({},t,{id:e.payload}),setOffset:(t,e)=>Object(x.a)({},t,{offset:e.payload}),setDensity:(t,e)=>Object(x.a)({},t,{density:e.payload}),setPaint:(t,e)=>Object(x.a)({},t,{},e.payload)}}),et=tt.reducer,at=tt.actions,nt=at.setOffset,rt=at.setColorId,st=at.setDensity,it=at.setPaint;var ot=a(96),ct=a.n(ot);const lt={t:"mandelbrot",i:"50",fs:"1",ct:"0",co:"0",cd:"20",cf:"n",va:"1.0000",vb:"0.0000",vc:"0.0000",vd:"1.0000"},ht=t=>{const e=t.ctx.camera,a=t.painter;try{const n={};n.t=t.ctx.fractalId,n.x=e.pos.x,n.y=e.pos.y,n.w=e.w,n.i=String(t.ctx.iter),n.fs=t.ctx.smooth?"1":"0",n.ct=String(a.id),n.co=String(Math.round(100*a.offset)),n.cd=String(+a.density.toFixed(2)),n.cf=a.fn,n.va=e.affineMatrix.a.toFixed(4),n.vb=e.affineMatrix.b.toFixed(4),n.vc=e.affineMatrix.c.toFixed(4),n.vd=e.affineMatrix.d.toFixed(4);for(let t in n)n[t]===lt[t]&&delete n[t];const r=Object.entries(n).map(([t,e])=>"".concat(t,"_").concat(e)).join("&");window.history.replaceState("","","#B".concat(r))}catch(n){console.error("Could not set URL",n)}};const dt=()=>{try{const t=document.location.hash;if(t.startsWith("#B"))return function(t){const e=t.substr(2).split("&").reduce((t,e)=>{const a=e.split("_");return Object.assign(t,{[a[0]]:a[1]})},{}),a=Object(x.a)({},lt,{},e),n={x:parseFloat(a.x),y:parseFloat(a.y),w:parseFloat(a.w),iter:parseInt(a.i),fractalId:a.t,smooth:1===parseInt(a.fs),viewport:R.identity};return n.viewport=new R(parseFloat(a.va),parseFloat(a.vb),parseFloat(a.vc),parseFloat(a.vd),0,0),{desc:n,painter:{offset:parseInt(a.co)/100,density:parseFloat(a.cd),id:parseInt(a.ct,10),fn:a.cf}}}(t)}catch(t){console.error("Could not read URL",t)}return null},ut=(t,e=!1)=>{const a=dt();if(!a||e){let e=Object(x.a)({},C("mandelbrot"),{smooth:!0,viewport:R.identity}),a={offset:0,density:20,id:0,fn:"s"};return t(_(ct()(e,"viewport"))),t(rt(a.id)),t(nt(0)),t(st(20)),{desc:e,painter:a}}{const e=a.desc,n=a.painter;return t(_(ct()(a.desc,"viewport"))),t(rt(n.id)),t(nt(n.offset)),t(st(n.density)),{desc:e,painter:n}}};var ft=a(51),mt=a.n(ft),pt=a(52),bt=a.n(pt);const xt=Object(B.b)({name:"ui",initialState:{drawer:!1,mouseOnCanvas:!1,tab:"fractal",infobox:!1,mouse:{x:0,y:0,iter:0},narrowDevice:!1,orientableDevice:!1},reducers:{setDrawer:(t,e)=>Object(x.a)({},t,{drawer:e.payload}),setTab:(t,e)=>Object(x.a)({},t,{tab:e.payload}),setInfobox:(t,e)=>Object(x.a)({},t,{infobox:e.payload}),setMouseOnCanvas:(t,e)=>Object(x.a)({},t,{mouseOnCanvas:e.payload}),setMouseInfo:(t,e)=>Object(x.a)({},t,{mouse:e.payload}),setNarrowDevice:(t,e)=>Object(x.a)({},t,{narrowDevice:e.payload}),setSnack:(t,e)=>Object(x.a)({},t,{snack:e.payload})}}),wt=xt.reducer,vt=xt.actions,gt=vt.setDrawer,yt=vt.setTab,Et=vt.setInfobox,kt=vt.setMouseOnCanvas,Ft=vt.setMouseInfo,Mt=vt.setSnack,Ot=vt.setNarrowDevice;let jt;const It=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,n){var r,s,i,o,c,l,h,d,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X("I",()=>a(Et(!n().ui.infobox))),X("esc",()=>a(gt(!n().ui.drawer))),X("D",()=>{a(gt(!0)),a(yt("debug"))}),s=(r=()=>[window.innerWidth,window.innerHeight])(),i=Object(w.a)(s,2),t.width=i[0],t.height=i[1],window.addEventListener("resize",()=>{var e=r(),a=Object(w.a)(e,2);t.width=a[0],t.height=a[1],jt.resize(t.width,t.height),jt.draw()}),o=t=>a(Ot(t.matches)),c=window.matchMedia("(max-width: 450px)"),o(c),c.addListener(o),window.addEventListener("error",bt()(()=>{console.error("error caught, resetting engine");const t=ut(a,!0);jt.set(Object(x.a)({},t)),jt.draw()},200)),t.addEventListener("mouseenter",()=>{a(kt(!0))}),t.addEventListener("mouseleave",()=>{a(kt(!1))}),t.addEventListener("mousemove",mt()(t=>{const e=jt.ctx.camera.scr2cpx(new L(t.offsetX,t.offsetY)),n=jt.getIterationsAt(e);a(Ft({x:e.x,y:e.y,iter:n}))},50)),l=ut(a),h=l.desc,d=l.painter,jt=new P(Object(x.a)({},h,{painter:d,canvas:t})),window.engine=jt,u=bt()(()=>{ht(jt)},250),jt.ctx.event.on("draw.start",u),jt.ctx.event.on("draw.redraw",u),jt.ctx.event.on("zoom.limit",()=>{a(Mt("Sorry, FractalJS cannot zoom further..."))}),jt.ctx.event.on("zoom.limit",bt()(()=>{a(Mt(void 0))},5e3)),new Q(jt,a),$(jt,a),jt.draw();case 28:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ct=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=C(t),a(H(r)),jt.ctx.camera.affineReset(),a(it({density:20})),jt.painter.set({density:20}),jt.set(r),jt.draw();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Tt=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(H({smooth:t})),jt.set({smooth:t}),jt.draw();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),St=(t,e)=>function(){var a=Object(v.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e?(n(H({x:t.x,y:t.y})),jt.ctx.camera.setPos(t)):(n(H({x:t.x,y:t.y,w:e})),jt.ctx.camera.setPos(t,e)),jt.draw();case 2:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),Nt=t=>function(){var e=Object(v.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(nt(t)),jt.painter.set({offset:t}),jt.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dt=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(st(t)),jt.painter.set({density:n().colors.density}),jt.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),At=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(it({id:t,fn:"s"})),jt.painter.set({id:t,fn:"s"}),jt.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var Lt=function(){const t=Object(o.b)(),e=Object(o.c)(t=>t.set.fractalId),a=Object.values(I).filter(t=>!t.hidden).sort((t,e)=>(t.uiOrder||0)-(e.uiOrder||0)).map(a=>r.a.createElement(u.a,{key:a.fractalId,button:!0,onClick:()=>t(Ct(a.fractalId)),selected:e===a.fractalId},r.a.createElement(f.a,{primary:a.name})));return r.a.createElement("div",null,r.a.createElement(d.a,{component:"nav",subheader:r.a.createElement(m.a,{component:"div"},"Pick a fractal set")},a))},Rt=a(324),zt=a(73);const Pt=Math.pow(400,.01),Bt=(()=>{const t=[],e=document.createElement("canvas"),a=e.getContext("2d");e.width=100,e.height=50;const n=a.createImageData(e.width,e.height),r=new Uint32Array(n.data.buffer);return[0,2,3,4,5,10,11,12,13,14,15,16,17,18,19].forEach(s=>{const i=D(s,100);for(let t=0;t<100;t+=1)for(let e=0;e<50;e+=1)r[100*e+t]=i[Math.round(.6*t+.6*e)%100];a.putImageData(n,0,0,0,0,e.width,e.height);const o=e.toDataURL("image/png");t.push({id:s,dataURL:o})}),t})(),Wt=Object(c.a)(t=>({swatches:{display:"flex",flexWrap:"wrap",marginRight:-t.spacing(1),"& > *":{paddingBottom:t.spacing(1),paddingRight:t.spacing(1),width:"20%",height:"56px",position:"relative","& > img":{width:"100%",height:"100%",borderRadius:"4px"},"& > i":{position:"absolute",bottom:0,right:0,color:"white",fontSize:"36px",padding:"0px",textShadow:"2px 2px 2px #888"}}},txt:{width:"100px"}}));var Gt=function(){const t=Wt(),e=Object(o.b)(),a=Object(o.c)(t=>t.colors),n=Bt.map(t=>r.a.createElement("div",{key:t.id,onClick:()=>e(At(t.id))},r.a.createElement("img",{alt:"",src:t.dataURL}),a.id===t.id?r.a.createElement("i",{className:"material-icons"},"check_circle"):null)),s=Math.log(20*a.density)/Math.log(Pt);return r.a.createElement("div",null,r.a.createElement(d.a,{component:"nav",dense:!0},r.a.createElement(m.a,{component:"div"},"Pick & adjust a color palette"),r.a.createElement(u.a,null,r.a.createElement("div",{className:t.swatches},n)),r.a.createElement(u.a,null,r.a.createElement(zt.a,{className:t.txt},"Move"),r.a.createElement(Rt.a,{min:0,max:1,step:.001,value:a.offset,onChange:mt()((t,a)=>e(Nt(a)),100)})),r.a.createElement(u.a,null,r.a.createElement(zt.a,{className:t.txt},"Stretch"),r.a.createElement(Rt.a,{min:0,max:100,step:1,value:s,onChange:mt()((t,a)=>{return e(Dt((n=a,.05*Math.pow(Pt,n))));var n},100)}))))},Ut=a(310),_t=a(321);var Ht=function(){const t=Object(o.b)(),e=Object(o.c)(t=>t.set.smooth),a=Object(o.c)(t=>t.ui);return r.a.createElement("div",null,r.a.createElement(d.a,{component:"nav",subheader:r.a.createElement(m.a,{component:"div"},"Advanced settings")},r.a.createElement(u.a,null,r.a.createElement(f.a,{primary:"Smooth rendering"}),r.a.createElement(Ut.a,null,r.a.createElement(_t.a,{edge:"end",onChange:e=>{t(Tt(e.target.checked))},checked:e,color:"primary"}))),a.narrowDevice?null:r.a.createElement(u.a,null,r.a.createElement(f.a,{primary:"Information box"}),r.a.createElement(Ut.a,null,r.a.createElement(_t.a,{edge:"end",onChange:e=>{t(Et(e.target.checked))},checked:a.infobox,color:"primary"})))))},Jt=a(323),Kt=a(312),Vt=a(320),Yt=a(313),qt=a(131);const Xt=Object(c.a)(t=>Object(Jt.a)({avatar:{backgroundColor:t.palette.primary.main},inline:{display:"inline"},key:{display:"inline-block",verticalAlign:"middle",border:"1px solid #888",background:"#EEE",borderRadius:"4px",padding:"1px 4px",margin:"2px 0px",fontSize:"13px",minWidth:"1.8em",textAlign:"center",color:"black"}})),Zt=()=>{const t=Xt();return r.a.createElement("small",null,r.a.createElement("span",{className:t.key},"\u2190")," ",r.a.createElement("span",{className:t.key},"\u2191")," ",r.a.createElement("span",{className:t.key},"\u2192")," ",r.a.createElement("span",{className:t.key},"\u2193")," ,"," ",r.a.createElement("span",{className:t.key},"+")," ",r.a.createElement("span",{className:t.key},"-"),r.a.createElement("br",null),"(+ ",r.a.createElement("span",{className:t.key},"S")," ",r.a.createElement("span",{className:t.key},"H")," ",r.a.createElement("span",{className:t.key},"R"),","," ",r.a.createElement("span",{className:t.key},"V")," )",r.a.createElement("br",null),"(+ ",r.a.createElement("span",{className:t.key},"shift")," )")},Qt=()=>{const t=Xt();return r.a.createElement(zt.a,{component:"span",variant:"body1",className:t.inline,color:"textPrimary"},"FractalJS is open-source. You can report bugs, or add you favorite fractal set by heading to"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/solendil/fractaljs/"},"GitHub"),".")};function $t(){const t=Xt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{component:"nav",style:{maxWidth:"360px"}},r.a.createElement(m.a,{component:"div"},"Controls"),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?r.a.createElement(u.a,null,r.a.createElement(Kt.a,null,r.a.createElement(Vt.a,{className:t.avatar},r.a.createElement("i",{className:"material-icons"},"touch_app"))),r.a.createElement(f.a,{primary:"Touch",secondary:"Swipe & Pinch to zoom"})):null,matchMedia("(pointer:fine)").matches||matchMedia("(hover:hover)").matches?r.a.createElement(u.a,null,r.a.createElement(Kt.a,null,r.a.createElement(Vt.a,{className:t.avatar},r.a.createElement("i",{className:"material-icons"},"mouse"))),r.a.createElement(f.a,{primary:"Mouse",secondary:"Drag & wheel zoom"})):null,"undefined"===typeof window.orientation&&-1===navigator.userAgent.indexOf("IEMobile")?r.a.createElement(u.a,null,r.a.createElement(Kt.a,null,r.a.createElement(Vt.a,{className:t.avatar},r.a.createElement("i",{className:"material-icons"},"keyboard"))),r.a.createElement(f.a,{primary:"Keyboard",secondary:r.a.createElement(Zt,null)})):null,r.a.createElement(Yt.a,null),r.a.createElement(m.a,{component:"div"},"About"),r.a.createElement(u.a,null,r.a.createElement(Qt,null)),r.a.createElement(u.a,null,r.a.createElement(qt.a,{href:"https://github.com/solendil/fractaljs","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","data-show-count":!0,"aria-label":"Star solendil/fractaljs on GitHub"},"Star")," ")))}function te(){const t=jt,e=t.ctx.camera;return r.a.createElement("div",null,r.a.createElement(d.a,{component:"nav"},r.a.createElement(m.a,{component:"div"},"Debug"),r.a.createElement(u.a,null,"Threads: ",t.ctx.nbThreads),r.a.createElement(u.a,null,"Screen: ",e.screen.x," * ",e.screen.y)))}var ee=a(132),ae=a.n(ee),ne=a(311),re=a(133);var se=t=>{const e=navigator;return e.share?r.a.createElement(ne.a,{className:t.className,onClick:()=>{e.share({title:"FractalJS",text:"Check out this fractal picture !",url:window.location.href})}},r.a.createElement("i",{className:"material-icons"},"share")):null};const ie=Object(c.a)(t=>({bar:{backgroundColor:Object(re.fade)(t.palette.primary.main,.8),backdropFilter:"blur(8px)",position:"fixed",display:"flex",[t.breakpoints.only("xs")]:{width:"100%",height:"56px",bottom:0},[t.breakpoints.up("sm")]:{height:"100%",flexDirection:"column",left:0,flexWrap:"wrap-reverse"}},icons:{color:"white",[t.breakpoints.only("xs")]:{width:"64px"},[t.breakpoints.up("sm")]:{width:"56px"}},brand:{[t.breakpoints.only("xs")]:{display:"none"},color:"white",fontSize:"20px",lineHeight:"56px",writingMode:"vertical-rl",transform:"rotate(180deg)",fontFamily:"roboto",paddingBottom:"56px",paddingTop:"0.5em",letterSpacing:"3px",fontWeight:500,flexGrow:1,textDecoration:"none"}}));var oe=()=>{const t=ie(),e=Object(o.b)(),a=ae()(ce,(a,n)=>a.hidden?null:r.a.createElement(ne.a,{key:n,className:t.icons,onClick:()=>{e(yt(n)),e(gt(!0))}},r.a.createElement("i",{className:"material-icons"},a.icon))).filter(Boolean);return a.push(r.a.createElement("a",{href:"https://github.com/solendil/FractalJS",target:"_",className:t.brand,key:"brand"},"FractalJS")),a.splice(2,0,r.a.createElement(se,{key:"share",className:t.icons})),r.a.createElement("div",{className:t.bar},a)};const ce={fractal:{icon:"home",component:r.a.createElement(Lt,null)},palette:{icon:"invert_colors",component:r.a.createElement(Gt,null)},settings:{icon:"settings",component:r.a.createElement(Ht,null)},about:{icon:"info_outline",component:r.a.createElement($t,null)},debug:{hidden:!0,component:r.a.createElement(te,null)}},le=Object(c.a)(t=>({appBar:{top:"auto",bottom:0},drawer:{minWidth:"360px",[t.breakpoints.up("sm")]:{width:"360px"}},trans:{[t.breakpoints.only("xs")]:{borderTopLeftRadius:"10px",borderTopRightRadius:"10px"}},handle:{width:"33%",margin:"4px auto -2px auto",height:"4px"}}));var he=()=>{const t=le(),e=Object(o.b)(),a=Object(o.c)(t=>({drawer:t.ui.drawer,tab:t.ui.tab})),n=a.drawer,s=a.tab,i=Object(h.a)("(min-width:450px)"),c=ce[s||"fractal"].component;return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(l.a,{anchor:i?"left":"bottom",open:n,disableDiscovery:!0,disableSwipeToOpen:!0,PaperProps:{className:t.trans},BackdropProps:{invisible:!0},onClose:()=>e(gt(!1)),onOpen:()=>e(gt(!0))},r.a.createElement("div",{className:t.drawer},i?null:r.a.createElement(Yt.a,{className:t.handle}),c)))},de=a(315),ue=a(318);const fe=Object(c.a)(t=>({box:{position:"fixed",bottom:0,right:0,margin:"16px",background:"white",padding:"16px"}}));var me=function(){const t=fe(),e=Object(o.c)(t=>t.set),a=Object(o.c)(t=>t.ui);if(a.narrowDevice)return null;if(!a.infobox)return null;const n={};return a.mouseOnCanvas?(n.x=a.mouse.x,n.y=a.mouse.y,n.iter=a.mouse.iter,n.w=e.w):(n.x=e.x,n.y=e.y,n.iter=e.iter,n.w=e.w),r.a.createElement(de.a,{elevation:3,className:t.box},r.a.createElement(zt.a,{color:"primary",gutterBottom:!0,variant:"h6"},a.mouseOnCanvas?"Mouse":"Screen"),r.a.createElement(zt.a,{component:"div"},r.a.createElement(ue.a,{fontFamily:"Monospace"},"X: ",n.x.toFixed(16)),r.a.createElement(ue.a,{fontFamily:"Monospace"},"Y: ",n.y.toFixed(16)),r.a.createElement(ue.a,{fontFamily:"Monospace"},"iterations: ",n.iter.toFixed(2)),r.a.createElement(ue.a,{fontFamily:"Monospace"},"extent: ",n.w.toExponential(2))))},pe=a(319);const be=Object(c.a)(t=>({snackbar:{[t.breakpoints.only("xs")]:{bottom:64}}}));var xe=()=>{const t=Object(o.c)(t=>t.ui),e=be();return t.snack?r.a.createElement(pe.a,{open:!0,className:e.snackbar,message:"Sorry, FractalJS cannot zoom further..."}):null};var we=()=>{const t=Object(o.b)(),e=Object(n.useRef)(null),a=Object(o.c)(t=>t.ui),s=Object(h.a)("(min-width:450px)");r.a.useEffect(()=>{const a=e.current;t(It(a))},[t]);let i="";return a.drawer&&(i=s?"offset-left":"offset-top-".concat(a.tab)),r.a.createElement("div",null,r.a.createElement("canvas",{ref:e,className:i}),r.a.createElement(he,null),r.a.createElement(me,null),r.a.createElement(xe,null))},ve=a(316);const ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ye(t,e){navigator.serviceWorker.register(t).then(t=>{t.onupdatefound=()=>{const a=t.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(t=>{console.error("Error during service worker registration:",t)})}var Ee=a(25);var ke=Object(Ee.c)({ui:wt,set:G,colors:et}),Fe=a(134);const Me=Object(B.a)({reducer:ke}),Oe=Object(Fe.a)({palette:{},breakpoints:{values:{xs:0,sm:450,md:960,lg:1280,xl:1920}}});i.a.render(r.a.createElement(o.a,{store:Me},r.a.createElement(ve.a,{theme:Oe},r.a.createElement(we,null))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat(".","/service-worker.js");ge?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(t=>{t.unregister().then(()=>{window.location.reload()})}):ye(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ye(e,t)})}}()}},[[142,1,2]]]);
//# sourceMappingURL=main.7ff8f930.chunk.js.map