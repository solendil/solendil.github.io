(this.webpackJsonpfratcaljs=this.webpackJsonpfratcaljs||[]).push([[0],{127:function(t,e,a){t.exports=function(){return new Worker(a.p+"184f355f6bc47b7f0801.worker.js")}},143:function(t,e,a){t.exports=a(276)},148:function(t,e,a){},154:function(t,e,a){var r={"./burningbird.ts":155,"./burningship.ts":156,"./example.ts":157,"./mandelbrot.ts":158,"./mandelbrot3.ts":159,"./mandelbrot4.ts":160,"./tippetts.ts":161};function n(t){var e=s(t);return a(e)}function s(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=s,t.exports=n,n.id=154},155:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"burningbird",uiOrder:2.5,name:"Burning Bird",preset:{x:-.46,y:.07,w:3.26,iter:50},fn:{normal:(t,e,a)=>{var r,n=0,s=0,i=0,o=0,c=0;for(e=-e;r=(n+n)*s+e,n=i-o+t,s=Math.abs(r),!(++c>=a)&&!((i=n*n)+(o=s*s)>4););return c},smooth:(t,e,a)=>{var n,s,i=0,o=0,c=0,l=0,h=0;for(e=-e;s=(i+i)*o+e,i=c-l+t,o=Math.abs(s),!(++h>=a)&&!((c=i*i)+(l=o*o)>4););if(h===a)return h;for(n=0;n<4;++n)s=(i+i)*o+e,c=(i=c-l+t)*i,l=(o=Math.abs(s))*o;return 5+h-Math.log(Math.log(c+l))*r}}}},156:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"burningship",uiOrder:2,name:"Burning Ship",preset:{x:-.4,y:.55,w:3,iter:50},fn:{normal:(t,e,a)=>{var r,n,s=0,i=0,o=0,c=0,l=0;for(e=-e;n=(s+s)*i+e,r=o-c+t,s=Math.abs(r),i=Math.abs(n),!(++l>=a)&&!((o=s*s)+(c=i*i)>4););return l},smooth:(t,e,a)=>{var n,s,i,o=0,c=0,l=0,h=0,d=0;for(e=-e;i=(o+o)*c+e,s=l-h+t,o=Math.abs(s),c=Math.abs(i),!(++d>=a)&&!((l=o*o)+(h=c*c)>4););if(d===a)return d;for(n=0;n<4;++n)i=(o+o)*c+e,s=l-h+t,l=(o=Math.abs(s))*o,h=(c=Math.abs(i))*c;return 5+d-Math.log(Math.log(l+h))*r}}}},157:function(t,e,a){"use strict";a.r(e),e.default={fractalId:"example",hidden:!0,uiOrder:-1,name:"example",preset:{x:-.7,y:0,w:2.5,iter:50},fn:{normal:(t,e,a)=>0,smooth:(t,e,a)=>0}}},158:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(2);e.default={fractalId:"mandelbrot",uiOrder:0,name:"Mandelbrot",preset:{x:-.7,y:0,w:2.5,iter:50},fn:{normal:(t,e,a)=>{for(var r=0,n=0,s=0,i=0,o=0;o<a&&s+i<=4;++o)n=(r+r)*n+e,s=(r=s-i+t)*r,i=n*n;return o},smooth:(t,e,a)=>{for(var n=0,s=0,i=0,o=0,c=0,l=0;c<a&&i+o<=4;++c)s=(n+n)*s+e,i=(n=i-o+t)*n,o=s*s;if(c===a)return c;for(l=0;l<4;++l)s=(n+n)*s+e,i=(n=i-o+t)*n,o=s*s;return 5+c-Math.log(Math.log(i+o))*r}}}},159:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(4);e.default={fractalId:"mandelbrot3",uiOrder:3,name:"Multibrot *3",preset:{x:0,y:0,w:3,iter:50},fn:{normal:(t,e,a)=>{for(var r=0,n=0,s=0,i=0,o=0;r=s*r-3*r*i+t,n=3*s*n-i*n+e,!(++o>=a)&&!((s=r*r)+(i=n*n)>4););return o},smooth:(t,e,a)=>{for(var n,s,i=0,o=0,c=0,l=0,h=0;i=c*i-3*i*l+t,o=s=3*c*o-l*o+e,!(++h>=a)&&!((c=i*i)+(l=o*o)>4););if(h===a)return h;for(n=0;n<4;++n)s=3*c*o-l*o+e,c=(i=c*i-3*i*l+t)*i,l=(o=s)*o;return 5+h-Math.log(Math.log(c+l))*r}}}},160:function(t,e,a){"use strict";a.r(e);var r=1/Math.log(4);e.default={fractalId:"mandelbrot4",uiOrder:4,name:"Multibrot *4",preset:{x:0,y:0,w:3,iter:50},fn:{normal:(t,e,a)=>{for(var r,n=0,s=0,i=0,o=0,c=0;r=4*i*n*s-4*n*o*s+e,n=i*i-6*i*o+o*o+t,s=r,!(++c>=a)&&!((i=n*n)+(o=s*s)>4););return c},smooth:(t,e,a)=>{for(var n,s=0,i=0,o=0,c=0,l=0;n=4*o*s*i-4*s*c*i+e,s=o*o-6*o*c+c*c+t,i=n,!(++l>=a)&&!((o=s*s)+(c=i*i)>4););return l===a?l:5+l-Math.log(Math.log(o+c))*r}}}},161:function(t,e,a){"use strict";a.r(e);e.default={fractalId:"tippetts",uiOrder:1,name:"Tippetts",preset:{x:-.5,y:0,w:4,iter:50},fn:{normal:(t,e,a)=>{for(var r=0,n=0,s=0,i=0,o=0;o<a&&s+i<=4;++o)s=(r=s-i+t)*r,i=(n=(r+r)*n+e)*n;return o}}}},276:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),s=a(9),i=a.n(s),o=(a(148),a(11)),c=a(311),l=a(319),h=a(316),d=a(309),u=a(324),f=a(308),m=a(310),p=a(12),b=a.n(p),x=a(6),w=a(54),v=a(20);class g{constructor(){this.listeners=void 0,this.listeners={}}on(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}notify(t,e){setTimeout(()=>{const a=this.listeners[t]||[];e&&(e.evt=t),a.forEach(t=>{t(e)})},0)}}var y=a(50),E=a(127),k=a.n(E);class F{constructor(t,e){this.id=void 0,this.available=!0,this.worker=void 0,this.callback=void 0,this.id=t,this.worker=new k.a,this.worker.postMessage({action:"init",id:t}),this.worker.onmessage=this.onmessage.bind(this),this.callback=e}draw(t){const e=t.tile;0===e.buffer.length&&(e.buffer=new Float32Array(e.width*e.height)),this.available=!1,this.worker.postMessage(t,[e.buffer.buffer])}onmessage(t){const e=t.data;this.available=!0,this.callback(this,e)}}class M{constructor(t,e){this.orders=[],this.workers=[],this.upperCallback=void 0,this.batchId=1,this.handlers=void 0,this.upperCallback=e;for(let a=0;a<t.nbThreads;a+=1)this.workers.push(new F(a,this.callback.bind(this)))}callback(t,e){e.batchId===this.batchId&&this.upperCallback(e);const a=this.orders.shift();a?t.draw(a):this.workers.every(t=>t.available)&&this.handlers.resolve()}interrupt(){this.orders=[],this.handlers&&this.handlers.reject()}schedule(t){var e=this;return Object(v.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.batchId++,e.orders=t.map(t=>Object(x.a)({},t,{batchId:e.batchId})),e.workers.forEach(t=>{const a=e.orders.shift();a&&t.draw(a)}),a.abrupt("return",new Promise((t,a)=>{e.handlers={resolve:t,reject:a}}));case 4:case"end":return a.stop()}}),a)})))()}}class O{constructor(t){this.canvas=void 0,this.offCanvas=void 0,this.context=void 0,this.lastId=null,this.lastType=null,this.lastMatrix=null,this.canvas=t.canvas,this.context=t.context,this.offCanvas=document.createElement("canvas"),this.offCanvas.width=this.canvas.width,this.offCanvas.height=this.canvas.height}redraw(t,e,a){if(this.lastType!==e&&(this.lastMatrix=null),this.lastId===a)return;let r;if(this.lastMatrix){const e=this.lastMatrix.inverse().multiply(t).inverse(),a=this.context.getImageData(0,0,this.canvas.width,this.canvas.height);this.offCanvas.getContext("2d").putImageData(a,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform(e.a,e.b,e.c,e.d,e.e,e.f),this.context.drawImage(this.offCanvas,0,0),this.context.setTransform(1,0,0,1,0,0);const n=(e.c*e.f-e.d*e.e+e.e)/(e.a*e.d-e.a-e.b*e.c-e.d+1),s=(e.a*e.f-e.b*e.e-e.f)/(e.a*-e.d+e.a+e.b*e.c+e.d-1);e.a>1.001&&e.d>1.001?r={x:n,y:s,reverse:!1}:e.a<.99&&e.d<.99?r={x:n,y:s,reverse:!0}:(Math.abs(e.e)>.01||Math.abs(e.f)>.01)&&(r={x:this.canvas.width/2,y:this.canvas.height/2,reverse:!0},e.e<-.01&&(r.x=0),e.e>.01&&(r.x=this.canvas.width),e.f<-.01&&(r.y=0),e.f>.01&&(r.y=this.canvas.height))}else this.lastType=e;return this.lastId=a,this.lastMatrix=t,r}}const j=a(154),I={};j.keys().forEach(t=>{const e=j(t).default;I[e.fractalId]=e});const C=t=>{const e=I[t];return Object(x.a)({fractalId:t},e.preset)};class T{constructor(t,e,a){this.nbTiles=100,this.ctx=void 0,this.painter=void 0,this.scheduler=void 0,this.redrawer=void 0,this.width=void 0,this.height=void 0,this.imageData=void 0,this.imageBuffer=void 0,this.tiles=void 0,this.ctx=t,this.resize(),this.callback=this.callback.bind(this),this.scheduler=new M(t,this.callback),this.painter=e,this.redrawer=new O(t)}resize(){this.scheduler&&this.scheduler.interrupt();const t=this.ctx.canvas;this.imageData=this.ctx.context.createImageData(t.width,t.height),this.imageBuffer=new Uint32Array(this.imageData.data.buffer),this.width=t.width,this.height=t.height;const e=this.width/this.height,a=Math.round(Math.sqrt(this.nbTiles/e)),r=Math.round(Math.sqrt(this.nbTiles/e)*e);console.debug("Screen ".concat(this.width,"px * ").concat(this.height,"px (ratio ").concat(e.toFixed(2),"),")+" ".concat(r," * ").concat(a," = ").concat(a*r," tiles (").concat(this.nbTiles," asked)")+", each ~ ".concat(Math.round(t.width/r),"px * ").concat(Math.round(this.ctx.canvas.height/a),"px")),this.tiles=[];for(let n=0;n<a;n+=1)for(let e=0;e<r;e+=1){const s=this.tiles.length,i=Math.round(e*t.width/r),o=Math.round((e+1)*t.width/r)-1,c=Math.round(n*t.height/a),l=Math.round((n+1)*t.height/a)-1,h=(i+o)/2,d=(c+l)/2,u=o-i+1,f=l-c+1,m=new Float32Array(u*f),p=c*t.width+i;this.tiles.push({id:s,i:e,j:n,x1:i,x2:o,y1:c,y2:l,x:h,y:d,width:u,height:f,buffer:m,indexScreen:p})}}getIterationsAt(t){return((t,e)=>{const a=I[t];return e&&a.fn.smooth||a.fn.normal})(this.ctx.fractalId,this.ctx.smooth)(t.x,t.y,this.ctx.iter)}getHistogram(){const t=new Array(this.ctx.iter+1).fill(0);var e,a=Object(y.a)(this.tiles);try{for(a.s();!(e=a.n()).done;){const a=e.value;for(let e in a.buffer){const r=Math.round(a.buffer[e]);r>=0&&r<=this.ctx.iter&&(t[r]+=1)}}}catch(r){a.e(r)}finally{a.f()}return t}drawColor(){this.ctx.event.notify("draw.redraw",{}),this.tiles.forEach(t=>{this.painter.paint(t,this.imageBuffer,this.width)}),this.ctx.context.putImageData(this.imageData,0,0,0,0,this.width,this.height)}draw(t){this.ctx.event.notify("draw.start",{}),this.scheduler.interrupt();this.redrawer.redraw;let e;this.redrawer&&(e=this.redrawer.redraw(this.ctx.camera.matrix,this.ctx.fractalId,t.id||-1));const a=Object.assign({},this.ctx.camera.matrix,{type:this.ctx.fractalId,smooth:this.ctx.smooth,iter:this.ctx.iter}),r=this.tiles.map(e=>({action:"draw",tile:e,params:t,model:a}));return e&&(r.forEach(t=>{t.dist=Math.sqrt(Math.pow(t.tile.x-e.x,2)+Math.pow(t.tile.y-e.y,2))}),r.sort((t,a)=>e.reverse?a.dist-t.dist:t.dist-a.dist)),this.scheduler.schedule(r).catch(()=>{})}callback(t){if("end-draw"!==t.action)throw new Error;const e=t.tile;this.tiles[e.id].buffer=e.buffer,this.painter.paint(e,this.imageBuffer,this.width),this.ctx.context.putImageData(this.imageData,0,0,e.x1,e.y1,e.width,e.height)}}class S{constructor(t){this.id=0,this.offset=0,this.density=0,this.resolution=0,this.buffer=new Int32Array,this.set(t)}set(t){"offset"in t&&(this.offset=t.offset),"density"in t&&(this.density=t.density),"id"in t&&(this.id=t.id),"buffer"in t&&(this.buffer=t.buffer,this.resolution=this.buffer.length)}paint(t,e,a){var r,n,s,i,o=this.offset*this.resolution,c=this.density,l=this.resolution,h=this.buffer,d=0,u=0;for(n=0;n<t.height;n+=1)for(u=(n+t.y1)*a+t.x1,r=0;r<t.width;r+=1)i=0===(s=t.buffer[d])?4278190080:h[~~((s*c+o)%l)],e[u]=i,d+=1,u+=1}}class N{constructor(t,e){this.x=void 0,this.y=void 0,t instanceof N?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}midPoint(t){return new N((t.x+this.x)/2,(t.y+this.y)/2)}minus(t){return new N(this.x-t.x,this.y-t.y)}plus(t){return new N(this.x+t.x,this.y+t.y)}times(t){return t instanceof N?new N(this.x*t.x,this.y*t.y):new N(this.x*t,this.y*t)}minVal(){return Math.min(this.x,this.y)}}class D{constructor(t,e,a,r,n,s){this.a=t,this.b=e,this.c=a,this.d=r,this.e=n,this.f=s}transform(t){return new N(t.x*this.a+t.y*this.c+this.e,t.x*this.b+t.y*this.d+this.f)}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f}isInvertible(){const t=this.a*this.d-this.b*this.c;return Math.abs(t)>1e-15}inverse(){if(!this.isInvertible())return this.inverseGaussJordan();const t=this.a*this.d-this.b*this.c;return new D(this.d/t,-this.b/t,-this.c/t,this.a/t,(this.c*this.f-this.d*this.e)/t,-(this.a*this.f-this.b*this.e)/t)}multiply(t){return new D(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}inverseGaussJordan(){function t(t,e,a,r){const n=t[e],s=t[a];for(let i=0;i<6;i++)n[i]+=s[i]*r}function e(t,e,a){const r=t[e];for(let n=0;n<6;n++)r[n]*=a}const a=[[this.a,this.c,this.e,1,0,0],[this.b,this.d,this.f,0,1,0],[0,0,1,0,0,1]];return t(a,1,2,-a[1][2]),t(a,0,2,-a[0][2]),t(a,1,0,-a[1][0]/a[0][0]),t(a,0,1,-a[0][1]/a[1][1]),e(a,0,1/a[0][0]),e(a,1,1/a[1][1]),new D(a[0][3],a[1][3],a[0][4],a[1][4],a[0][5],a[1][5])}toString(){return"".concat(this.a," ").concat(this.c," ").concat(this.e,"\n").concat(this.b," ").concat(this.d," ").concat(this.f,"\n0 0 1")}static GetTriangleToTriangle(t,e,a,r,n,s,i,o,c,l,h,d){const u=new D(t-n,e-s,a-n,r-s,n,s),f=new D(i-h,o-d,c-h,l-d,h,d),m=u.inverse();return f.multiply(m)}static GetRotationMatrix(t){const e=Math.cos(t),a=Math.sin(t);return new D(e,a,-a,e,0,0)}static GetScaleMatrix(t,e){return new D(t,0,0,e,0,0)}static GetShearMatrix(t,e){return new D(1,e,t,1,0,0)}}D.identity=new D(1,0,0,1,0,0);class A{constructor(t,e,a,r=D.identity){this.matrix_inv=void 0,this.matrix=void 0,this.affineMatrix=void 0,this.screen=void 0,this.resolutionLimit=void 0,this.pos=void 0,this.w=void 0,this.affineMatrix=r,this.screen=t;const n=t.minVal();this.resolutionLimit=111e-17*n,this.pos=e,this.w=a,this.matrix=D.identity,this.matrix_inv=D.identity,this.reproject()}reproject(){this.w=Math.max(this.w,this.resolutionLimit);const t=((t,e,a)=>{const r=t.transform(new N(1,-1)),n=t.transform(new N(-1,1)),s=t.transform(new N(-1,-1));if(e>=a){const t=(e-a)/2,i=t+a;return D.GetTriangleToTriangle(i,a,t,0,t,a,r.x,r.y,n.x,n.y,s.x,s.y)}{const t=(a-e)/2,i=t+e;return D.GetTriangleToTriangle(e,i,0,t,0,i,r.x,r.y,n.x,n.y,s.x,s.y)}})(this.affineMatrix,this.screen.x,this.screen.y),e=(a=this.pos.x,r=this.pos.y,n=this.w,D.GetTriangleToTriangle(1,0,0,1,0,0,a+n/2,r,a,r+n/2,a,r));var a,r,n;this.matrix=e.multiply(t),this.matrix_inv=this.matrix.inverse()}affineTransform(t,e,a){let r=D.identity;switch(t){case"rotation":r=D.GetRotationMatrix(e);break;case"shear":r=D.GetShearMatrix(e,a);break;case"scale":r=D.GetScaleMatrix(e,a)}this.affineMatrix=this.affineMatrix.multiply(r),this.reproject()}affineReset(){this.affineMatrix=D.identity,this.reproject()}clone(){return new A(this.screen,this.pos,this.w,this.affineMatrix)}scr2cpx(t){return this.matrix.transform(t)}cpx2scr(t){return this.matrix_inv.transform(t)}getPos(){return this.pos}setPos(t,e){this.pos=t,e&&(this.w=e),this.reproject()}resize(t,e){this.screen=new N(t,e);const a=Math.min(t,e);this.resolutionLimit=111e-17*a,this.reproject()}isZoomLimit(){return this.w<=this.resolutionLimit}}class L{constructor(t){this.ctx=void 0,this.renderer=void 0,this.painter=void 0;let e=navigator.hardwareConcurrency||4;e>=6&&e--,this.ctx={canvas:t.canvas,context:t.canvas.getContext("2d"),nbThreads:e,event:new g,camera:new A(new N(t.canvas.width,t.canvas.height),new N(t.x,t.y),t.w,t.viewport),smooth:t.smooth,iter:t.iter,fractalId:t.fractalId,colors:t.colors},this.painter=new S(t.colors),this.renderer=new T(this.ctx,this.painter,this)}get canvas(){return this.ctx.canvas}set(t){"fractalId"in t&&(this.ctx.fractalId=t.fractalId),"smooth"in t&&(this.ctx.smooth=t.smooth),"iter"in t&&(this.ctx.iter=t.iter),"x"in t&&this.ctx.camera.setPos(new N(t.x,t.y),t.w),"colors"in t&&(this.ctx.colors=Object(x.a)({},this.ctx.colors,{},t.colors),this.painter.set(t.colors))}draw(t){var e=this;return Object(v.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t||(t={details:"normal"}),a.abrupt("return",e.renderer.draw(t));case 2:case"end":return a.stop()}}),a)})))()}drawColor(){this.renderer.drawColor()}resize(t,e){this.ctx.camera.resize(t,e),this.renderer.resize()}getHistogram(){return this.renderer.getHistogram()}getIterationsAt(t){return this.renderer.getIterationsAt(t)}}var R=a(28);const z=Object(R.b)({name:"set",initialState:{fractalId:"mandelbrot",smooth:!0,x:0,y:0,w:0,iter:0},reducers:{setSet:(t,e)=>e.payload,updateSet:(t,e)=>Object(x.a)({},t,{},e.payload)}}),B=z.reducer,P=z.actions,W=P.setSet,G=P.updateSet;var U=a(97),_=a.n(U);const H={left:37,up:38,right:39,down:40,"+":107,"-":109,esc:27,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},J=[],K=[];document.addEventListener("keyup",t=>{J[t.keyCode]=!1}),document.addEventListener("keydown",t=>{J[t.keyCode]=!0;const e=t.shiftKey?.1:1;var a,r=Object(y.a)(K);try{for(r.s();!(a=r.n()).done;){const t=a.value;if(t.combo.every(t=>J[t]))return void t.func(e)}}catch(n){r.e(n)}finally{r.f()}});const V=(t,e)=>{const a=t.split(" "),r=[];var n,s=Object(y.a)(a);try{for(s.s();!(n=s.n()).done;){const t=n.value;if(!(t in H))throw new Error("Unknown key".concat(t));r.push(H[t])}}catch(i){s.e(i)}finally{s.f()}K.push({combo:r,func:e}),K.sort((t,e)=>e.combo.length-t.combo.length)},Y=Math.PI/18;class X{constructor(t,e){this.dispatch=e,this.engine=void 0,this.camera=void 0,this.engine=t,this.camera=t.ctx.camera,this.setupKeyboard(),this.setupMouse(),this.setupTouch()}pan(t){const e=this.camera,a=e.screen.times(t),r=e.scr2cpx(new N(0,0)),n=e.scr2cpx(a),s=r.minus(n),i=e.getPos().plus(s);this.dispatch(Ct(i))}affineTransform(t,e,a){this.camera.affineTransform(t,e,a),this.engine.draw()}affineReset(){this.camera.affineReset(),this.engine.draw()}zoom(t,e){const a=this.camera;if(t<1&&a.isZoomLimit())return void this.engine.ctx.event.notify("zoom.limit");const r=e||a.screen.times(.5),n=a.scr2cpx(r),s=a.getPos().minus(n),i=n.plus(s.times(t));this.dispatch(Ct(i,a.w*t))}setupKeyboard(){V("up",t=>this.pan(new N(0,.1*t))),V("down",t=>this.pan(new N(0,-.1*t))),V("right",t=>this.pan(new N(-.1*t,0))),V("left",t=>this.pan(new N(.1*t,0))),V("+",t=>this.zoom(1/(1+.3*t))),V("-",t=>this.zoom(1+.3*t)),V("V",()=>this.affineReset()),V("R left",t=>this.affineTransform("rotation",-Y*t)),V("R right",t=>this.affineTransform("rotation",+Y*t)),V("S right",t=>this.affineTransform("scale",1/(1+.1*t),1)),V("S left",t=>this.affineTransform("scale",1+.1*t,1)),V("S up",t=>this.affineTransform("scale",1,1/(1+.1*t))),V("S down",t=>this.affineTransform("scale",1,1+.1*t)),V("H right",t=>this.affineTransform("shear",-.1*t,0)),V("H left",t=>this.affineTransform("shear",.1*t,0)),V("H up",t=>this.affineTransform("shear",0,-.1*t)),V("H down",t=>this.affineTransform("shear",0,.1*t))}setupTouch(){var t=new _.a(this.engine.canvas,{});let e,a,r=!1;t.get("pan").set({direction:_.a.DIRECTION_ALL,threshold:1}),t.get("pinch").set({enable:!0}),t.on("panstart",t=>{r=!0,e=new N(t.center.x,t.center.y),a=this.camera.clone()}),t.on("panend",t=>{r=!1}),t.on("panmove",t=>{if(r){const r=new N(t.center.x,t.center.y).minus(e),n=a.scr2cpx(new N(0,0)),s=a.scr2cpx(r).minus(n),i=a.getPos().minus(s);this.dispatch(Ct(i))}});var n=!1;let s;t.on("pinchstart",t=>{console.log("pinchstart"),n=!0,s=new N(t.center.x,t.center.y),a=this.camera.clone()}),t.on("pinchend",(function(t){console.log("pinchend"),n=!1})),t.on("pinch",t=>{if(n){var e=a.scr2cpx(s),r=a.scr2cpx(new N(t.center.x,t.center.y)),i=D.GetTriangleToTriangle(e.x,e.y,e.x+1,e.y,e.x,e.y+1,r.x,r.y,r.x+t.scale,r.y,r.x,r.y+t.scale),o=i.inverse().transform(a.pos);let n=a.w/i.a;n<this.camera.resolutionLimit&&(this.engine.ctx.event.notify("zoom.limit"),n=this.camera.resolutionLimit),this.dispatch(Ct(o,n))}})}setupMouse(){this.engine.canvas.addEventListener("wheel",t=>{const e=t||window.event;e.preventDefault();const a=e.shiftKey?.1:1;let r=e.deltaY;r=r>0?1+.3*a:1/(1+.3*a);const n=new N(e.offsetX,e.offsetY);this.zoom(r,n)})}}a(128);function q(t,e,a){const r=t,n=r.draw.bind(r);let s=0,i="";const o=t=>new Promise(e=>setTimeout(()=>e(),t)),c=t=>{const e=r.ctx.iter,a=t.reduce((t,e)=>t+e,0),n=t[0];let s=Number.MAX_VALUE,i=-1;for(let r=1;r<t.length;r+=1)0!==t[r]&&(i=r,s=Math.min(r,s));const o=i-s;let c=0;for(let r=e-Math.ceil(o/10);r<t.length;r+=1)c+=t[r];const l=100*n/a,h=100*c/n,d={shouldIncrease:!1,shouldDecrease:!1};return l>1&&h>1?d.shouldIncrease=!0:l>1&&h>1&&(d.shouldDecrease=!0),d};r.draw=Object(v.a)(b.a.mark((function t(){var a,l,h,d,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s+=1,a=s,(l=r.ctx.fractalId+r.ctx.smooth)===i){t.next=8;break}return t.next=6,n({details:"subsampling",size:4});case 6:if(s===a){t.next=8;break}return t.abrupt("return");case 8:i=l,h={};case 10:return t.next=12,n({details:"normal",id:a});case 12:if(s===a){t.next=14;break}return t.abrupt("return");case 14:d=r.getHistogram(),(h=c(d)).shouldIncrease&&(u=r.ctx.iter,e(G({iter:1.5*u})),r.ctx.iter=Math.round(1.5*u));case 17:if(h.shouldIncrease){t.next=10;break}case 18:return t.next=20,o(1e3);case 20:if(s===a){t.next=22;break}return t.abrupt("return");case 22:return t.next=24,n({details:"supersampling",size:4,id:a});case 24:case"end":return t.stop()}}),t)})))}const Z=Object(R.b)({name:"colors",initialState:{offset:0,id:0,density:20,densitySlidebar:100},reducers:{setColorId:(t,e)=>Object(x.a)({},t,{id:e.payload}),setOffset:(t,e)=>Object(x.a)({},t,{offset:e.payload}),setDensity:(t,e)=>Object(x.a)({},t,{density:e.payload})}}),Q=Z.reducer,$=Z.actions,tt=$.setOffset,et=$.setColorId,at=$.setDensity;var rt=a(98),nt=a.n(rt);const st={0:"0#080560;0.2#2969CB;0.40#F1FEFE;0.60#FCA425;0.85#000000",1:"0.0775#78591e;0.55#d6e341",2:"0#0000FF;0.33#FFFFFF;0.66#FF0000",3:"0.08#09353e;0.44#1fc3e6;0.77#08173e",4:"0#000085;0.25#fffff5;0.5#ffb500;0.75#9c0000",5:"0#000000;0.25#000000;0.5#7f7f7f;0.75#ffffff;0.975#ffffff",10:"0#000000;0.25#16A085;0.5#FFFFFF;0.75#16A085",11:"0#000000;0.25#27AE60;0.5#FFFFFF;0.75#27AE60",12:"0#000000;0.25#2980B9;0.5#FFFFFF;0.75#2980B9",13:"0#000000;0.25#8E44AD;0.5#FFFFFF;0.75#8E44AD",14:"0#000000;0.25#2C3E50;0.5#FFFFFF;0.75#2C3E50",15:"0#000000;0.25#F39C12;0.5#FFFFFF;0.75#F39C12",16:"0#000000;0.25#D35400;0.5#FFFFFF;0.75#D35400",17:"0#000000;0.25#C0392B;0.5#FFFFFF;0.75#C0392B",18:"0#000000;0.25#BDC3C7;0.5#FFFFFF;0.75#BDC3C7",19:"0#000000;0.25#7F8C8D;0.5#FFFFFF;0.75#7F8C8D"};function it(t,e){let a,r=t.length;if(r!==e.length)throw new Error("Need an equal count of xs and ys.");if(0===r)return function(t){return 0};if(1===r){const t=+e[0];return function(e){return t}}const n=[];for(a=0;a<r;a++)n.push(a);n.sort((e,a)=>t[e]<t[a]?-1:1);let s=t,i=e;for(t=[],e=[],a=0;a<r;a++)t.push(+s[n[a]]),e.push(+i[n[a]]);let o=[],c=[],l=[];for(a=0;a<r-1;a++){let r=t[a+1]-t[a],n=e[a+1]-e[a];c.push(r),o.push(n),l.push(n/r)}const h=[l[0]];for(a=0;a<c.length-1;a++){let t=l[a],e=l[a+1];if(t*e<=0)h.push(0);else{let r=c[a],n=c[a+1],s=r+n;h.push(3*s/((s+n)/t+(s+r)/e))}}h.push(l[l.length-1]);let d=[],u=[];for(a=0;a<h.length-1;a++){let t=h[a],e=l[a],r=1/c[a],n=t+h[a+1]-e-e;d.push((e-t-n)*r),u.push(n*r*r)}return function(a){let r=t.length-1;if(a===t[r])return e[r];let n,s=0,i=u.length-1;for(;s<=i;){n=Math.floor(.5*(s+i));const r=t[n];if(r<a)s=n+1;else{if(!(r>a))return e[n];i=n-1}}r=Math.max(0,i);let o=a-t[r],c=o*o;return e[r]+h[r]*o+d[r]*c+u[r]*o*c}}const ot=(t,e=400)=>((t,e)=>{const a=[],r=[],n=[],s=[],i=new Int32Array(t);return e.split(";").forEach(t=>{const e=t.split("#");a.push(Number(e[0])),r.push(parseInt(e[1].substring(0,2),16)),n.push(parseInt(e[1].substring(2,4),16)),s.push(parseInt(e[1].substring(4,6),16))}),(()=>{a.push(a[0]+1),r.push(r[0]),n.push(n[0]),s.push(s[0]);const e=it(a,r),o=it(a,n),c=it(a,s),l=new Uint8Array(i.buffer);let h=0;for(let r=0;r<t;r+=1){let n=r/t;n<a[0]&&(n+=1),l[h+0]=e(n),l[h+1]=o(n),l[h+2]=c(n),l[h+3]=255,h+=4}})(),i})(e,st[t]),ct=t=>{const e=t.ctx.camera,a=t.ctx.colors;try{const r=[];if(r.push(["t",t.ctx.fractalId]),r.push(["x",e.pos.x]),r.push(["y",e.pos.y]),r.push(["w",e.w]),r.push(["i",t.ctx.iter]),r.push(["fs",t.ctx.smooth?1:0]),a){if(void 0===a.id)throw new Error;r.push(["ct",a.id]),r.push(["co",Math.round(100*a.offset)]),r.push(["cd",+a.density.toFixed(2)])}e.affineMatrix.isIdentity()||(r.push(["va",e.affineMatrix.a.toFixed(4)]),r.push(["vb",e.affineMatrix.b.toFixed(4)]),r.push(["vc",e.affineMatrix.c.toFixed(4)]),r.push(["vd",e.affineMatrix.d.toFixed(4)]));const n=r.reduce((t,e)=>"".concat(t,"&").concat(e[0],"_").concat(e[1]),"");window.history.replaceState("","","#B".concat(n.substr(1)))}catch(r){console.error("Could not set URL",r)}};const lt=()=>{try{const t=document.location.hash;if(t.startsWith("#B"))return function(t){const e=t.substr(2).split("&").reduce((t,e)=>{const a=e.split("_");return Object.assign(t,{[a[0]]:a[1]})},{}),a={x:parseFloat(e.x),y:parseFloat(e.y),w:parseFloat(e.w),iter:parseInt(e.i,10),fractalId:e.t,smooth:1===parseInt(e.fs,10),viewport:D.identity};return"va"in e&&(a.viewport=new D(parseFloat(e.va),parseFloat(e.vb),parseFloat(e.vc),parseFloat(e.vd),0,0)),{desc:a,color:{offset:parseInt(e.co,10)/100,density:parseFloat(e.cd),id:parseInt(e.ct,10)}}}(t)}catch(t){console.error("Could not read URL",t)}return null},ht=(t,e=!1)=>{const a=lt();if(!a||e){let e=Object(x.a)({},C("mandelbrot"),{smooth:!0}),a={offset:0,density:20,buffer:ot(0,1e3),id:0};return t(W(nt()(e,"viewport"))),t(tt(0)),t(at(20)),Object(x.a)({},e,{colors:a})}{const e=a.desc,r=a.color;return t(W(nt()(a.desc,"viewport"))),t(tt(r.offset)),t(at(r.density)),Object(x.a)({},e,{colors:Object(x.a)({},r,{buffer:ot(r.id,1e3)})})}};var dt=a(51),ut=a.n(dt),ft=a(52),mt=a.n(ft);const pt=Object(R.b)({name:"ui",initialState:{drawer:!1,mouseOnCanvas:!1,tab:"fractal",infobox:!1,mouse:{x:0,y:0,iter:0},narrowDevice:!1,orientableDevice:!1},reducers:{setDrawer:(t,e)=>Object(x.a)({},t,{drawer:e.payload}),setTab:(t,e)=>Object(x.a)({},t,{tab:e.payload}),setInfobox:(t,e)=>Object(x.a)({},t,{infobox:e.payload}),setMouseOnCanvas:(t,e)=>Object(x.a)({},t,{mouseOnCanvas:e.payload}),setMouseInfo:(t,e)=>Object(x.a)({},t,{mouse:e.payload}),setNarrowDevice:(t,e)=>Object(x.a)({},t,{narrowDevice:e.payload}),setSnack:(t,e)=>Object(x.a)({},t,{snack:e.payload})}}),bt=pt.reducer,xt=pt.actions,wt=xt.setDrawer,vt=xt.setTab,gt=xt.setInfobox,yt=xt.setMouseOnCanvas,Et=xt.setMouseInfo,kt=xt.setSnack,Ft=xt.setNarrowDevice;let Mt;const Ot=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,r){var n,s,i,o,c,l,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V("I",()=>a(gt(!r().ui.infobox))),V("esc",()=>a(wt(!r().ui.drawer))),V("D",()=>{a(wt(!0)),a(vt("debug"))}),s=(n=()=>[window.innerWidth,window.innerHeight])(),i=Object(w.a)(s,2),t.width=i[0],t.height=i[1],window.addEventListener("resize",()=>{var e=n(),a=Object(w.a)(e,2);t.width=a[0],t.height=a[1],Mt.resize(t.width,t.height),Mt.draw()}),o=t=>a(Ft(t.matches)),c=window.matchMedia("(max-width: 450px)"),o(c),c.addListener(o),window.addEventListener("error",mt()(()=>{console.error("error caught, resetting engine");const t=ht(a,!0);Mt.set(Object(x.a)({},t)),Mt.draw()},200)),t.addEventListener("mouseenter",()=>{a(yt(!0))}),t.addEventListener("mouseleave",()=>{a(yt(!1))}),t.addEventListener("mousemove",ut()(t=>{const e=Mt.ctx.camera.scr2cpx(new N(t.offsetX,t.offsetY)),r=Mt.getIterationsAt(e);a(Et({x:e.x,y:e.y,iter:r}))},50)),l=ht(a),Mt=new L(Object(x.a)({},l,{canvas:t})),h=mt()(()=>{ct(Mt)},250),Mt.ctx.event.on("draw.start",h),Mt.ctx.event.on("draw.redraw",h),Mt.ctx.event.on("zoom.limit",()=>{a(kt("Sorry, FractalJS cannot zoom further..."))}),Mt.ctx.event.on("zoom.limit",mt()(()=>{a(kt(void 0))},5e3)),new X(Mt,a),q(Mt,a),Mt.draw();case 27:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),jt=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t),a(G(n)),Mt.ctx.camera.affineReset(),Mt.set({colors:{density:20}}),Mt.set(n),Mt.draw();case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),It=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(G({smooth:t})),Mt.set({smooth:t}),Mt.draw();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ct=(t,e)=>function(){var a=Object(v.a)(b.a.mark((function a(r){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e?(r(G({x:t.x,y:t.y})),Mt.ctx.camera.setPos(t)):(r(G({x:t.x,y:t.y,w:e})),Mt.ctx.camera.setPos(t,e)),Mt.draw();case 2:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),Tt=t=>function(){var e=Object(v.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(tt(t)),Mt.set({colors:{offset:t}}),Mt.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),St=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(at(t)),Mt.set({colors:{density:r().colors.density}}),Mt.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Nt=t=>function(){var e=Object(v.a)(b.a.mark((function e(a,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(et(t)),Mt.set({colors:{id:t,buffer:ot(t,1e3)}}),Mt.drawColor();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var Dt=function(){const t=Object(o.b)(),e=Object(o.c)(t=>t.set.fractalId),a=Object.values(I).filter(t=>!t.hidden).sort((t,e)=>(t.uiOrder||0)-(e.uiOrder||0)).map(a=>n.a.createElement(u.a,{key:a.fractalId,button:!0,onClick:()=>t(jt(a.fractalId)),selected:e===a.fractalId},n.a.createElement(f.a,{primary:a.name})));return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav",subheader:n.a.createElement(m.a,{component:"div"},"Pick a fractal set")},a))},At=a(326),Lt=a(74);const Rt=Math.pow(400,.01),zt=(()=>{const t=[],e=document.createElement("canvas"),a=e.getContext("2d");e.width=100,e.height=50;const r=a.createImageData(e.width,e.height),n=new Uint32Array(r.data.buffer);return[0,2,3,4,5,10,11,12,13,14,15,16,17,18,19].forEach(s=>{const i=ot(s,100);for(let t=0;t<100;t+=1)for(let e=0;e<50;e+=1)n[100*e+t]=i[Math.round(.6*t+.6*e)%100];a.putImageData(r,0,0,0,0,e.width,e.height);const o=e.toDataURL("image/png");t.push({id:s,dataURL:o})}),t})(),Bt=Object(c.a)(t=>({swatches:{display:"flex",flexWrap:"wrap",marginRight:-t.spacing(1),"& > *":{paddingBottom:t.spacing(1),paddingRight:t.spacing(1),width:"20%",height:"56px",position:"relative","& > img":{width:"100%",height:"100%",borderRadius:"4px"},"& > i":{position:"absolute",bottom:0,right:0,color:"white",fontSize:"36px",padding:"0px",textShadow:"2px 2px 2px #888"}}},txt:{width:"100px"}}));var Pt=function(){const t=Bt(),e=Object(o.b)(),a=Object(o.c)(t=>t.colors),r=zt.map(t=>n.a.createElement("div",{key:t.id,onClick:()=>e(Nt(t.id))},n.a.createElement("img",{alt:"",src:t.dataURL}),a.id===t.id?n.a.createElement("i",{className:"material-icons"},"check_circle"):null)),s=Math.log(20*a.density)/Math.log(Rt);return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav",dense:!0},n.a.createElement(m.a,{component:"div"},"Pick & adjust a color palette"),n.a.createElement(u.a,null,n.a.createElement("div",{className:t.swatches},r)),n.a.createElement(u.a,null,n.a.createElement(Lt.a,{className:t.txt},"Move"),n.a.createElement(At.a,{min:0,max:1,step:.001,value:a.offset,onChange:ut()((t,a)=>e(Tt(a)),100)})),n.a.createElement(u.a,null,n.a.createElement(Lt.a,{className:t.txt},"Stretch"),n.a.createElement(At.a,{min:0,max:100,step:1,value:s,onChange:ut()((t,a)=>{return e(St((r=a,.05*Math.pow(Rt,r))));var r},100)}))))},Wt=a(312),Gt=a(323);var Ut=function(){const t=Object(o.b)(),e=Object(o.c)(t=>t.set.smooth),a=Object(o.c)(t=>t.ui);return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav",subheader:n.a.createElement(m.a,{component:"div"},"Advanced settings")},n.a.createElement(u.a,null,n.a.createElement(f.a,{primary:"Smooth rendering"}),n.a.createElement(Wt.a,null,n.a.createElement(Gt.a,{edge:"end",onChange:e=>{t(It(e.target.checked))},checked:e,color:"primary"}))),a.narrowDevice?null:n.a.createElement(u.a,null,n.a.createElement(f.a,{primary:"Information box"}),n.a.createElement(Wt.a,null,n.a.createElement(Gt.a,{edge:"end",onChange:e=>{t(gt(e.target.checked))},checked:a.infobox,color:"primary"})))))},_t=a(325),Ht=a(314),Jt=a(322),Kt=a(315),Vt=a(132);const Yt=Object(c.a)(t=>Object(_t.a)({avatar:{backgroundColor:t.palette.primary.main},inline:{display:"inline"},key:{display:"inline-block",verticalAlign:"middle",border:"1px solid #888",background:"#EEE",borderRadius:"4px",padding:"1px 4px",margin:"2px 0px",fontSize:"13px",minWidth:"1.8em",textAlign:"center",color:"black"}})),Xt=()=>{const t=Yt();return n.a.createElement("small",null,n.a.createElement("span",{className:t.key},"\u2190")," ",n.a.createElement("span",{className:t.key},"\u2191")," ",n.a.createElement("span",{className:t.key},"\u2192")," ",n.a.createElement("span",{className:t.key},"\u2193")," ,"," ",n.a.createElement("span",{className:t.key},"+")," ",n.a.createElement("span",{className:t.key},"-"),n.a.createElement("br",null),"(+ ",n.a.createElement("span",{className:t.key},"S")," ",n.a.createElement("span",{className:t.key},"H")," ",n.a.createElement("span",{className:t.key},"R"),","," ",n.a.createElement("span",{className:t.key},"V")," )",n.a.createElement("br",null),"(+ ",n.a.createElement("span",{className:t.key},"shift")," )")},qt=()=>{const t=Yt();return n.a.createElement(Lt.a,{component:"span",variant:"body1",className:t.inline,color:"textPrimary"},"FractalJS is open-source. You can report bugs, or add you favorite fractal set by heading to"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/solendil/fractaljs/"},"GitHub"),".")};function Zt(){const t=Yt();return n.a.createElement(n.a.Fragment,null,n.a.createElement(d.a,{component:"nav",style:{maxWidth:"360px"}},n.a.createElement(m.a,{component:"div"},"Controls"),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?n.a.createElement(u.a,null,n.a.createElement(Ht.a,null,n.a.createElement(Jt.a,{className:t.avatar},n.a.createElement("i",{className:"material-icons"},"touch_app"))),n.a.createElement(f.a,{primary:"Touch",secondary:"Swipe & Pinch to zoom"})):null,matchMedia("(pointer:fine)").matches||matchMedia("(hover:hover)").matches?n.a.createElement(u.a,null,n.a.createElement(Ht.a,null,n.a.createElement(Jt.a,{className:t.avatar},n.a.createElement("i",{className:"material-icons"},"mouse"))),n.a.createElement(f.a,{primary:"Mouse",secondary:"Drag & wheel zoom"})):null,"undefined"===typeof window.orientation&&-1===navigator.userAgent.indexOf("IEMobile")?n.a.createElement(u.a,null,n.a.createElement(Ht.a,null,n.a.createElement(Jt.a,{className:t.avatar},n.a.createElement("i",{className:"material-icons"},"keyboard"))),n.a.createElement(f.a,{primary:"Keyboard",secondary:n.a.createElement(Xt,null)})):null,n.a.createElement(Kt.a,null),n.a.createElement(m.a,{component:"div"},"About"),n.a.createElement(u.a,null,n.a.createElement(qt,null)),n.a.createElement(u.a,null,n.a.createElement(Vt.a,{href:"https://github.com/solendil/fractaljs","data-color-scheme":"no-preference: light; light: light; dark: light;","data-size":"large","data-show-count":!0,"aria-label":"Star solendil/fractaljs on GitHub"},"Star")," ")))}function Qt(){const t=Mt,e=t.ctx.camera;return n.a.createElement("div",null,n.a.createElement(d.a,{component:"nav"},n.a.createElement(m.a,{component:"div"},"Debug"),n.a.createElement(u.a,null,"Threads: ",t.ctx.nbThreads),n.a.createElement(u.a,null,"Screen: ",e.screen.x," * ",e.screen.y)))}var $t=a(133),te=a.n($t),ee=a(313),ae=a(134);var re=t=>{const e=navigator;return e.share?n.a.createElement(ee.a,{className:t.className,onClick:()=>{e.share({title:"FractalJS",text:"Check out this fractal picture !",url:window.location.href})}},n.a.createElement("i",{className:"material-icons"},"share")):null};const ne=Object(c.a)(t=>({bar:{backgroundColor:Object(ae.fade)(t.palette.primary.main,.8),backdropFilter:"blur(8px)",position:"fixed",display:"flex",[t.breakpoints.only("xs")]:{width:"100%",height:"56px",bottom:0},[t.breakpoints.up("sm")]:{height:"100%",flexDirection:"column",left:0,flexWrap:"wrap-reverse"}},icons:{color:"white",[t.breakpoints.only("xs")]:{width:"64px"},[t.breakpoints.up("sm")]:{width:"56px"}},brand:{[t.breakpoints.only("xs")]:{display:"none"},color:"white",fontSize:"20px",lineHeight:"56px",writingMode:"vertical-rl",transform:"rotate(180deg)",fontFamily:"roboto",paddingBottom:"56px",paddingTop:"0.5em",letterSpacing:"3px",fontWeight:500,flexGrow:1,textDecoration:"none"}}));var se=()=>{const t=ne(),e=Object(o.b)(),a=te()(ie,(a,r)=>a.hidden?null:n.a.createElement(ee.a,{key:r,className:t.icons,onClick:()=>{e(vt(r)),e(wt(!0))}},n.a.createElement("i",{className:"material-icons"},a.icon))).filter(Boolean);return a.push(n.a.createElement("a",{href:"https://github.com/solendil/FractalJS",target:"_",className:t.brand,key:"brand"},"FractalJS")),a.splice(2,0,n.a.createElement(re,{key:"share",className:t.icons})),n.a.createElement("div",{className:t.bar},a)};const ie={fractal:{icon:"home",component:n.a.createElement(Dt,null)},palette:{icon:"invert_colors",component:n.a.createElement(Pt,null)},settings:{icon:"settings",component:n.a.createElement(Ut,null)},about:{icon:"info_outline",component:n.a.createElement(Zt,null)},debug:{hidden:!0,component:n.a.createElement(Qt,null)}},oe=Object(c.a)(t=>({appBar:{top:"auto",bottom:0},drawer:{minWidth:"360px",[t.breakpoints.up("sm")]:{width:"360px"}},trans:{[t.breakpoints.only("xs")]:{borderTopLeftRadius:"10px",borderTopRightRadius:"10px"}},handle:{width:"33%",margin:"4px auto -2px auto",height:"4px"}}));var ce=()=>{const t=oe(),e=Object(o.b)(),a=Object(o.c)(t=>({drawer:t.ui.drawer,tab:t.ui.tab})),r=a.drawer,s=a.tab,i=Object(h.a)("(min-width:450px)"),c=ie[s||"fractal"].component;return n.a.createElement(n.a.Fragment,null,n.a.createElement(se,null),n.a.createElement(l.a,{anchor:i?"left":"bottom",open:r,disableDiscovery:!0,disableSwipeToOpen:!0,PaperProps:{className:t.trans},BackdropProps:{invisible:!0},onClose:()=>e(wt(!1)),onOpen:()=>e(wt(!0))},n.a.createElement("div",{className:t.drawer},i?null:n.a.createElement(Kt.a,{className:t.handle}),c)))},le=a(317),he=a(320);const de=Object(c.a)(t=>({box:{position:"fixed",bottom:0,right:0,margin:"16px",background:"white",padding:"16px"}}));var ue=function(){const t=de(),e=Object(o.c)(t=>t.set),a=Object(o.c)(t=>t.ui);if(a.narrowDevice)return null;if(!a.infobox)return null;const r={};return a.mouseOnCanvas?(r.x=a.mouse.x,r.y=a.mouse.y,r.iter=a.mouse.iter,r.w=e.w):(r.x=e.x,r.y=e.y,r.iter=e.iter,r.w=e.w),n.a.createElement(le.a,{elevation:3,className:t.box},n.a.createElement(Lt.a,{color:"primary",gutterBottom:!0,variant:"h6"},a.mouseOnCanvas?"Mouse":"Screen"),n.a.createElement(Lt.a,{component:"div"},n.a.createElement(he.a,{fontFamily:"Monospace"},"X: ",r.x.toFixed(16)),n.a.createElement(he.a,{fontFamily:"Monospace"},"Y: ",r.y.toFixed(16)),n.a.createElement(he.a,{fontFamily:"Monospace"},"iterations: ",r.iter.toFixed(2)),n.a.createElement(he.a,{fontFamily:"Monospace"},"extent: ",r.w.toExponential(2))))},fe=a(321);const me=Object(c.a)(t=>({snackbar:{[t.breakpoints.only("xs")]:{bottom:64}}}));var pe=()=>{const t=Object(o.c)(t=>t.ui),e=me();return t.snack?n.a.createElement(fe.a,{open:!0,className:e.snackbar,message:"Sorry, FractalJS cannot zoom further..."}):null};var be=()=>{const t=Object(o.b)(),e=Object(r.useRef)(null),a=Object(o.c)(t=>t.ui),s=Object(h.a)("(min-width:450px)");n.a.useEffect(()=>{const a=e.current;t(Ot(a))},[t]);let i="";return a.drawer&&(i=s?"offset-left":"offset-top-".concat(a.tab)),n.a.createElement("div",null,n.a.createElement("canvas",{ref:e,className:i}),n.a.createElement(ce,null),n.a.createElement(ue,null),n.a.createElement(pe,null))},xe=a(318);const we=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(t,e){navigator.serviceWorker.register(t).then(t=>{t.onupdatefound=()=>{const a=t.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(t=>{console.error("Error during service worker registration:",t)})}var ge=a(25);var ye=Object(ge.c)({ui:bt,set:B,colors:Q}),Ee=a(135);const ke=Object(R.a)({reducer:ye}),Fe=Object(Ee.a)({palette:{},breakpoints:{values:{xs:0,sm:450,md:960,lg:1280,xl:1920}}});i.a.render(n.a.createElement(o.a,{store:ke},n.a.createElement(xe.a,{theme:Fe},n.a.createElement(be,null))),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat(".","/service-worker.js");we?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then(a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(t=>{t.unregister().then(()=>{window.location.reload()})}):ve(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ve(e,t)})}}()}},[[143,1,2]]]);
//# sourceMappingURL=main.dd6c895d.chunk.js.map