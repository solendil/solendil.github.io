window.FractalJS=window.FractalJS||{},FractalJS.util=function(){"use strict";if(Math.trunc=Math.trunc||function(a){return 0>a?Math.ceil(a):Math.floor(a)},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0===this.indexOf(a)}),"performance"in window==!1&&(window.performance={}),"now"in window.performance==!1){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-a}}var b=function(a){if(0>a||a>255)throw"Number is out of range";return 16>a?"0"+a.toString(16):a.toString(16)};return{createInterpolant:function(a,b){var c,d=a.length;if(d!=b.length)throw"Need an equal count of xs and ys.";if(0===d)return function(a){return 0};if(1===d){var e=+b[0];return function(a){return e}}var f=[];for(c=0;d>c;c++)f.push(c);f.sort(function(b,c){return a[b]<a[c]?-1:1});var g=a,h=b;for(a=[],b=[],c=0;d>c;c++)a.push(+g[f[c]]),b.push(+h[f[c]]);var i=[],j=[],k=[];for(c=0;d-1>c;c++){var l=a[c+1]-a[c],m=b[c+1]-b[c];j.push(l),i.push(m),k.push(m/l)}var n=[k[0]];for(c=0;c<j.length-1;c++){var o=k[c],p=k[c+1];if(0>=o*p)n.push(0);else{var l=j[c],q=j[c+1],r=l+q;n.push(3*r/((r+q)/o+(r+l)/p))}}n.push(k[k.length-1]);var s=[],t=[];for(c=0;c<n.length-1;c++){var u=n[c],o=k[c],v=1/j[c],r=u+n[c+1]-o-o;s.push((o-u-r)*v),t.push(r*v*v)}return function(c){var d=a.length-1;if(c==a[d])return b[d];for(var e,f=0,g=t.length-1;g>=f;){e=Math.floor(.5*(f+g));var h=a[e];if(c>h)f=e+1;else{if(!(h>c))return b[e];g=e-1}}d=Math.max(0,g);var i=c-a[d],j=i*i;return b[d]+n[d]*i+s[d]*j+t[d]*i*j}},hsv_to_rgb:function(a,b,c){360==a&&(a=0),c>1&&(c=1);var d=a/60,e=c*b,f=e*(1-Math.abs(d%2-1)),g=[0,0,0];d>=0&&1>d&&(g=[e,f,0]),d>=1&&2>d&&(g=[f,e,0]),d>=2&&3>d&&(g=[0,e,f]),d>=3&&4>d&&(g=[0,f,e]),d>=4&&5>d&&(g=[f,0,e]),d>=5&&6>d&&(g=[e,0,f]);var h=c-e;return g[0]+=h,g[1]+=h,g[2]+=h,g[0]*=255,g[1]*=255,g[2]*=255,g},defaultProps:function(a,b){var c;a||(a={});for(c in b)c in a||(a[c]=b[c]);for(c in a)c in b||console.log("WARN : unknown property ",c);return a},getHashColor:function(a,c,d){return"#"+b(a)+b(c)+b(d)},base64ToArrayBuffer:function(a){for(var b=window.atob(a),c=b.length,d=new Uint8Array(c),e=0;c>e;e++)d[e]=b.charCodeAt(e);return d.buffer}}}(),FractalJS.Events=function(){"use strict";var a={};return{on:function(b,c){var d=b;b.constructor!==Array&&(d=[b]);for(var e in d){var f=d[e];f in a||(a[f]=[]),a[f].push(c)}},send:function(b,c){var d=b;b.constructor!==Array&&(d=[b]);var e=c;"function"==typeof c&&(e=c());var f=[];for(var g in d){var h=d[g];for(var i in a[h])f.push(a[h][i])}for(var j in f)f[j](e)}}},FractalJS.EngineWorker=function(){"use strict";return new Worker(FractalJS.EngineWorkerBlob)},FractalJS.EngineWorkerBlob=function(){"use strict";var a=URL.createObjectURL(new Blob(["(",function(){var a=function(){var a,b,c=4,d=1/Math.log(2),e=1/Math.log(3),f={0:function(a,e){for(var f=0,g=0,h=0,i=0,j=0,k=0;j<b.iter&&c>=h+i;++j)g=(f+f)*g+e,f=h-i+a,h=f*f,i=g*g;if(j==b.iter)return j;for(k=0;4>k;++k)g=(f+f)*g+e,f=h-i+a,h=f*f,i=g*g;var l=5+j-Math.log(Math.log(h+i))*d;return l},1:function(a,d){for(var f,g,h=0,i=0,k=0,l=0,m=0;;){if(f=k*h-3*h*l+a,g=3*k*i-l*i+d,h=f,i=g,++m>=b.iter)break;if(k=h*h,l=i*i,k+l>c)break}if(m==b.iter)return m;for(j=0;j<4;++j)f=k*h-3*h*l+a,g=3*k*i-l*i+d,h=f,i=g,k=h*h,l=i*i;var n=5+m-Math.log(Math.log(k+l))*e;return n},2:function(a,e){for(var f,g,h=0,i=0,k=0,l=0,m=0;;){if(g=(h+h)*i+e,f=k-l+a,h=Math.abs(f),i=Math.abs(g),++m>=b.iter)break;if(k=h*h,l=i*i,k+l>c)break}if(m==b.iter)return m;for(j=0;j<4;++j)g=(h+h)*i+e,f=k-l+a,h=Math.abs(f),i=Math.abs(g),k=h*h,l=i*i;var n=5+m-Math.log(Math.log(k+l))*d;return n},3:function(a,d){for(var e=0,f=0,g=0,h=0,i=0;i<b.iter&&c>=g+h;++i)e=g-h+a,f=(e+e)*f+d,g=e*e,h=f*f;return i},4:function(a,e){for(var f=a,g=e,h=a*a,i=e*e,j=0,k=0;j<b.iter&&c>=h+i;++j)g=(f+f)*g+.15,f=h-i-.79,h=f*f,i=g*g;if(j==b.iter)return j;for(k=0;4>k;++k)g=(f+f)*g+.15,f=h-i-.79,h=f*f,i=g*g;var l=5+j-Math.log(Math.log(h+i))*d;return l},5:function(a,e){for(var f=-e,g=a,h=0,i=0,k=0,l=0,m=0,n=.5667,o=-.5;m<b.iter&&c>=k+l;++m)xp1=f*f-g*g+n+o*h,yp1=2*f*g+o*i,k=xp1*xp1,l=yp1*yp1,h=f,i=g,f=xp1,g=yp1;if(m==b.iter)return m;for(j=0;j<4;++j)xp1=f*f-g*g+n+o*h,yp1=2*f*g+o*i,k=xp1*xp1,l=yp1*yp1,h=f,i=g,f=xp1,g=yp1;var p=5+m-Math.log(Math.log(f*f+g*g))*d;return p}},g={mandelsmooth:function(a,d){for(var e=0,f=0,g=0,h=0,i=0,j=0;i<b.iter&&c>=g+h;++i)f=(e+e)*f+d,e=g-h+a,g=e*e,h=f*f;for(j=0;4>j;++j)f=(e+e)*f+d,e=g-h+a,g=e*e,h=f*f;var k=5+i-logHalfBase-Math.log(Math.log(g+h))*logBase;return k},0:function(a,d){for(var e=0,f=0,g=0,h=0,i=0;i<b.iter&&c>=g+h;++i)f=(e+e)*f+d,e=g-h+a,g=e*e,h=f*f;return i},1:function(a,d){for(var e,f,g=0,h=0,i=0,j=0,k=0;;){if(e=i*g-3*g*j+a,f=3*i*h-j*h+d,g=e,h=f,++k>=b.iter)break;if(i=g*g,j=h*h,i+j>c)break}return k},2:function(a,d){for(var e,f,g=0,h=0,i=0,j=0,k=0;;){if(f=(g+g)*h+d,e=i-j+a,g=Math.abs(e),h=Math.abs(f),++k>=b.iter)break;if(i=g*g,j=h*h,i+j>c)break}return k},3:function(a,d){for(var e=0,f=0,g=0,h=0,i=0;i<b.iter&&c>=g+h;++i)e=g-h+a,f=(e+e)*f+d,g=e*e,h=f*f;return i},4:function(a,d){for(var e=a,f=d,g=a*a,h=d*d,i=0;i<b.iter&&c>=g+h;++i)f=(e+e)*f+.15,e=g-h-.79,g=e*e,h=f*f;return i},5:function(a,d){for(var e=-d,f=a,g=0,h=0,i=0,j=0,k=0,l=.5667,m=-.5;k<b.iter&&c>=i+j;++k)xp1=e*e-f*f+l+m*g,yp1=2*e*f+m*h,i=xp1*xp1,j=yp1*yp1,g=e,h=f,e=xp1,f=yp1;return k}};return{drawTileOnBuffer:function(c){for(var d=c.frame,e=b.pymin+c.y1*b.pixelOnP,f=0,g=c.y1;g<=c.y2;g++){for(var h=b.pxmin+c.x1*b.pixelOnP,i=c.x1;i<=c.x2;i++){var j=a(h,e);j==b.iter?d[f++]=0:d[f++]=j,h+=b.pixelOnP}e+=b.pixelOnP}},drawSuperTileOnBuffer:function(c){for(var d=b.pixelOnP/4,e=c.frame,f=b.pymin+c.y1*b.pixelOnP,g=0,h=c.y1;h<=c.y2;h++){for(var i=b.pxmin+c.x1*b.pixelOnP,j=c.x1;j<=c.x2;j++){for(var k=0,l=0;16>l;l++)k+=a(i+l/4*d,f+l%4*d);var m=k/16;e[g++]=m==b.iter?0:m,i+=b.pixelOnP}f+=b.pixelOnP}},drawSubTileOnBuffer:function(c){for(var d=4,e=b.pymin+(c.y1+d/2)*b.pixelOnP,f=0,g=0;g<c.height;g+=d){for(var h=b.pxmin+(c.x1+d/2)*b.pixelOnP,i=f,j=0;j<c.width;j+=d){for(var k=a(h,e),l=k==b.iter?0:k,m=0;d>m&&j+m<c.width;m++)c.frame[f++]=l;h+=b.pixelOnP*d}for(var n=1;d>n&&g+n<c.height;n++)for(var o=0;o<c.width;o++)c.frame[f++]=c.frame[i+o];e+=b.pixelOnP*d}},setDesc:function(c){b=c,a=b.smooth?f[b.typeid]:g[b.typeid]}}}({});onmessage=function(b){var c=b.data;if(c||console.error(b),"setDesc"===c.action)a.setDesc(c.desc);else{if("draw"!==c.action)throw"invalid worker message";if(200==c.quality)a.drawTileOnBuffer(c.tile);else if(100==c.quality)a.drawSubTileOnBuffer(c.tile);else{if(300!=c.quality)throw"invalid drawing quality";a.drawSuperTileOnBuffer(c.tile)}postMessage({action:"endTile",quality:c.quality,tile:b.data.tile,frameId:b.data.frameId,finished:b.data.finished})}}}.toString(),")()"],{type:"application/javascript"}));return a}(),FractalJS.Engine=function(a,b){"use strict";var c={},d=[],e=function(){d.length=0;for(var c=0;a>c;c++){var e=FractalJS.EngineWorker();d.push(e),e.onmessage=b.workerMessage}},f=function(){var a=Math.min(c.swidth,c.sheight),b=1.11e-15*a;c.w<b&&(c.w=b),c.pixelOnP=c.w/a,c.pxmin=c.x-c.swidth/2*c.pixelOnP,c.pymin=c.y-c.sheight/2*c.pixelOnP};this.eachWorker=function(a){for(var b in d)a(d[b])},this.setDesc=function(a){"x"in a&&(c.x=a.x),"y"in a&&(c.y=a.y),a.w&&(c.w=a.w),a.i&&(c.iter=Math.round(a.i)),a.iter&&(c.iter=Math.round(a.iter)),"typeid"in a&&(c.typeid=a.typeid),"smooth"in a&&(c.smooth=a.smooth),a.swidth&&(c.swidth=a.swidth,c.sheight=a.sheight),f();for(var b in d)d[b].postMessage({action:"setDesc",desc:c})},this.getDesc=function(){return{x:c.x,y:c.y,w:c.w,iter:c.iter,pixelOnP:c.pixelOnP,swidth:c.swidth,sheight:c.sheight,pxmin:c.pxmin,pymin:c.pymin,typeid:c.typeid,smooth:c.smooth}},e()},FractalJS.Colormap=function(a){"use strict";var b=new Int32Array(a.buffer),c=a.offset||0,d=a.density||20,e=b.length,f=a.typeid;return{getColorForIter:function(a){if(0===a)return 4278190080;var f=b[Math.floor((a*d+c*e)%e)];return f},buffer:function(){return b},getDesc:function(){return{offset:c,density:d,buffer:b,typeid:f}},setDesc:function(a){a.offset&&(c=a.offset),a.density&&(d=a.density),a.typeid&&(f=a.typeid),a.buffer&&(b=a.buffer,e=a.buffer.length)}}},FractalJS.Renderer=function(a){"use strict";var b,c,d,e,f=a.events,g=a.params.renderer,h=a.params.canvas,i=(FractalJS.util,this),j=h.getContext("2d"),k=null,l=[],m=[],n=0,o=4;"hardwareConcurrency"in navigator?(o=navigator.hardwareConcurrency,console.log("FractalJS will use all "+o+" cores")):console.log("FractalJS will use the default "+o+" threads");var p;this.resize=function(){this.setFractalDesc({swidth:h.width,sheight:h.height}),b=j.createImageData(h.width,h.height),c=new Uint32Array(b.data.buffer),d=document.createElement("canvas"),d.width=h.width,d.height=h.height;var a=h.width/h.height,e=Math.sqrt(g.numberOfTiles/a),f=Math.round(e*a);e=Math.round(e),console.log("tiles: "+f+"*"+e+" = "+e*f+" ("+g.numberOfTiles+" asked), ratio "+a);var i=0;l.length=0;for(var k=0;e>k;k++)for(var m=0;f>m;m++){var n={i:m,j:k,id:i++,x1:Math.round(m*h.width/f),x2:Math.round((m+1)*h.width/f)-1,y1:Math.round(k*h.height/e),y2:Math.round((k+1)*h.height/e)-1};n.x=(n.x1+n.x2)/2,n.y=(n.y1+n.y2)/2,n.width=n.x2-n.x1+1,n.height=n.y2-n.y1+1,n.frame=new Float32Array(n.width*n.height),n.indexScreen=n.y1*h.width+n.x1,l.push(n)}},this.setFractalDesc=function(a){p.setDesc(a)},this.getFractalDesc=function(){return p.getDesc()},this.setColorDesc=function(a){return k?k.setDesc(a):void(k=FractalJS.Colormap(a))},this.getColorDesc=function(){return k.getDesc()},this.drawColors=function(){t()};var q=null,r=null;this.refine=function(){this.draw("supersampling",null,q,300)},this.draw=function(a,b,c,g){if(q=b,g||(g=200),c||(c=b),r=g,0!==m.length&&(m.length=0),e=performance.now(),n++,f.send("frame.start"),b){var i=j.getImageData(0,0,h.width,h.height);d.getContext("2d").putImageData(i,0,0),j.scale(b.z,b.z),j.translate(b.x,b.y),j.drawImage(d,0,0),j.setTransform(1,0,0,1,0,0)}var k;for(var o in l)k=l[o],!b||"zoomin"!=b.mvt&&"zoomout"!=b.mvt||(k.dx=b.sx-k.x,k.dy=b.sy-k.y,k.dist=k.dx*k.dx+k.dy*k.dy),b&&"pan"==b.mvt&&(k.prio=0,b.x>0&&k.x1<b.x&&(k.prio=1),b.x<0&&k.x2>h.width+b.x&&(k.prio=1),b.y>0&&k.y1<b.y&&(k.prio=1),b.y<0&&k.y2>h.height+b.y&&(k.prio=1)),"init"==a&&m.push({action:"draw",quality:100,frameId:n,tile:k}),m.push({action:"draw",quality:g,frameId:n,tile:k});m.sort(function(a,c){if(a.quality!=c.quality)return a.quality-c.quality;if(b){if("pan"==b.mvt)return c.tile.prio-a.tile.prio;if("zoomin"==b.mvt)return a.tile.dist-c.tile.dist;if("zoomout"==b.mvt)return c.tile.dist-a.tile.dist}return a.tile.id-c.tile.id}),p.eachWorker(function(a){var b=m.shift();a.postMessage(b)})};var s=function(){var a=performance.now();if(f.send("frame.end",function(){return{fractalDesc:p.getDesc(),time:a-e}}),300!=r){var b,c,d,g=1e12,h=-1,j=0,k=0;for(var m in l)for(d=l[m],b=0;b<d.frame.length;b++)j++,c=d.frame[b],0!==c?(c>h&&(h=c),g>c&&(g=c)):k++;var n=h-g,o=p.getDesc().iter-Math.ceil(n/10),q=0;for(m in l)for(d=l[m],b=0;b<d.frame.length;b++)c=d.frame[b],0!==c&&c>=o&&q++;var s=100*k/j,t=100*q/k;s>1&&t>1?(i.setFractalDesc({iter:1.5*p.getDesc().iter}),i.draw(),f.send("iter.change")):setTimeout(function(){i.refine()},1e3),s>1&&.2>t&&(i.setFractalDesc({iter:p.getDesc().iter/1.5}),f.send("iter.change"))}},t=function(){var a=(performance.now(),k.getDesc()),d=a.buffer,e=a.offset*d.length,f=a.density,g=d.length;for(var i in l)for(var m=l[i],n=m.indexScreen,o=0,p=0;p<m.height;p++){for(var q=0;q<m.width;q++){var r=m.frame[o++];0===r?c[n]=4278190080:c[n]=d[~~((r*f+e)%g)],n++}n+=h.width-m.width}j.putImageData(b,0,0,0,0,h.width,h.height);performance.now()};this.workerMessage=function(a){if("endTile"!==a.data.action)throw"Unknown message";if(a.data.frameId==n){var d=a.data.tile.id,e=a.data.tile;l[d]=e;for(var f=0,g=0,i=0;i<e.height;i++){g=(i+e.y1)*h.width+e.x1;for(var o=0;o<e.width;o++){var p=e.frame[f++],q=k.getColorForIter(p);c[g++]=q}}if(j.putImageData(b,0,0,e.x1,e.y1,e.width,e.height),m.length>0){var r=m.shift();0===m.length&&(r.finished=!0),a.target.postMessage(r)}a.data.finished&&s()}},p=new FractalJS.Engine(o,this),this.resize()},FractalJS.Controller=function(a){"use strict";var b,c,d,e,f,g,h=1.3,i=a.params.canvas,j=a.params.controller,k=a.events,l=function(){var b=a.getFractalDesc(),c=a.getColorDesc(),d=new ArrayBuffer(40),e=new Uint8Array(d),f=new Uint16Array(d),g=new Float64Array(d),h=new Float32Array(d);f[0]=1,f[1]=b.iter,e[4]=b.typeid,e[5]=c.typeid,f[3]=1e4*c.offset,g[1]=b.x,g[2]=b.y,g[3]=b.w,h[8]=c.density;var i=b.smooth?1:0;e[36]=i;var j=btoa(String.fromCharCode.apply(null,new Uint8Array(d)));j=j.split("/").join("*"),j=j.split("=").join("_"),history.replaceState("","","#A"+j)};if(j.keyboardControl&&(document.onkeydown=function(a){a=a||window.event,console.log(a)}),j.mouseControl){i.onmousedown=function(h){h||(h=window.event),0===h.button&&(b=!0,c=f=h.screenX,d=g=h.screenY,0===h.button&&(e=a.getFractalDesc()))},window.addEventListener("mouseup",function(a){a||(a=window.event),b=!1}),window.addEventListener("mousemove",function(h){if(h||(h=window.event),b){var i=h.screenX-c,j=h.screenY-d,l=i*e.pixelOnP,m=j*e.pixelOnP,n={x:e.x-l,y:e.y-m};a.setFractalDesc(n,!0);var o=h.screenX-f,p=h.screenY-g,q={x:o,y:p,mvt:"pan"};a.draw("mouse.control",q),k.send("mouse.control"),f=h.screenX,g=h.screenY}});var m=function(b){b||(b=window.event),b.preventDefault();var c=b.deltaY||b.wheelDelta,d=b.clientX,e=b.clientY,f=a.getFractalDesc(),g=a.getFractalDesc(),i=Math.min(g.swidth,g.sheight),j=1.11e-15*i;if(g.w<=j&&0>c)return void k.send("zoom.limit.reached");var l=(d-g.swidth/2)*g.pixelOnP,m=(e-g.sheight/2)*g.pixelOnP;g.x+=l,g.y+=m,a.setFractalDesc(g,!0),g=a.getFractalDesc(g);var n={sx:d,sy:e};0>c?(g.w/=h,g.x-=l/h,g.y-=m/h,n.z=1*h,n.mvt="zoomin"):(g.w*=h,g.x-=l*h,g.y-=m*h,n.z=1/h,n.mvt="zoomout"),a.setFractalDesc(g,!0);var o=a.getFractalDesc(g);n.x=(f.pxmin-o.pxmin)/f.pixelOnP,n.y=(f.pymin-o.pymin)/f.pixelOnP,a.draw("mouse.control",n),k.send("mouse.control")};"onwheel"in i?i.onwheel=m:i.onmousewheel=m}j.fitToWindow&&(i.width=window.innerWidth,i.height=window.innerHeight,window.onresize=function(){i.width=window.innerWidth,i.height=window.innerHeight,a.resize(),a.draw("init")}),this.readUrl=function(){try{var a=document.location.hash;if(a.startsWith("#A")){var b=a.substr(2);b=b.split("*").join("/"),b=b.split("_").join("=");var c=FractalJS.util.base64ToArrayBuffer(b),d=new Uint8Array(c),e=new Uint16Array(c),f=new Float64Array(c),g=new Float32Array(c),h=d[36],i={x:f[1],y:f[2],w:f[3],iter:e[1],typeid:d[4],smooth:h&!0},j={offset:e[3]/1e4,density:d.length>32?g[8]:20,typeid:d[5],resolution:1e3,buffer:FractalJS.Colormapbuilder().fromId(1e3,d[5])};return[i,j]}}catch(k){console.error("Could not read URL"),console.error(k)}},k.on("iter.change",l),k.on("mouse.control",l),k.on("api.change",l)},FractalJS.Colormapbuilder=function(a){"use strict";var b={0:"0#080560;0.2#2969CB;0.40#F1FEFE;0.60#FCA425;0.85#000000",1:"0.0775#78591e;0.55#d6e341",2:"0#0000FF;0.33#FFFFFF;0.66#FF0000",3:"0.08#09353e;0.44#1fc3e6;0.77#08173e",4:"0#000085;0.25#fffff5;0.5#ffb500;0.75#9c0000",5:"0#000000;0.25#000000;0.5#7f7f7f;0.75#ffffff;0.975#ffffff",10:"0#000000;0.25#16A085;0.5#FFFFFF;0.75#16A085",11:"0#000000;0.25#27AE60;0.5#FFFFFF;0.75#27AE60",12:"0#000000;0.25#2980B9;0.5#FFFFFF;0.75#2980B9",13:"0#000000;0.25#8E44AD;0.5#FFFFFF;0.75#8E44AD",14:"0#000000;0.25#2C3E50;0.5#FFFFFF;0.75#2C3E50",15:"0#000000;0.25#F39C12;0.5#FFFFFF;0.75#F39C12",16:"0#000000;0.25#D35400;0.5#FFFFFF;0.75#D35400",17:"0#000000;0.25#C0392B;0.5#FFFFFF;0.75#C0392B",18:"0#000000;0.25#BDC3C7;0.5#FFFFFF;0.75#BDC3C7",19:"0#000000;0.25#7F8C8D;0.5#FFFFFF;0.75#7F8C8D"},c=function(a,b){var c=new Int32Array(a),d=[],e=[],f=[],g=[],h=function(a){var b=a.split(";");for(var c in b){var h=b[c],i=h.split("#");d.push(Number(i[0])),e.push(parseInt(i[1].substring(0,2),16)),f.push(parseInt(i[1].substring(2,4),16)),g.push(parseInt(i[1].substring(4,6),16))}},i=function(){d.push(d[0]+1),e.push(e[0]),f.push(f[0]),g.push(g[0]);for(var b=FractalJS.util.createInterpolant(d,e),h=FractalJS.util.createInterpolant(d,f),i=FractalJS.util.createInterpolant(d,g),j=new Uint8Array(c.buffer),k=0,l=0;a>l;l++){var m=l/a;m<d[0]&&(m+=1),j[k++]=b(m),j[k++]=h(m),j[k++]=i(m),j[k++]=255}};return h(b),i(),c};return{getStandardGradients:function(){return b},fromId:function(a,d){return c(a,b[d])},fromstops:function(a,b){return c(a,b)}}},FractalJS.create=function(a){"use strict";var b,c,d=FractalJS.util;if(this.params=a,this.events=FractalJS.Events(),!a.canvas||!a.canvas.width)throw"Canvas is not set";if(!a.fractalDesc)throw"Fractal Description is not set";a.renderer=d.defaultProps(a.renderer,{numberOfTiles:1,drawAfterInit:!0}),a.controller=d.defaultProps(a.controller,{mouseControl:!0,keyboardControl:!0,fitToWindow:!1}),c=new FractalJS.Controller(this);var e=c.readUrl();e&&(a.fractalDesc=e[0],a.colorDesc=e[1]),a.colorDesc||(a.colorDesc={typeid:0,resolution:1e3,buffer:FractalJS.Colormapbuilder().fromId(1e3,0)}),b=new FractalJS.Renderer(this),b.setColorDesc(a.colorDesc),b.setFractalDesc(a.fractalDesc),a.renderer.drawAfterInit&&b.draw("init"),this.setFractalDesc=function(a,c){b.setFractalDesc(a),c||this.events.send("api.change")},this.getFractalDesc=function(){return b.getFractalDesc()},this.draw=function(a,c){b.draw(a,c)},this.resize=function(){b.resize()},this.refreshColormap=function(){b.drawColors()},this.setColorDesc=function(a){var c=b.setColorDesc(a);return this.events.send("api.change"),c},this.getColorDesc=function(){return b.getColorDesc()}};