{"version":3,"sources":["engine/scheduler/worker/interface.worker.js","engine/fractals sync //.([jt]s)$","engine/fractals/burningbird.ts","engine/fractals/burningship.ts","engine/fractals/example.ts","engine/fractals/julia.ts","engine/fractals/mandelbrot.ts","engine/fractals/mandelbrot3.ts","engine/fractals/mandelbrot4.ts","engine/fractals/phoenix.ts","engine/fractals/tippetts.ts","util/EventBus.ts","engine/scheduler/worker.ts","engine/scheduler/scheduler.ts","engine/redrawer.ts","engine/fractals.ts","params.ts","engine/tile.ts","engine/renderer.ts","util/palette.ts","engine/painter.ts","engine/math/vector.ts","engine/math/matrix.ts","engine/math/camera.ts","engine/engine.ts","redux/set.ts","util/keybinder.ts","redux/controller.ts","redux/colors.ts","redux/guide.ts","redux/url.ts","redux/ui.ts","engine/guide.ts","redux/rdxengine.ts","redux/improver.ts","ui/pages/Fractal.tsx","ui/pages/Palette.tsx","ui/pages/Settings.tsx","util/misc.ts","ui/pages/About.tsx","ui/pages/Debug.tsx","ui/ShareButton.tsx","ui/Toolbar.tsx","ui/Navigation.tsx","ui/InfoBox.tsx","ui/Snackbar.tsx","ui/overlay/Poi.tsx","engine/pois.ts","ui/overlay/Cross.tsx","ui/overlay/Pois.tsx","ui/overlay/Overlay.tsx","ui/App.tsx","serviceWorker.ts","redux/reducer.ts","index.tsx"],"names":["module","exports","Worker","__webpack_public_path__","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","iLog2","Math","log","fractalId","uiOrder","name","preset","x","y","w","iter","fn","normal","cx","cy","zny","zx","zy","sqx","sqy","i","abs","smooth","j","znx","hidden","iLog4","xp1","yp1","xm1","ym1","sx","sy","EventBus","constructor","listeners","this","on","evt","callback","push","notify","obj","setTimeout","callbacks","forEach","cb","available","tile","worker","createWebWorker","WorkerInterface","postMessage","action","onmessage","bind","cancel","terminate","buffer","Float32Array","width","height","draw","order","event","data","Scheduler","ctx","scheduleId","orders","workers","upperCallback","handlers","nbThreads","onWorkerResponse","throttledSchedule","_","throttle","shift","isWorking","accept","filter","length","busyWorkers","availableWorkers","schedule","reject","Promise","Redrawer","canvas","offCanvas","context","lastId","lastType","lastMatrix","document","createElement","redraw","newMatrix","type","tileSorter","m","inverse","multiply","imageData","getImageData","getContext","putImageData","clearRect","transform","a","b","c","d","f","drawImage","setTransform","reverse","require","byId","filename","default","getPreset","res","param","nbTiles","supersampling","Tile","x1","x2","y1","y2","ratio","nbY","round","sqrt","nbX","console","Renderer","painter","engine","scheduler","redrawer","imageBuffer","tiles","resize","createImageData","Uint32Array","getTiling","getIterationsAt","cpx","getFunction","func","getHistogram","histogram","Array","fill","val","drawColor","paint","params","tileSort","camera","matrix","workerModel","assign","model","t","dist","sort","standardGradients","0","1","2","3","4","5","10","11","12","13","14","15","16","17","18","19","createInterpolant","xs","ys","result","indexes","oldXs","oldYs","dys","dxs","ms","dx","dy","c1s","mNext","dxNext","common","cpx2scr","c3s","c1","invDx","mid","low","high","floor","xHere","max","diff","diffSq","getBufferFromId","resolution","gradient","indices","reds","greens","blues","Int32Array","split","stop","items","Number","parseInt","substring","interR","interG","interB","byteBuffer","Uint8Array","bufferIndex","floatIndex","buildBuffer","buildBufferFromStringGradient","Painter","p","NaN","offset","density","set","tx","ty","color","cbuffer","tileIndex","Vector","midPoint","v2","minus","v","plus","distanceTo","times","minVal","min","Matrix","raw","isIdentity","isInvertible","deter","inverseGaussJordan","dt","gje","M","c1i","c2i","c2","gjet","toString","t1px","t1py","t1qx","t1qy","t1rx","t1ry","t2px","t2py","t2qx","t2qy","t2rx","t2ry","STD2T1","STD2T2","T12STD","angle","cos","sin","identity","Camera","screenSize","pos","viewportMatrix","matrix_inv","screen","resolutionLimit","extent","reproject","S2Q","viewportTransform","q","r","GetTriangleToTriangle","getScreenToSquareMatrix","Q2C","clone","scr2cpx","getPos","setPos","isZoomLimit","Engine","paramsFetcher","renderer","navigator","hardwareConcurrency","fromRaw","viewport","fetchParams","cam","drawParams","details","start","Date","getTime","end","time","ui","createSlice","initialState","reducers","setSet","state","payload","updateSet","reducer","actions","left","up","right","down","esc","A","B","C","D","E","F","G","H","I","J","K","L","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","keymap","bindings","addEventListener","keyCode","modifier","shiftKey","binding","combo","every","k","bindKeys","keysStr","keycodes","key","ANGLE","PI","Controller","dispatch","setupKeyboard","setupMouse","setupTouch","pan","scr_vector_delta","scr_vector","cpx_point_0","cpx_point_dest","cpx_vector","cpx_new_point","changeXY","valuex","valuey","zoom","delta","scr_point_arg","scr_point","cpx_point","Î”","viewportReset","toggleGuide","hammer","Hammer","dragStart","cameraStart","isDragging","get","direction","DIRECTION_ALL","threshold","enable","center","cpx_new","isPinching","pinchStart","ev","pc1","pc2","scale","pc0A","z","window","preventDefault","deltaY","point","offsetX","offsetY","setColorId","setOffset","setDensity","setPaint","active","setGuide","defaults","fs","ct","co","cd","cf","va","vb","vc","vd","read","url","location","hash","startsWith","rawArgs","substr","reduce","acc","tuple","parts","args","desc","parseFloat","guide","gx","gy","readCurrentScheme","error","readInit","forceCold","urlData","drawer","mouseOnCanvas","tab","infobox","square","showPois","mouse","narrowDevice","orientableDevice","setUi","toggleSquare","setDrawer","setTab","setScreenSize","setInfobox","setMouseOnCanvas","setMouseInfo","setNarrowDevice","setSnack","snack","cross","beginPath","moveTo","lineTo","stroke","Guide","getState","scr","lineWidth","strokeStyle","urlUpdate","initEngine","canvasGuide","JSON","stringify","displayPoi","getWindowSize","innerWidth","innerHeight","onResize","onMediaChange","media","matches","matchMedia","addListener","debounce","rdx","colors","root","String","toFixed","str","entries","join","history","replaceState","undefined","engineArg","frameId","lastState","sleep","duration","analysePicture2","histo","nbPixels","nb","perc","shouldIncrease","shouldDecrease","txt","size","analysis","newIter","Improver","pt","GetRotationMatrix","GetShearMatrix","GetScaleMatrix","useStyles","makeStyles","theme","swatches","display","flexWrap","marginLeft","spacing","textTransform","paddingLeft","paddingBottom","Fractal","classes","useDispatch","useSelector","buttons","values","Button","variant","onClick","setValues","colorActions","changeFractalType","List","component","subheader","ListSubheader","ListItem","className","DENSITY","gradients","colorBuffer","dataURL","toDataURL","marginRight","paddingRight","position","borderRadius","bottom","fontSize","padding","textShadow","Palette","alt","src","densitySlider","dense","Typography","Slider","step","value","onChange","setColorDensity","Settings","ListItemText","primary","ListItemSecondaryAction","Switch","edge","changeSmooth","target","checked","createStyles","avatar","backgroundColor","palette","main","inline","keyboard","verticalAlign","border","background","margin","minWidth","textAlign","Keys","Speech","rel","href","SimpleCard","style","maxWidth","maxTouchPoints","msMaxTouchPoints","ListItemAvatar","Avatar","secondary","orientation","userAgent","indexOf","Divider","data-color-scheme","data-size","data-show-count","aria-label","Debug","Share","props","nav","share","IconButton","title","text","bar","fade","backdropFilter","breakpoints","only","flexDirection","icons","selected","brand","lineHeight","writingMode","fontFamily","paddingTop","letterSpacing","fontWeight","flexGrow","textDecoration","ToolBar","navigation","def","tabId","icon","Boolean","poi","splice","fractal","settings","about","debug","appBar","top","trans","borderTopLeftRadius","borderTopRightRadius","handle","Navigation","bigDevice","useMediaQuery","content","SwipeableDrawer","anchor","open","disableDiscovery","disableSwipeToOpen","PaperProps","BackdropProps","invisible","onClose","onOpen","box","InfoBox","Paper","elevation","gutterBottom","Box","toExponential","snackbar","MySnackbar","Snackbar","message","Poi","m2","rawDb","poiDb","buildDb","Cross","cameraSelector","createSelector","Pois","pois","crosses","aggs","agg","htmlCrosses","htmlFullPois","Overlay","App","canvasRef","useRef","canvasGuideRef","React","useEffect","current","offsetClass","ref","isLocalhost","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","combineReducers","whyDidYouRender","trackHooks","trackAllPureComponents","trackExtraHooks","store","configureStore","createMuiTheme","sm","md","lg","xl","ReactDOM","render","ThemeProvider","getElementById","URL","process","origin","fetch","headers","response","contentType","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.c57c9716.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"520087e4063d59e7b0e5.worker.js\");\n};","var map = {\n\t\"./burningbird.ts\": 149,\n\t\"./burningship.ts\": 150,\n\t\"./example.ts\": 151,\n\t\"./julia.ts\": 152,\n\t\"./mandelbrot.ts\": 153,\n\t\"./mandelbrot3.ts\": 154,\n\t\"./mandelbrot4.ts\": 155,\n\t\"./phoenix.ts\": 156,\n\t\"./tippetts.ts\": 157\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 148;","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nvar iLog2 = 1.0 / Math.log(2.0);\n\nexport default {\n  fractalId: \"burningbird\",\n  uiOrder: 2.5,\n  name: \"Burning Bird\",\n  preset: { x: -0.46, y: 0.07, w: 3.26, iter: 50 },\n  fn: {\n    normal: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        znx,\n        zny;\n      cy = -cy; // this fractal is usually represented upside down\n      while (true) {\n        zny = (zx + zx) * zy + cy;\n        znx = sqx - sqy + cx;\n        zx = znx;\n        zy = Math.abs(zny);\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      return i;\n    },\n    smooth: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        j,\n        znx,\n        zny;\n      cy = -cy; // this fractal is usually represented upside down\n      while (true) {\n        zny = (zx + zx) * zy + cy;\n        znx = sqx - sqy + cx;\n        zx = znx;\n        zy = Math.abs(zny);\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      if (i === iter) return i;\n      for (j = 0; j < 4; ++j) {\n        zny = (zx + zx) * zy + cy;\n        znx = sqx - sqy + cx;\n        zx = znx;\n        zy = Math.abs(zny);\n        sqx = zx * zx;\n        sqy = zy * zy;\n      }\n      return 5 + i - Math.log(Math.log(sqx + sqy)) * iLog2;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nvar iLog2 = 1.0 / Math.log(2.0);\n\nexport default {\n  fractalId: \"burningship\",\n  uiOrder: 2,\n  name: \"Burning Ship\",\n  preset: { x: -0.4, y: 0.55, w: 3, iter: 50 },\n  fn: {\n    normal: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        znx,\n        zny;\n      cy = -cy; // this fractal is usually represented upside down\n      while (true) {\n        zny = (zx + zx) * zy + cy;\n        znx = sqx - sqy + cx;\n        zx = Math.abs(znx);\n        zy = Math.abs(zny);\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      return i;\n    },\n    smooth: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        j,\n        znx,\n        zny;\n      cy = -cy; // this fractal is usually represented upside down\n      while (true) {\n        zny = (zx + zx) * zy + cy;\n        znx = sqx - sqy + cx;\n        zx = Math.abs(znx);\n        zy = Math.abs(zny);\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      if (i === iter) return i;\n      for (j = 0; j < 4; ++j) {\n        zny = (zx + zx) * zy + cy;\n        znx = sqx - sqy + cx;\n        zx = Math.abs(znx);\n        zy = Math.abs(zny);\n        sqx = zx * zx;\n        sqy = zy * zy;\n      }\n      return 5 + i - Math.log(Math.log(sqx + sqy)) * iLog2;\n    },\n  },\n} as FractalDef;\n","export type RenderFn = (cx: number, cy: number, iter: number) => number;\nexport interface FractalDef {\n  fractalId: string;\n  hidden?: boolean;\n  uiOrder?: number;\n  name: string;\n  preset: {\n    x: number;\n    y: number;\n    w: number;\n    iter: number;\n  };\n  fn: {\n    normal: RenderFn;\n    smooth?: RenderFn;\n  };\n}\n\nexport default {\n  fractalId: \"example\",\n  hidden: true,\n  uiOrder: -1,\n  name: \"example\",\n  preset: {\n    x: -0.7,\n    y: 0.0,\n    w: 2.5,\n    iter: 50,\n  },\n  fn: {\n    normal: (cx, cy, iter) => {\n      return 0;\n    },\n    smooth: (cx, cy, iter) => {\n      return 0;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nconst iLog2 = 1.0 / Math.log(2.0);\n\nconst refx = 0.285;\nconst refy = 0.01;\n\nexport default {\n  fractalId: \"juliaex1\",\n  uiOrder: 5,\n  name: \"Julia\",\n  preset: {\n    x: 0.0,\n    y: 0.0,\n    w: 2.2,\n    iter: 50,\n  },\n  fn: {\n    normal: function (cx, cy, iter) {\n      var znx = cx,\n        zny = cy,\n        sqx = cx * cx,\n        sqy = cy * cy,\n        i = 0;\n      for (; i < iter && sqx + sqy <= escape; ++i) {\n        zny = (znx + znx) * zny + refy;\n        znx = sqx - sqy + refx;\n        sqx = znx * znx;\n        sqy = zny * zny;\n      }\n      return i;\n    },\n    smooth: function (cx, cy, iter) {\n      var znx = cx,\n        zny = cy,\n        sqx = cx * cx,\n        sqy = cy * cy,\n        i = 0,\n        j = 0;\n      for (; i < iter && sqx + sqy <= escape; ++i) {\n        zny = (znx + znx) * zny + refy;\n        znx = sqx - sqy + refx;\n        sqx = znx * znx;\n        sqy = zny * zny;\n      }\n      if (i === iter) {\n        return i;\n      }\n      for (j = 0; j < 4; ++j) {\n        zny = (znx + znx) * zny + refy;\n        znx = sqx - sqy + refx;\n        sqx = znx * znx;\n        sqy = zny * zny;\n      }\n      var res = 5 + i - Math.log(Math.log(sqx + sqy)) * iLog2;\n      return res;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nvar iLog2 = 1.0 / Math.log(2.0);\n\nexport default {\n  fractalId: \"mandelbrot\",\n  uiOrder: 0,\n  name: \"Mandelbrot\",\n  preset: { x: -0.7, y: 0.0, w: 2.5, iter: 50 },\n  fn: {\n    normal: (cx, cy, iter) => {\n      var znx = 0,\n        zny = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0;\n      for (; i < iter && sqx + sqy <= escape; ++i) {\n        zny = (znx + znx) * zny + cy;\n        znx = sqx - sqy + cx;\n        sqx = znx * znx;\n        sqy = zny * zny;\n      }\n      return i;\n    },\n    smooth: (cx, cy, iter) => {\n      var znx = 0,\n        zny = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        j = 0;\n      for (; i < iter && sqx + sqy <= escape; ++i) {\n        zny = (znx + znx) * zny + cy;\n        znx = sqx - sqy + cx;\n        sqx = znx * znx;\n        sqy = zny * zny;\n      }\n      if (i === iter) return i;\n      for (j = 0; j < 4; ++j) {\n        zny = (znx + znx) * zny + cy;\n        znx = sqx - sqy + cx;\n        sqx = znx * znx;\n        sqy = zny * zny;\n      }\n      return 5 + i - Math.log(Math.log(sqx + sqy)) * iLog2;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nvar iLog4 = 1.0 / Math.log(4.0);\n\nexport default {\n  fractalId: \"mandelbrot3\",\n  uiOrder: 3,\n  name: \"Multibrot *3\",\n  preset: { x: 0.0, y: 0.0, w: 3.0, iter: 50 },\n  fn: {\n    normal: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        znx,\n        zny;\n      while (true) {\n        znx = sqx * zx - 3 * zx * sqy + cx;\n        zny = 3 * sqx * zy - sqy * zy + cy;\n        zx = znx;\n        zy = zny;\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      return i;\n    },\n    smooth: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        j,\n        znx,\n        zny;\n      while (true) {\n        znx = sqx * zx - 3 * zx * sqy + cx;\n        zny = 3 * sqx * zy - sqy * zy + cy;\n        zx = znx;\n        zy = zny;\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      if (i === iter) return i;\n      for (j = 0; j < 4; ++j) {\n        znx = sqx * zx - 3 * zx * sqy + cx;\n        zny = 3 * sqx * zy - sqy * zy + cy;\n        zx = znx;\n        zy = zny;\n        sqx = zx * zx;\n        sqy = zy * zy;\n      }\n      return 5 + i - Math.log(Math.log(sqx + sqy)) * iLog4;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nvar iLog4 = 1.0 / Math.log(4.0);\n\nexport default {\n  fractalId: \"mandelbrot4\",\n  uiOrder: 4,\n  name: \"Multibrot *4\",\n  preset: { x: 0.0, y: 0.0, w: 3.0, iter: 50 },\n  fn: {\n    normal: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        znx,\n        zny;\n      while (true) {\n        znx = sqx * sqx - 6 * sqx * sqy + sqy * sqy + cx;\n        zny = 4 * sqx * zx * zy - 4 * zx * sqy * zy + cy;\n        zx = znx;\n        zy = zny;\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      return i;\n    },\n    smooth: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0,\n        znx,\n        zny;\n      while (true) {\n        znx = sqx * sqx - 6 * sqx * sqy + sqy * sqy + cx;\n        zny = 4 * sqx * zx * zy - 4 * zx * sqy * zy + cy;\n        zx = znx;\n        zy = zny;\n        if (++i >= iter) break;\n        sqx = zx * zx;\n        sqy = zy * zy;\n        if (sqx + sqy > escape) break;\n      }\n      if (i === iter) return i;\n      return 5 + i - Math.log(Math.log(sqx + sqy)) * iLog4;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\nvar iLog2 = 1.0 / Math.log(2.0);\n\nconst refx = 0.5667;\nconst refy = -0.5;\n\nexport default {\n  fractalId: \"phoenixex1\",\n  uiOrder: 6,\n  name: \"Phoenix\",\n  preset: { x: -0.7, y: -0.05, w: 1.6, iter: 250 },\n  fn: {\n    normal: function (cx, cy, iter) {\n      var x = -cy,\n        y = cx,\n        xm1 = 0,\n        ym1 = 0;\n      var sx = 0,\n        sy = 0,\n        i = 0;\n      var xp1;\n      var yp1;\n      for (; i < iter && sx + sy <= escape; ++i) {\n        xp1 = x * x - y * y + refx + refy * xm1;\n        yp1 = 2 * x * y + refy * ym1;\n        sx = xp1 * xp1;\n        sy = yp1 * yp1;\n        xm1 = x;\n        ym1 = y;\n        x = xp1;\n        y = yp1;\n      }\n      return i;\n    },\n\n    smooth: function (cx, cy, iter) {\n      var x = -cy,\n        y = cx,\n        xm1 = 0,\n        ym1 = 0;\n      var sx = 0,\n        sy = 0,\n        i = 0;\n      var xp1;\n      var yp1;\n      for (; i < iter && sx + sy <= escape; ++i) {\n        xp1 = x * x - y * y + refx + refy * xm1;\n        yp1 = 2 * x * y + refy * ym1;\n        sx = xp1 * xp1;\n        sy = yp1 * yp1;\n        xm1 = x;\n        ym1 = y;\n        x = xp1;\n        y = yp1;\n      }\n      if (i === iter) {\n        return i;\n      }\n      for (var j = 0; j < 4; ++j) {\n        xp1 = x * x - y * y + refx + refy * xm1;\n        yp1 = 2 * x * y + refy * ym1;\n        sx = xp1 * xp1;\n        sy = yp1 * yp1;\n        xm1 = x;\n        ym1 = y;\n        x = xp1;\n        y = yp1;\n      }\n      var res = 5 + i - Math.log(Math.log(x * x + y * y)) * iLog2;\n      return res;\n    },\n  },\n} as FractalDef;\n","import { FractalDef } from \"./example\";\n\nconst escape = 4;\n\nexport default {\n  fractalId: \"tippetts\",\n  uiOrder: 1,\n  name: \"Tippetts\",\n  preset: { x: -0.5, y: 0.0, w: 4, iter: 50 },\n  fn: {\n    normal: (cx, cy, iter) => {\n      var zx = 0,\n        zy = 0,\n        sqx = 0,\n        sqy = 0,\n        i = 0;\n      for (; i < iter && sqx + sqy <= escape; ++i) {\n        zx = sqx - sqy + cx;\n        zy = (zx + zx) * zy + cy;\n        sqx = zx * zx;\n        sqy = zy * zy;\n      }\n      return i;\n    },\n  },\n} as FractalDef;\n","export type Callback = (x: any) => void;\n\ntype Events = \"draw.redraw\" | \"draw.start\" | \"zoom.limit\";\n\nexport default class EventBus {\n  private listeners: {\n    [key: string]: Callback[];\n  };\n\n  constructor() {\n    this.listeners = {};\n  }\n\n  on(evt: Events, callback: Callback) {\n    if (!(evt in this.listeners)) this.listeners[evt] = [];\n    this.listeners[evt].push(callback);\n  }\n\n  notify(evt: Events, obj?: any) {\n    // force the notification to occur from the event loop (always async callback)\n    setTimeout(() => {\n      const callbacks = this.listeners[evt] || [];\n      if (obj) obj.evt = evt;\n      callbacks.forEach(cb => {\n        cb(obj);\n      });\n    }, 0);\n  }\n}\n","// @ts-ignore\nimport WorkerInterface from \"./worker/interface.worker.js\";\nimport { DrawOrder, Order, WorkerResponse } from \"./types\";\nimport { Tile } from \"../tile.js\";\n\ninterface TWorker {\n  postMessage: (x: Order, y?: any[]) => void;\n  onmessage: (x: any) => void;\n  terminate: () => void;\n}\ntype LocalCallback = (worker: Worker, data: WorkerResponse) => void;\n\n/*\n  This is a webworker proxy. It handles:\n  - passing of tile buffer by reference to and from the webworker\n  - canceling webworkers, and recreating their tile buffer\n  - handling \"available\" status as a safeguard\n*/\nexport default class Worker {\n  public id: number;\n  public available: boolean = true;\n\n  private tile!: Tile;\n  private worker!: TWorker;\n  private callback: LocalCallback;\n\n  constructor(id: number, callback: LocalCallback) {\n    this.id = id;\n    this.createWebWorker();\n    this.callback = callback;\n  }\n\n  private createWebWorker() {\n    this.worker = (new WorkerInterface() as unknown) as TWorker;\n    this.worker.postMessage({ action: \"init\", id: this.id });\n    this.worker.onmessage = this.onmessage.bind(this);\n  }\n\n  cancel() {\n    if (this.available) throw new Error(\"Canceling an available worker\");\n    // hard stuff: force terminate and recreate of a worker\n    this.worker.terminate();\n    this.createWebWorker();\n    this.tile.buffer = new Float32Array(this.tile.width * this.tile.height);\n    this.available = true;\n  }\n\n  draw(order: DrawOrder) {\n    if (!this.available) throw new Error(\"Worker already busy\");\n    this.tile = order.tile;\n    this.available = false;\n    this.worker.postMessage(order, [order.tile.buffer.buffer]);\n  }\n\n  onmessage(event: any) {\n    const data: WorkerResponse = event.data;\n    this.tile.buffer = data.tile.buffer; // reassign the buffer to the original tile\n    this.available = true;\n    this.callback(this, data);\n  }\n}\n","import Worker from \"./worker\";\nimport { DrawOrder, WorkerResponse } from \"./types\";\nimport { Context } from \"../engine\";\nimport _ from \"lodash\";\n\n/*\nMaintains the list of webworkers.\nReceive list of orders from the renderer and dispatches them to the workers.\nCan be interrupted in the middle of a rendering.\nDeal with neutered arrays (arrays passed by reference between main thread and workers).\n*/\nexport default class Scheduler {\n  private scheduleId: number = 0;\n  private orders: DrawOrder[] = [];\n  private workers: Worker[] = [];\n  private upperCallback: (data: WorkerResponse) => void;\n  public handlers!: {\n    accept: () => any;\n    reject: (x: any) => any;\n  };\n\n  constructor(ctx: Context, callback: (data: WorkerResponse) => void) {\n    this.upperCallback = callback;\n    for (let i = 0; i < ctx.nbThreads; i += 1) {\n      const callback = this.onWorkerResponse.bind(this);\n      this.workers.push(new Worker(i, callback));\n    }\n    this.throttledSchedule = _.throttle(this.throttledSchedule.bind(this), 200);\n  }\n\n  private onWorkerResponse(worker: Worker, data: WorkerResponse) {\n    if (data.scheduleId === this.scheduleId) this.upperCallback(data);\n    const order = this.orders.shift();\n    if (order) worker.draw(order);\n    if (!this.isWorking) this.handlers.accept();\n  }\n\n  get availableWorkers() {\n    return this.workers.filter(w => w.available);\n  }\n\n  get busyWorkers() {\n    return this.workers.filter(w => !w.available);\n  }\n\n  get isWorking() {\n    return this.orders.length || this.busyWorkers.length;\n  }\n\n  private throttledSchedule(orders: DrawOrder[]) {\n    // store current draw orders, and assign one to each worker\n    this.orders = orders.map(o => ({ ...o, scheduleId: this.scheduleId }));\n    this.busyWorkers.forEach(w => w.cancel());\n    this.availableWorkers.forEach(w => {\n      const order = this.orders.shift();\n      if (order) w.draw(order);\n    });\n  }\n\n  // returns a pending promise that will be resolved by either\n  // - rejection if schedule is called before all orders have been handled\n  // - acception when everything has been settled\n  async schedule(orders: DrawOrder[]) {\n    // increase scheduleId to be able to reject outdated workers answering\n    this.scheduleId++;\n\n    // if we had previous orders, or busy workers, clear orders, reject\n    // previous promise\n    if (this.isWorking) {\n      this.orders = [];\n      if (this.handlers) this.handlers.reject(\"Scheduler interrupted\");\n    }\n\n    // throttle real work to avoid building/destroying webworkers too often\n    this.throttledSchedule(orders);\n\n    return new Promise((accept, reject) => {\n      this.handlers = { accept, reject };\n    });\n  }\n}\n","import Matrix from \"./math/matrix\";\nimport { Context } from \"./engine\";\n\nexport default class Redrawer {\n  private canvas: HTMLCanvasElement;\n  private offCanvas: HTMLCanvasElement;\n  private context: CanvasRenderingContext2D;\n  private lastId: number | null = null;\n  private lastType: string | null = null;\n  private lastMatrix: Matrix | null = null;\n\n  constructor(ctx: Context) {\n    this.canvas = ctx.canvas;\n    this.context = ctx.context;\n    this.offCanvas = document.createElement(\"canvas\");\n    this.offCanvas.width = this.canvas.width;\n    this.offCanvas.height = this.canvas.height;\n  }\n\n  redraw(newMatrix: Matrix, type: string, id: number) {\n    // if type has changed, don't redraw\n    if (this.lastType !== type) this.lastMatrix = null;\n    if (this.lastId === id) return;\n    let tileSorter;\n\n    if (this.lastMatrix) {\n      // compute movement matrix\n      const m = this.lastMatrix\n        .inverse()\n        .multiply(newMatrix)\n        .inverse();\n\n      // use movement to quickly redraw last picture at new position\n      const imageData = this.context.getImageData(\n        0,\n        0,\n        this.canvas.width,\n        this.canvas.height,\n      );\n      this.offCanvas.getContext(\"2d\")!.putImageData(imageData, 0, 0);\n      this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.context.transform(m.a, m.b, m.c, m.d, m.e, m.f);\n      this.context.drawImage(this.offCanvas, 0, 0);\n      this.context.setTransform(1, 0, 0, 1, 0, 0);\n\n      // use movement to infer an optimal redrawing order of tiles\n      // tiles are sorted according to their distance to the tileSorter x, y point\n      // compute invariant point\n      /* eslint-disable no-mixed-operators */\n      const x =\n        (m.c * m.f - m.d * m.e + m.e) / (m.a * m.d - m.a - m.b * m.c - m.d + 1);\n      const y =\n        (m.a * m.f - m.b * m.e - m.f) /\n        (m.a * -m.d + m.a + m.b * m.c + m.d - 1);\n      /* eslint-enable no-mixed-operators */\n\n      if (m.a > 1.001 && m.d > 1.001) {\n        tileSorter = { x, y, reverse: false };\n      } else if (m.a < 0.99 && m.d < 0.99) {\n        tileSorter = { x, y, reverse: true };\n      } else if (Math.abs(m.e) > 0.01 || Math.abs(m.f) > 0.01) {\n        tileSorter = {\n          x: this.canvas.width / 2,\n          y: this.canvas.height / 2,\n          reverse: true,\n        };\n        if (m.e < -0.01) tileSorter.x = 0;\n        if (m.e > 0.01) tileSorter.x = this.canvas.width;\n        if (m.f < -0.01) tileSorter.y = 0;\n        if (m.f > 0.01) tileSorter.y = this.canvas.height;\n      }\n    } else {\n      this.lastType = type;\n    }\n\n    this.lastId = id;\n    this.lastMatrix = newMatrix;\n    return tileSorter;\n  }\n}\n","import { FractalDef } from \"./fractals/example\";\n\n// @ts-ignore\nconst context = require.context(\"./fractals/\", true, /\\.([jt]s)$/);\n\nconst byId: { [key: string]: FractalDef } = {};\ncontext.keys().forEach((filename: string) => {\n  const obj = context(filename).default;\n  byId[obj.fractalId] = obj;\n});\n\nexport const getFunction = (id: string, smooth: boolean) => {\n  const res = byId[id];\n  if (smooth) return res.fn.smooth || res.fn.normal;\n  return res.fn.normal;\n};\n\nexport const getPreset = (fractalId: string) => {\n  const res = byId[fractalId];\n  return { fractalId, ...res.preset };\n};\n\nexport const listForUi = () =>\n  Object.values(byId)\n    .filter(f => !f.hidden)\n    .sort((a, b) => (a.uiOrder || 0) - (b.uiOrder || 0));\n","const defaults = {\n  nbTiles: 100,\n  supersampling: true,\n};\n\nconst debug = {\n  // nbTiles: 100,\n  // supersampling: false,\n};\n\nexport const param = { ...defaults, ...debug };\n","import { param } from \"../params\";\n\nlet id = 0;\n\nexport class Tile {\n  public readonly id: number;\n  public readonly x1: number;\n  public readonly x2: number;\n  public readonly y1: number;\n  public readonly y2: number;\n  public readonly x: number;\n  public readonly y: number;\n  public readonly width: number;\n  public readonly height: number;\n  public buffer: Float32Array;\n\n  constructor(x1: number, x2: number, y1: number, y2: number) {\n    this.id = id++;\n    this.x1 = x1;\n    this.x2 = x2;\n    this.y1 = y1;\n    this.y2 = y2;\n    this.x = (x1 + x2) / 2;\n    this.y = (y1 + y2) / 2;\n    this.width = x2 - x1 + 1;\n    this.height = y2 - y1 + 1;\n    this.buffer = new Float32Array(this.width * this.height);\n  }\n\n  static getTiling(width: number, height: number) {\n    // compute tiling\n    const nbTiles = param.nbTiles;\n    const ratio = width / height;\n    const nbY = Math.round(Math.sqrt(nbTiles / ratio));\n    const nbX = Math.round(Math.sqrt(nbTiles / ratio) * ratio);\n    console.log(\n      `Tiling [${width} x ${height}] with ${nbTiles} tiles --> `,\n      `[${nbX} * ${nbY}] = ${nbY * nbX} tiles of `,\n      `~ [${Math.round(width / nbX)} x ${Math.round(height / nbY)}]`,\n    );\n    // instanciate tiles\n    const res = [];\n    for (let j = 0; j < nbY; j += 1) {\n      for (let i = 0; i < nbX; i += 1) {\n        const x1 = Math.round((i * width) / nbX);\n        const x2 = Math.round(((i + 1) * width) / nbX) - 1;\n        const y1 = Math.round((j * height) / nbY);\n        const y2 = Math.round(((j + 1) * height) / nbY) - 1;\n        res.push(new Tile(x1, x2, y1, y2));\n      }\n    }\n    return res;\n  }\n}\n","import Scheduler from \"./scheduler/scheduler\";\nimport Redrawer from \"./redrawer\";\nimport { getFunction } from \"./fractals\";\nimport Painter from \"./painter\";\nimport Main, { Context } from \"./engine\";\nimport {\n  WorkerResponse,\n  DrawParams,\n  Model,\n  DrawOrder,\n} from \"./scheduler/types\";\nimport Vector from \"./math/vector\";\nimport { Tile } from \"./tile\";\n\nexport default class Renderer {\n  private readonly ctx: Context;\n\n  private painter: Painter;\n  private scheduler: Scheduler;\n  private redrawer: Redrawer;\n\n  private width!: number;\n  private height!: number;\n  private imageData!: ImageData;\n  private imageBuffer!: Uint32Array;\n\n  private tiles!: Tile[];\n\n  constructor(ctx: Context, painter: Painter, engine: Main) {\n    this.ctx = ctx;\n    this.resize();\n    this.callback = this.callback.bind(this);\n    this.scheduler = new Scheduler(ctx, this.callback);\n    this.painter = painter;\n    this.redrawer = new Redrawer(ctx);\n  }\n\n  resize() {\n    const canvas = this.ctx.canvas;\n    this.imageData = this.ctx.context.createImageData(\n      canvas.width,\n      canvas.height,\n    );\n    this.imageBuffer = new Uint32Array(this.imageData.data.buffer);\n    this.width = canvas.width;\n    this.height = canvas.height;\n    this.tiles = Tile.getTiling(this.width, this.height);\n  }\n\n  getIterationsAt(cpx: Vector) {\n    const func = getFunction(this.ctx.fractalId, this.ctx.smooth);\n    return func(cpx.x, cpx.y, this.ctx.iter);\n  }\n\n  getHistogram(): number[] {\n    const histogram = new Array(this.ctx.iter + 1).fill(0);\n    for (const tile of this.tiles) {\n      for (let i in tile.buffer) {\n        const val = Math.round(tile.buffer[i]);\n        if (val >= 0 && val <= this.ctx.iter) histogram[val] += 1;\n      }\n    }\n    return histogram;\n  }\n\n  // redraws the current float buffer\n  drawColor() {\n    this.ctx.event.notify(\"draw.redraw\", {});\n    this.tiles.forEach(tile => {\n      this.painter.paint(tile, this.imageBuffer, this.width);\n    });\n    this.ctx.context.putImageData(\n      this.imageData,\n      0,\n      0,\n      0,\n      0,\n      this.width,\n      this.height,\n    );\n  }\n\n  // performs a full draw: floatbuffer + colors\n  draw(params: DrawParams) {\n    this.ctx.event.notify(\"draw.start\", {});\n    const redraw = this.redrawer.redraw;\n    let tileSort: ReturnType<typeof redraw>;\n    if (this.redrawer)\n      tileSort = this.redrawer.redraw(\n        this.ctx.camera.matrix,\n        this.ctx.fractalId,\n        params.id || -1,\n      );\n    const workerModel: Model = Object.assign({}, this.ctx.camera.matrix, {\n      type: this.ctx.fractalId,\n      smooth: this.ctx.smooth,\n      iter: this.ctx.iter,\n    });\n    const orders: DrawOrder[] = this.tiles.map(tile => ({\n      action: \"draw\",\n      tile,\n      params,\n      model: workerModel,\n    }));\n    // if redrawer was able to find a tile sorting, sort them\n    if (tileSort) {\n      orders.forEach(t => {\n        t.dist = Math.sqrt(\n          (t.tile.x - tileSort!.x) ** 2 + (t.tile.y - tileSort!.y) ** 2,\n        );\n      });\n      orders.sort((a, b) =>\n        // @ts-ignore\n        tileSort!.reverse ? b.dist - a.dist : a.dist - b.dist,\n      );\n    }\n    const schedulerPromise = this.scheduler.schedule(orders); // .catch(() => {});\n    return schedulerPromise;\n  }\n\n  callback(data: WorkerResponse) {\n    if (data.action !== \"end-draw\") throw new Error();\n    const tile = data.tile;\n    this.painter.paint(tile, this.imageBuffer, this.width);\n    this.ctx.context.putImageData(\n      this.imageData,\n      0,\n      0,\n      tile.x1,\n      tile.y1,\n      tile.width,\n      tile.height,\n    );\n  }\n}\n","const standardGradients: { [key: number]: string } = {\n  0: \"0#080560;0.2#2969CB;0.40#F1FEFE;0.60#FCA425;0.85#000000\",\n  1: \"0.0775#78591e;0.55#d6e341\", // gold\n  2: \"0#0000FF;0.33#FFFFFF;0.66#FF0000\", // bleublancrouge\n  3: \"0.08#09353e;0.44#1fc3e6;0.77#08173e\", // night\n  4: \"0#000085;0.25#fffff5;0.5#ffb500;0.75#9c0000\", // defaultProps\n  5: \"0#000000;0.25#000000;0.5#7f7f7f;0.75#ffffff;0.975#ffffff\", // emboss\n  // flatUI palettes (http://designmodo.github.io/Flat-UI/)\n  10: \"0#000000;0.25#16A085;0.5#FFFFFF;0.75#16A085\", // green sea\n  11: \"0#000000;0.25#27AE60;0.5#FFFFFF;0.75#27AE60\", // nephritis\n  12: \"0#000000;0.25#2980B9;0.5#FFFFFF;0.75#2980B9\", // nephritis\n  13: \"0#000000;0.25#8E44AD;0.5#FFFFFF;0.75#8E44AD\", // wisteria\n  14: \"0#000000;0.25#2C3E50;0.5#FFFFFF;0.75#2C3E50\", // midnight blue\n  15: \"0#000000;0.25#F39C12;0.5#FFFFFF;0.75#F39C12\", // orange\n  16: \"0#000000;0.25#D35400;0.5#FFFFFF;0.75#D35400\", // pumpkin\n  17: \"0#000000;0.25#C0392B;0.5#FFFFFF;0.75#C0392B\", // pmoegranate\n  18: \"0#000000;0.25#BDC3C7;0.5#FFFFFF;0.75#BDC3C7\", // silver\n  19: \"0#000000;0.25#7F8C8D;0.5#FFFFFF;0.75#7F8C8D\", // asbestos\n};\n\n/*\n * Monotone cubic spline interpolation\n *     let f = createInterpolant([0, 1, 2, 3, 4], [0, 1, 4, 9, 16]);\n *     for (let x = 0; x <= 4; x += 0.1)\n *        let xSquared = f(x);\n * https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\nfunction createInterpolant(xs: number[], ys: number[]) {\n  let i,\n    length = xs.length;\n\n  // Deal with length issues\n  if (length !== ys.length) {\n    throw new Error(\"Need an equal count of xs and ys.\");\n  }\n  if (length === 0) {\n    return function(x: any) {\n      return 0;\n    };\n  }\n  if (length === 1) {\n    // Impl: Precomputing the result prevents problems if ys is mutated later and allows garbage collection of ys\n    // Impl: Unary plus properly converts values to numbers\n    const result = +ys[0];\n    return function(x: any) {\n      return result;\n    };\n  }\n\n  // Rearrange xs and ys so that xs is sorted\n  const indexes = [];\n  for (i = 0; i < length; i++) {\n    indexes.push(i);\n  }\n  indexes.sort((a, b) => (xs[a] < xs[b] ? -1 : 1));\n  let oldXs = xs,\n    oldYs = ys;\n  // Impl: Creating new arrays also prevents problems if the input arrays are mutated later\n  xs = [];\n  ys = [];\n  // Impl: Unary plus properly converts values to numbers\n  for (i = 0; i < length; i++) {\n    xs.push(+oldXs[indexes[i]]);\n    ys.push(+oldYs[indexes[i]]);\n  }\n\n  // Get consecutive differences and slopes\n  let dys = [],\n    dxs = [],\n    ms = [];\n  for (i = 0; i < length - 1; i++) {\n    let dx = xs[i + 1] - xs[i],\n      dy = ys[i + 1] - ys[i];\n    dxs.push(dx);\n    dys.push(dy);\n    ms.push(dy / dx);\n  }\n\n  // Get degree-1 coefficients\n  const c1s = [ms[0]];\n  for (i = 0; i < dxs.length - 1; i++) {\n    let m = ms[i],\n      mNext = ms[i + 1];\n    if (m * mNext <= 0) {\n      c1s.push(0);\n    } else {\n      let dx = dxs[i],\n        dxNext = dxs[i + 1],\n        common = dx + dxNext;\n      c1s.push((3 * common) / ((common + dxNext) / m + (common + dx) / mNext));\n    }\n  }\n  c1s.push(ms[ms.length - 1]);\n\n  // Get degree-2 and degree-3 coefficients\n  let cpx2scr: number[] = [],\n    c3s: number[] = [];\n  for (i = 0; i < c1s.length - 1; i++) {\n    let c1 = c1s[i],\n      m = ms[i],\n      invDx = 1 / dxs[i],\n      common = c1 + c1s[i + 1] - m - m;\n    cpx2scr.push((m - c1 - common) * invDx);\n    c3s.push(common * invDx * invDx);\n  }\n\n  // Return interpolant function\n  return function(x: number) {\n    // The rightmost point in the dataset should give an exact result\n    let i = xs.length - 1;\n    if (x === xs[i]) {\n      return ys[i];\n    }\n\n    // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n    let low = 0,\n      mid,\n      high = c3s.length - 1;\n    while (low <= high) {\n      mid = Math.floor(0.5 * (low + high));\n      const xHere = xs[mid];\n      if (xHere < x) {\n        low = mid + 1;\n      } else if (xHere > x) {\n        high = mid - 1;\n      } else {\n        return ys[mid];\n      }\n    }\n    i = Math.max(0, high);\n\n    // Interpolate\n    let diff = x - xs[i],\n      diffSq = diff * diff;\n    return ys[i] + c1s[i] * diff + cpx2scr[i] * diffSq + c3s[i] * diff * diffSq;\n  };\n}\n\nconst buildBufferFromStringGradient = (\n  resolution: number,\n  gradient: string,\n) => {\n  const indices: number[] = [];\n  const reds: number[] = [];\n  const greens: number[] = [];\n  const blues: number[] = [];\n\n  const buildStops = (str: string) => {\n    str.split(\";\").forEach(stop => {\n      const items = stop.split(\"#\");\n      indices.push(Number(items[0]));\n      reds.push(parseInt(items[1].substring(0, 2), 16));\n      greens.push(parseInt(items[1].substring(2, 4), 16));\n      blues.push(parseInt(items[1].substring(4, 6), 16));\n    });\n  };\n\n  const buffer = new Int32Array(resolution);\n  const buildBuffer = () => {\n    // loop first stop to end\n    indices.push(indices[0] + 1);\n    reds.push(reds[0]);\n    greens.push(greens[0]);\n    blues.push(blues[0]);\n\n    const interR = createInterpolant(indices, reds);\n    const interG = createInterpolant(indices, greens);\n    const interB = createInterpolant(indices, blues);\n\n    const byteBuffer = new Uint8Array(buffer.buffer); // create an 8-bit view on the buffer\n    let bufferIndex = 0;\n    for (let i = 0; i < resolution; i += 1) {\n      let floatIndex = i / resolution;\n      if (floatIndex < indices[0]) floatIndex += 1;\n      byteBuffer[bufferIndex + 0] = interR(floatIndex);\n      byteBuffer[bufferIndex + 1] = interG(floatIndex);\n      byteBuffer[bufferIndex + 2] = interB(floatIndex);\n      byteBuffer[bufferIndex + 3] = 255;\n      bufferIndex += 4;\n    }\n  };\n\n  buildStops(gradient);\n  buildBuffer();\n  return buffer;\n};\n\nexport const getBufferFromId = (id: number, res = 400) => {\n  return buildBufferFromStringGradient(res, standardGradients[id]);\n};\n","import { getBufferFromId } from \"../util/palette\";\nimport { Tile } from \"./tile\";\n\nexport interface PainterArgs {\n  offset: number;\n  density: number;\n  id: number;\n  fn: \"s\" | \"n\";\n}\n\nexport default class Painter {\n  public id: number = NaN;\n  public offset: number = 0;\n  public fn: string = \"s\";\n  public density: number = 0;\n  private resolution: number = 0;\n  private buffer: Int32Array = new Int32Array();\n\n  constructor(p: PainterArgs) {\n    this.set(p);\n  }\n\n  set(p: any) {\n    if (\"fn\" in p) this.fn = p.fn;\n    if (\"offset\" in p) this.offset = p.offset;\n    if (\"density\" in p) this.density = p.density;\n    if (this.id !== p.id) {\n      this.id = p.id;\n      this.buffer = getBufferFromId(p.id, 1000);\n      this.resolution = this.buffer.length;\n    }\n  }\n\n  // this function is not pure : it modifies buffer\n  // this function need maximum speed : it uses only vars\n  paint(tile: Tile, buffer: Uint32Array, width: number) {\n    var offset = this.offset * this.resolution;\n    var density = this.density,\n      resolution = this.resolution;\n    var cbuffer = this.buffer;\n    var tileIndex = 0;\n    var bufferIndex = 0;\n    var tx, ty, iter, color;\n\n    if (this.fn === \"s\") {\n      density = density * 7;\n      offset = ((this.offset + 0.85) % 1) * this.resolution;\n    }\n\n    for (ty = 0; ty < tile.height; ty += 1) {\n      bufferIndex = (ty + tile.y1) * width + tile.x1;\n      for (tx = 0; tx < tile.width; tx += 1) {\n        iter = tile.buffer[tileIndex];\n        if (iter === 0) {\n          color = 0xff000000;\n        } else {\n          if (this.fn === \"s\") {\n            iter = Math.sqrt(iter);\n          }\n          color = cbuffer[~~((iter * density + offset) % resolution)];\n        }\n        buffer[bufferIndex] = color;\n        tileIndex += 1;\n        bufferIndex += 1;\n      }\n    }\n  }\n}\n","export default class Vector {\n  public readonly x: number;\n  public readonly y: number;\n\n  constructor(x: Vector | number, y?: number) {\n    if (x instanceof Vector) {\n      this.x = x.x;\n      this.y = x.y;\n    } else {\n      this.x = x;\n      this.y = y as number;\n    }\n  }\n\n  midPoint(v2: Vector) {\n    return new Vector((v2.x + this.x) / 2, (v2.y + this.y) / 2);\n  }\n\n  minus(v: Vector) {\n    return new Vector(this.x - v.x, this.y - v.y);\n  }\n\n  plus(v: Vector) {\n    return new Vector(this.x + v.x, this.y + v.y);\n  }\n\n  distanceTo(v: Vector) {\n    const dx = this.x - v.x;\n    const dy = this.y - v.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  times(v: Vector | number) {\n    return v instanceof Vector\n      ? new Vector(this.x * v.x, this.y * v.y)\n      : new Vector(this.x * v, this.y * v);\n  }\n\n  minVal() {\n    return Math.min(this.x, this.y);\n  }\n}\n","import Vector from \"./vector\";\n\nexport type RawMatrix = {\n  a: number;\n  b: number;\n  c: number;\n  d: number;\n  e: number;\n  f: number;\n};\n\nexport default class Matrix {\n  public static readonly identity = new Matrix(1, 0, 0, 1, 0, 0);\n\n  constructor(\n    public readonly a: number,\n    public readonly b: number,\n    public readonly c: number,\n    public readonly d: number,\n    public readonly e: number,\n    public readonly f: number,\n  ) {}\n\n  static fromRaw(raw: RawMatrix) {\n    return new Matrix(raw.a, raw.b, raw.c, raw.d, raw.e, raw.f);\n  }\n\n  transform(v: Vector) {\n    return new Vector(\n      v.x * this.a + v.y * this.c + this.e,\n      v.x * this.b + v.y * this.d + this.f,\n    );\n  }\n\n  isIdentity() {\n    return (\n      this.a === 1 &&\n      this.b === 0 &&\n      this.c === 0 &&\n      this.d === 1 &&\n      this.e === 0 &&\n      this.f === 0\n    );\n  }\n\n  private isInvertible() {\n    const deter = this.a * this.d - this.b * this.c;\n    return Math.abs(deter) > 1e-15;\n  }\n\n  inverse() {\n    if (!this.isInvertible()) {\n      return this.inverseGaussJordan();\n    }\n    const dt = this.a * this.d - this.b * this.c;\n    return new Matrix(\n      this.d / dt,\n      -this.b / dt,\n      -this.c / dt,\n      this.a / dt,\n      (this.c * this.f - this.d * this.e) / dt,\n      -(this.a * this.f - this.b * this.e) / dt,\n    );\n  }\n\n  multiply(o: Matrix) {\n    return new Matrix(\n      this.a * o.a + this.c * o.b,\n      this.b * o.a + this.d * o.b,\n      this.a * o.c + this.c * o.d,\n      this.b * o.c + this.d * o.d,\n      this.a * o.e + this.c * o.f + this.e,\n      this.b * o.e + this.d * o.f + this.f,\n    );\n  }\n\n  private inverseGaussJordan() {\n    function gje(M: any, c1i: any, c2i: any, f: any) {\n      const c1 = M[c1i];\n      const c2 = M[c2i];\n      for (let i = 0; i < 6; i++) {\n        c1[i] += c2[i] * f;\n      }\n    }\n\n    function gjet(M: any, c1i: any, f: any) {\n      const c1 = M[c1i];\n      for (let i = 0; i < 6; i++) {\n        c1[i] *= f;\n      }\n    }\n    const M = [\n      [this.a, this.c, this.e, 1, 0, 0],\n      [this.b, this.d, this.f, 0, 1, 0],\n      [0, 0, 1, 0, 0, 1],\n    ];\n    gje(M, 1, 2, -M[1][2]); // c2 = c2 + c3 * -f\n    gje(M, 0, 2, -M[0][2]); // c1 = c1 + c3 * -e\n    gje(M, 1, 0, -M[1][0] / M[0][0]);\n    gje(M, 0, 1, -M[0][1] / M[1][1]);\n    gjet(M, 0, 1 / M[0][0]);\n    gjet(M, 1, 1 / M[1][1]);\n    return new Matrix(M[0][3], M[1][3], M[0][4], M[1][4], M[0][5], M[1][5]);\n  }\n\n  toString() {\n    return `${this.a} ${this.c} ${this.e}\\n${this.b} ${this.d} ${this.f}\\n0 0 1`;\n  }\n\n  // prettier-ignore\n  static GetTriangleToTriangle(\n    t1px: number, t1py: number, t1qx: number, t1qy: number, t1rx: number, t1ry: number,\n    t2px: number, t2py: number, t2qx: number, t2qy: number, t2rx: number, t2ry: number\n  ) {\n    const STD2T1 = new Matrix(t1px - t1rx, t1py - t1ry, t1qx - t1rx, t1qy - t1ry, t1rx, t1ry);\n    const STD2T2 = new Matrix(t2px - t2rx, t2py - t2ry, t2qx - t2rx, t2qy - t2ry, t2rx, t2ry);\n    const T12STD = STD2T1.inverse();\n    return STD2T2.multiply(T12STD);\n  }\n\n  static GetRotationMatrix(angle: number) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    return new Matrix(cos, sin, -sin, cos, 0, 0);\n  }\n\n  static GetScaleMatrix(x: number, y: number) {\n    return new Matrix(x, 0, 0, y, 0, 0);\n  }\n\n  static GetShearMatrix(x: number, y: number) {\n    return new Matrix(1, y, x, 1, 0, 0);\n  }\n}\n","import Matrix from \"./matrix\";\nimport Vector from \"./vector\";\n\n// prettier-ignore\nconst getSquareToComplexMatrix = (x: number, y: number, w: number) =>\n  Matrix.GetTriangleToTriangle(\n    1, 0, 0, 1, 0, 0,\n    x + w / 2, y, x, y + w / 2, x, y);\n\nexport type AffineTransform = \"rotation\" | \"scale\" | \"shear\";\n\nconst getScreenToSquareMatrix = (\n  viewportTransform: Matrix,\n  width: number,\n  height: number,\n) => {\n  const p = viewportTransform.transform(new Vector(1, -1));\n  const q = viewportTransform.transform(new Vector(-1, 1));\n  const r = viewportTransform.transform(new Vector(-1, -1));\n  if (width >= height) {\n    const x1 = (width - height) / 2;\n    const x2 = x1 + height;\n    // prettier-ignore\n    return Matrix.GetTriangleToTriangle(\n      x2, height, x1, 0, x1, height,\n      p.x, p.y, q.x, q.y, r.x, r.y);\n  } else {\n    const y1 = (height - width) / 2;\n    const y2 = y1 + width;\n    // prettier-ignore\n    return Matrix.GetTriangleToTriangle(\n      width, y2, 0, y1, 0, y2,\n      p.x, p.y, q.x, q.y, r.x, r.y);\n  }\n};\n\nconst limit = 7e-16;\n\n// The camera projects view space on complex space and vice-verse.\n// The \"square\" or Q is the maximum centered square that can be inscribed in the view.\n// X and Y are the complex coordinates @ the center of the view\n// W is the complex size of the square\n// A viewport affine transformation can be applied on the square to rotate/scale/shear the view\nexport default class Camera {\n  public matrix_inv: Matrix;\n  public matrix: Matrix;\n  public viewportMatrix: Matrix;\n  public screen: Vector;\n  public resolutionLimit: number;\n  public pos: Vector;\n  public w: number;\n\n  constructor(\n    screenSize: Vector,\n    pos: Vector,\n    w: number,\n    viewportMatrix = Matrix.identity,\n  ) {\n    this.viewportMatrix = viewportMatrix;\n    this.screen = screenSize;\n    const extent = screenSize.minVal();\n    this.resolutionLimit = extent * limit;\n    this.pos = pos;\n    this.w = w;\n    this.matrix = Matrix.identity;\n    this.matrix_inv = Matrix.identity;\n    this.reproject();\n  }\n\n  reproject() {\n    this.w = Math.max(this.w, this.resolutionLimit);\n    const S2Q = getScreenToSquareMatrix(\n      this.viewportMatrix,\n      this.screen.x,\n      this.screen.y,\n    );\n    const Q2C = getSquareToComplexMatrix(this.pos.x, this.pos.y, this.w);\n    this.matrix = Q2C.multiply(S2Q);\n    this.matrix_inv = this.matrix.inverse();\n  }\n\n  clone() {\n    return new Camera(this.screen, this.pos, this.w, this.viewportMatrix);\n  }\n\n  scr2cpx(v: Vector) {\n    return this.matrix.transform(v);\n  }\n\n  cpx2scr(v: Vector) {\n    return this.matrix_inv.transform(v);\n  }\n\n  getPos() {\n    return this.pos;\n  }\n\n  setPos(pos: Vector, w?: number) {\n    this.pos = pos;\n    if (w) this.w = w;\n  }\n\n  resize(width: number, height: number) {\n    this.screen = new Vector(width, height);\n    const extent = Math.min(width, height); // extent of the min square\n    this.resolutionLimit = extent * limit;\n    this.reproject();\n  }\n\n  isZoomLimit() {\n    return this.w <= this.resolutionLimit;\n  }\n}\n","/* global navigator */\nimport EventBus from \"../util/EventBus\";\nimport Renderer from \"./renderer\";\nimport Painter, { PainterArgs } from \"./painter\";\nimport Camera from \"./math/camera\";\nimport Vector from \"./math/vector\";\nimport { DrawParams } from \"./scheduler/types\";\nimport Matrix, { RawMatrix } from \"./math/matrix\";\n\nexport interface Context {\n  readonly canvas: HTMLCanvasElement;\n  readonly context: CanvasRenderingContext2D;\n  readonly event: EventBus;\n  readonly nbThreads: number;\n  readonly camera: Camera;\n  smooth: boolean;\n  iter: number;\n  fractalId: string;\n}\n\ninterface Params {\n  fractalId: string;\n  smooth: boolean;\n  iter: number;\n  x: number;\n  y: number;\n  w: number;\n  painter: PainterArgs;\n  viewport: RawMatrix;\n}\n\nexport default class Engine {\n  public readonly ctx: Context;\n  public readonly painter: Painter;\n\n  private renderer: Renderer;\n  private paramsFetcher: () => Params;\n\n  constructor(canvas: HTMLCanvasElement, paramsFetcher: () => Params) {\n    this.paramsFetcher = paramsFetcher;\n    const params = paramsFetcher();\n    let nbThreads = navigator.hardwareConcurrency || 4;\n    if (nbThreads >= 6) nbThreads--; // sacrifice a thread for responsiveness if we have enough\n    this.ctx = {\n      // readonly\n      canvas: canvas,\n      context: canvas.getContext(\"2d\") as CanvasRenderingContext2D,\n      nbThreads,\n      event: new EventBus(),\n      camera: new Camera(\n        new Vector(canvas.width, canvas.height),\n        new Vector(params.x, params.y),\n        params.w,\n        Matrix.fromRaw(params.viewport),\n      ),\n      // changeable\n      smooth: params.smooth,\n      iter: params.iter,\n      fractalId: params.fractalId,\n    };\n    this.painter = new Painter(params.painter);\n    this.renderer = new Renderer(this.ctx, this.painter, this);\n  }\n\n  get canvas() {\n    return this.ctx.canvas;\n  }\n\n  private fetchParams() {\n    const params = this.paramsFetcher();\n    this.ctx.fractalId = params.fractalId;\n    this.ctx.smooth = params.smooth;\n    this.ctx.iter = params.iter;\n    this.painter.set({\n      offset: params.painter.offset,\n      density: params.painter.density,\n      id: params.painter.id,\n      fn: params.painter.fn,\n    });\n    // update camera\n    const cam = this.ctx.camera;\n    cam.setPos(new Vector(params.x, params.y), params.w);\n    cam.viewportMatrix = Matrix.fromRaw(params.viewport);\n    cam.reproject();\n  }\n\n  async draw(drawParams?: DrawParams) {\n    this.fetchParams();\n    if (!drawParams) drawParams = { details: \"normal\" };\n    const start = new Date().getTime();\n    const res = await this.renderer.draw(drawParams);\n    const end = new Date().getTime();\n    const time = end - start;\n    console.log(`Frame '${drawParams.details}' drawn in ${time}ms`);\n    return res;\n  }\n\n  drawColor() {\n    this.fetchParams();\n    this.renderer.drawColor();\n  }\n\n  resize(width: number, height: number) {\n    this.ctx.camera.resize(width, height);\n    this.renderer.resize();\n  }\n\n  getHistogram() {\n    return this.renderer.getHistogram();\n  }\n\n  getIterationsAt(cpx: Vector) {\n    return this.renderer.getIterationsAt(cpx);\n  }\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst ui = createSlice({\n  name: \"set\",\n  initialState: {\n    fractalId: \"mandelbrot\",\n    smooth: true,\n    x: 0,\n    y: 0,\n    w: 0,\n    iter: 0,\n    viewport: {\n      a: 1,\n      b: 0,\n      c: 0,\n      d: 1,\n      e: 0,\n      f: 0,\n    },\n  },\n  reducers: {\n    setSet: (state, action) => action.payload,\n    updateSet: (state, action) => ({ ...state, ...action.payload }),\n  },\n});\n\nexport const { reducer, actions } = ui;\nexport const { setSet, updateSet } = actions;\n","const map: { [key: string]: number } = {\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  \"+\": 107,\n  \"-\": 109,\n  esc: 27,\n  A: 65,\n  B: 66,\n  C: 67,\n  D: 68,\n  E: 69,\n  F: 70,\n  G: 71,\n  H: 72,\n  I: 73,\n  J: 74,\n  K: 75,\n  L: 76,\n  M: 77,\n  N: 78,\n  O: 79,\n  P: 80,\n  Q: 81,\n  R: 82,\n  S: 83,\n  T: 84,\n  U: 85,\n  V: 86,\n  W: 87,\n  X: 88,\n  Y: 89,\n  Z: 90,\n};\n\ntype Callback = (mod: number) => void;\ninterface Binding {\n  combo: number[];\n  func: Callback;\n}\n\nconst keymap: boolean[] = [];\nconst bindings: Binding[] = [];\n\ndocument.addEventListener(\"keyup\", evt => {\n  keymap[evt.keyCode] = false;\n});\n\ndocument.addEventListener(\"keydown\", evt => {\n  keymap[evt.keyCode] = true;\n  const modifier = evt.shiftKey ? 1 / 10 : 1;\n  for (const binding of bindings) {\n    const match = binding.combo.every(k => keymap[k]);\n    if (match) {\n      binding.func(modifier);\n      return;\n    }\n  }\n});\n\nexport const bindKeys = (keysStr: string, func: Callback) => {\n  const keys = keysStr.split(\" \");\n  const keycodes: number[] = [];\n  for (const key of keys) {\n    if (!(key in map)) throw new Error(`Unknown key${key}`);\n    keycodes.push(map[key]);\n  }\n  bindings.push({ combo: keycodes, func });\n  bindings.sort((a, b) => b.combo.length - a.combo.length);\n};\n","import Vector from \"../engine/math/vector\";\nimport Camera, { AffineTransform } from \"../engine/math/camera\";\nimport { Dispatch } from \"@reduxjs/toolkit\";\nimport {\n  changeXY,\n  viewportReset,\n  viewportTransform,\n  toggleGuide,\n} from \"./rdxengine\";\nimport Hammer from \"hammerjs\";\nimport Matrix from \"../engine/math/matrix\";\nimport { bindKeys } from \"../util/keybinder\";\nimport Engine from \"../engine/engine\";\n\nconst ZOOM = 1.3;\nconst ZOOM_TAP = 2.5;\nconst PAN = 0.1;\nconst SCALE = 0.1; // 1+\nconst SHEAR = 0.1;\nconst ANGLE = Math.PI / 18;\n\nexport default class Controller {\n  private engine: Engine;\n  private camera: Camera;\n\n  constructor(engine: Engine, private dispatch: Dispatch<any>) {\n    this.engine = engine;\n    this.camera = engine.ctx.camera;\n    this.setupKeyboard();\n    this.setupMouse();\n    this.setupTouch();\n  }\n\n  // pan the screen by the given vector (as a ratio of its size)\n  pan(scr_vector_delta: Vector) {\n    const cam = this.camera;\n    const scr_vector = cam.screen.times(scr_vector_delta);\n    const cpx_point_0 = cam.scr2cpx(new Vector(0, 0));\n    const cpx_point_dest = cam.scr2cpx(scr_vector);\n    const cpx_vector = cpx_point_0.minus(cpx_point_dest);\n    const cpx_new_point = cam.getPos().plus(cpx_vector);\n    this.dispatch(changeXY(cpx_new_point));\n  }\n\n  // transforms the current viewport\n  viewportTransform(type: AffineTransform, valuex: number, valuey?: number) {\n    this.dispatch(viewportTransform(type, valuex, valuey));\n  }\n\n  // zoom the screen at the given screen point, using the given delta ratio\n  zoom(delta: number, scr_point_arg?: Vector) {\n    const cam = this.camera;\n    if (delta < 1 && cam.isZoomLimit()) {\n      this.engine.ctx.event.notify(\"zoom.limit\");\n      return;\n    }\n    // zoom @ center of screen by default\n    const scr_point = scr_point_arg || cam.screen.times(0.5);\n    const cpx_point = cam.scr2cpx(scr_point);\n    const cpx_center = cam.getPos();\n    // complex vector from point to view center\n    const cpx_vector = cpx_center.minus(cpx_point);\n    // scale vector and compute new center\n    const cpx_new_point = cpx_point.plus(cpx_vector.times(delta));\n    this.dispatch(changeXY(cpx_new_point, cam.w * delta));\n  }\n\n  setupKeyboard() {\n    bindKeys(\"up\", (Î”: number) => this.pan(new Vector(0, PAN * Î”)));\n    bindKeys(\"down\", (Î”: number) => this.pan(new Vector(0, -PAN * Î”)));\n    bindKeys(\"right\", (Î”: number) => this.pan(new Vector(-PAN * Î”, 0)));\n    bindKeys(\"left\", (Î”: number) => this.pan(new Vector(PAN * Î”, 0)));\n    bindKeys(\"+\", (Î”: number) => this.zoom(1 / ((ZOOM - 1) * Î” + 1)));\n    bindKeys(\"-\", (Î”: number) => this.zoom((ZOOM - 1) * Î” + 1));\n    bindKeys(\"V\", () => this.dispatch(viewportReset()));\n    bindKeys(\"R left\", (Î”: number) =>\n      this.viewportTransform(\"rotation\", -ANGLE * Î”),\n    );\n    bindKeys(\"R right\", (Î”: number) =>\n      this.viewportTransform(\"rotation\", +ANGLE * Î”),\n    );\n    bindKeys(\"S right\", (Î”: number) =>\n      this.viewportTransform(\"scale\", 1 / (1 + SCALE * Î”), 1),\n    );\n    bindKeys(\"S left\", (Î”: number) =>\n      this.viewportTransform(\"scale\", 1 + SCALE * Î”, 1),\n    );\n    bindKeys(\"S up\", (Î”: number) =>\n      this.viewportTransform(\"scale\", 1, 1 / (1 + SCALE * Î”)),\n    );\n    bindKeys(\"S down\", (Î”: number) =>\n      this.viewportTransform(\"scale\", 1, 1 + SCALE * Î”),\n    );\n    bindKeys(\"H right\", (Î”: number) =>\n      this.viewportTransform(\"shear\", -SHEAR * Î”, 0),\n    );\n    bindKeys(\"H left\", (Î”: number) =>\n      this.viewportTransform(\"shear\", SHEAR * Î”, 0),\n    );\n    bindKeys(\"H up\", (Î”: number) =>\n      this.viewportTransform(\"shear\", 0, -SHEAR * Î”),\n    );\n    bindKeys(\"H down\", (Î”: number) =>\n      this.viewportTransform(\"shear\", 0, SHEAR * Î”),\n    );\n    bindKeys(\"G\", () => this.dispatch(toggleGuide()));\n  }\n\n  setupTouch() {\n    var hammer = new Hammer(this.engine.canvas, {});\n    let isDragging = false;\n    let dragStart: Vector;\n    let cameraStart: Camera;\n\n    hammer.get(\"pan\").set({\n      direction: Hammer.DIRECTION_ALL,\n      threshold: 1,\n    });\n    hammer.get(\"pinch\").set({\n      enable: true,\n    });\n\n    hammer.on(\"doubletap\", evt => {\n      const pos = new Vector(evt.center.x, evt.center.y);\n      this.zoom(1 / ZOOM_TAP, new Vector(pos));\n    });\n\n    hammer.on(\"panstart\", evt => {\n      isDragging = true;\n      dragStart = new Vector(evt.center.x, evt.center.y);\n      cameraStart = this.camera.clone();\n    });\n\n    hammer.on(\"panend\", evt => {\n      isDragging = false;\n    });\n\n    hammer.on(\"panmove\", evt => {\n      if (isDragging) {\n        const pos = new Vector(evt.center.x, evt.center.y);\n        const scr_vector = pos.minus(dragStart);\n        const cpx_point_0 = cameraStart.scr2cpx(new Vector(0, 0));\n        const cpx_point_dest = cameraStart.scr2cpx(scr_vector);\n        const cpx_vector = cpx_point_dest.minus(cpx_point_0);\n        const cpx_new = cameraStart.getPos().minus(cpx_vector);\n        this.dispatch(changeXY(cpx_new));\n      }\n    });\n\n    var isPinching = false;\n    let pinchStart: Vector;\n\n    hammer.on(\"pinchstart\", ev => {\n      console.log(\"pinchstart\");\n      isPinching = true;\n      pinchStart = new Vector(ev.center.x, ev.center.y);\n      cameraStart = this.camera.clone();\n    });\n\n    hammer.on(\"pinchend\", function (ev) {\n      console.log(\"pinchend\");\n      isPinching = false;\n    });\n\n    hammer.on(\"pinch\", ev => {\n      if (isPinching) {\n        // compute matrix that transforms an original triangle to the transformed triangle\n        var pc1 = cameraStart.scr2cpx(pinchStart);\n        var pc2 = cameraStart.scr2cpx(new Vector(ev.center.x, ev.center.y));\n        var m = Matrix.GetTriangleToTriangle(\n          pc1.x,\n          pc1.y,\n          pc1.x + 1,\n          pc1.y,\n          pc1.x,\n          pc1.y + 1,\n          pc2.x,\n          pc2.y,\n          pc2.x + ev.scale,\n          pc2.y,\n          pc2.x,\n          pc2.y + ev.scale,\n        );\n\n        // apply inverse of this matrix to starting point\n        var pc0A = m.inverse().transform(cameraStart.pos);\n\n        let z = cameraStart.w / m.a;\n        if (z < this.camera.resolutionLimit) {\n          this.engine.ctx.event.notify(\"zoom.limit\");\n          z = this.camera.resolutionLimit;\n        }\n        this.dispatch(changeXY(pc0A, z));\n      }\n    });\n  }\n\n  setupMouse() {\n    const canvas = this.engine.canvas;\n\n    // disable mouse pan because it is handled by hammer\n    // let isDragging = false;\n    // let dragStart: Vector;\n    // let cameraStart: Camera;\n\n    // canvas.addEventListener(\"mousedown\", (e: MouseEvent) => {\n    //   const evt = e || window.event;\n    //   if (evt.button !== 0) return;\n    //   isDragging = true;\n    //   dragStart = new Vector(evt.screenX, evt.screenY);\n    //   cameraStart = this.camera.clone();\n    // });\n\n    // window.addEventListener(\"mouseup\", () => {\n    //   isDragging = false;\n    // });\n\n    // window.addEventListener(\"mousemove\", e => {\n    //   const evt = e || window.event;\n    //   if (isDragging) {\n    //     console.log(\"mousemove\", e);\n    //     const pos = new Vector(evt.screenX, evt.screenY);\n    //     const scr_vector = pos.minus(dragStart);\n    //     const cpx_point_0 = cameraStart.scr2cpx(new Vector(0, 0));\n    //     const cpx_point_dest = cameraStart.scr2cpx(scr_vector);\n    //     const cpx_vector = cpx_point_dest.minus(cpx_point_0);\n    //     const cpx_new = cameraStart.getPos().minus(cpx_vector);\n    //     this.dispatch(changeXY(cpx_new));\n    //   }\n    // });\n\n    const wheelFunction = (e: WheelEvent) => {\n      const evt = e || window.event;\n      evt.preventDefault();\n      const Î” = evt.shiftKey ? 1 / 10 : 1;\n      let delta = evt.deltaY;\n      delta = delta > 0 ? (ZOOM - 1) * Î” + 1 : 1 / ((ZOOM - 1) * Î” + 1);\n      const point = new Vector(evt.offsetX, evt.offsetY);\n      this.zoom(delta, point);\n    };\n\n    canvas.addEventListener(\"wheel\", wheelFunction);\n  }\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { PainterArgs } from \"../engine/painter\";\n\nconst ui = createSlice({\n  name: \"colors\",\n  initialState: {\n    offset: 0,\n    id: 0,\n    density: 20, // 0.05 - 20\n    fn: \"s\",\n  } as PainterArgs,\n  reducers: {\n    setColorId: (state, action) => ({ ...state, id: action.payload }),\n    setOffset: (state, action) => ({ ...state, offset: action.payload }),\n    setDensity: (state, action) => ({ ...state, density: action.payload }),\n    setPaint: (state, action) => ({ ...state, ...action.payload }),\n  },\n});\n\nexport const { reducer, actions } = ui;\nexport const { setOffset, setColorId, setDensity, setPaint } = actions;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst ui = createSlice({\n  name: \"ui\",\n  initialState: {\n    active: true,\n    x: 0,\n    y: 0,\n  },\n  reducers: {\n    setGuide: (state, action) => ({ ...state, ...action.payload }),\n  },\n});\n\nexport const { reducer, actions } = ui;\nexport const { setGuide } = actions;\n","import Matrix, { RawMatrix } from \"../engine/math/matrix\";\nimport { Dispatch } from \"@reduxjs/toolkit\";\nimport { setOffset, setDensity, setColorId } from \"./colors\";\nimport { setSet } from \"./set\";\nimport { getPreset } from \"../engine/fractals\";\nimport { PainterArgs } from \"../engine/painter\";\nimport { Root } from \"./reducer\";\nimport { setGuide } from \"./guide\";\n\ninterface UrlOutputObject {\n  painter: PainterArgs;\n  guide: {\n    active: boolean;\n    x: number;\n    y: number;\n  };\n  desc: {\n    x: number;\n    y: number;\n    w: number;\n    iter: number;\n    fractalId: string;\n    smooth: boolean;\n    viewport: RawMatrix;\n  };\n}\n\nconst defaults: any = {\n  t: \"mandelbrot\",\n  i: \"50\",\n  fs: \"1\",\n  ct: \"0\",\n  co: \"0\",\n  cd: \"20\",\n  cf: \"n\",\n  va: \"1.0000\",\n  vb: \"0.0000\",\n  vc: \"0.0000\",\n  vd: \"1.0000\",\n};\n\nexport const update = (root: Root) => {\n  try {\n    const args: any = {};\n    // engine\n    args.t = root.set.fractalId;\n    args.x = root.set.x;\n    args.y = root.set.y;\n    args.w = root.set.w;\n    args.i = String(root.set.iter);\n    args.fs = root.set.smooth ? \"1\" : \"0\";\n    // painter\n    args.ct = String(root.colors.id);\n    args.co = String(Math.round(root.colors.offset * 100));\n    args.cd = String(+root.colors.density.toFixed(2));\n    args.cf = root.colors.fn;\n    // viewport matrix\n    args.va = root.set.viewport.a.toFixed(4);\n    args.vb = root.set.viewport.b.toFixed(4);\n    args.vc = root.set.viewport.c.toFixed(4);\n    args.vd = root.set.viewport.d.toFixed(4);\n    // guide\n    if (root.guide.active) {\n      args.gx = root.guide.x;\n      args.gy = root.guide.y;\n    }\n    // remove args with default values\n    for (let key in args) if (args[key] === defaults[key]) delete args[key];\n    // build url\n    const str = Object.entries(args)\n      .map(([k, v]) => `${k}_${v}`)\n      .join(\"&\");\n    window.history.replaceState(\"\", \"\", `#B${str}`);\n  } catch (e) {\n    console.error(\"Could not set URL\", e);\n  }\n};\n\nfunction readCurrentScheme(url: string): UrlOutputObject {\n  // parse url\n  const str = url.substr(2);\n  const rawArgs: any = str.split(\"&\").reduce((acc, tuple) => {\n    const parts = tuple.split(\"_\");\n    return Object.assign(acc, { [parts[0]]: parts[1] });\n  }, {});\n  // add default arguments\n  const args = { ...defaults, ...rawArgs };\n  // build objet\n  const desc = {\n    x: parseFloat(args.x),\n    y: parseFloat(args.y),\n    w: parseFloat(args.w),\n    iter: parseInt(args.i),\n    fractalId: args.t,\n    smooth: parseInt(args.fs) === 1,\n    viewport: { ...Matrix.identity },\n  };\n  desc.viewport = {\n    a: parseFloat(args.va),\n    b: parseFloat(args.vb),\n    c: parseFloat(args.vc),\n    d: parseFloat(args.vd),\n    e: 0,\n    f: 0,\n  };\n  const painter = {\n    offset: parseInt(args.co) / 100.0,\n    density: parseFloat(args.cd),\n    id: parseInt(args.ct, 10),\n    fn: args.cf,\n  };\n  let guide = { active: false, x: 0, y: 0 };\n  if (\"gx\" in args)\n    guide = { active: true, x: parseFloat(args.gx), y: parseFloat(args.gy) };\n  return { desc, painter, guide };\n}\n\nexport const read = (): UrlOutputObject | null => {\n  try {\n    const url = document.location.hash;\n    if (url.startsWith(\"#B\")) {\n      return readCurrentScheme(url);\n    }\n  } catch (e) {\n    console.error(\"Could not read URL\", e);\n  }\n  return null;\n};\n\nexport const readInit = (dispatch: Dispatch<any>, forceCold = false): void => {\n  const urlData = read();\n  if (!urlData || forceCold) {\n    // coldstart\n    let desc = {\n      ...getPreset(\"mandelbrot\"),\n      smooth: true,\n      viewport: { ...Matrix.identity },\n    };\n    let painter = { offset: 0, density: 20, id: 0, fn: \"s\" };\n    dispatch(setSet(desc));\n    dispatch(setColorId(painter.id));\n    dispatch(setOffset(0));\n    dispatch(setDensity(20));\n  } else {\n    const { desc, painter, guide } = urlData;\n    dispatch(setSet(desc));\n    dispatch(setGuide(guide));\n    dispatch(setColorId(painter.id));\n    dispatch(setOffset(painter.offset));\n    dispatch(setDensity(painter.density));\n  }\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\n\ntype Tab = \"settings\" | \"fractal\" | \"palette\" | \"about\" | \"social\" | \"debug\";\ninterface Int {\n  drawer: boolean;\n  infobox: boolean;\n  mouseOnCanvas: boolean;\n  narrowDevice: boolean; // less than 450 px\n  tab: Tab;\n  snack?: string;\n  square: boolean; // should a square layer be displayed ('s' key)\n  showPois: boolean;\n  screen: {\n    width: number;\n    height: number;\n    min: number;\n  };\n  mouse: {\n    x: number;\n    y: number;\n    iter: number;\n  };\n}\n\nconst ui = createSlice({\n  name: \"ui\",\n  initialState: {\n    drawer: false,\n    mouseOnCanvas: false,\n    tab: \"fractal\",\n    infobox: false,\n    square: false,\n    showPois: true,\n    mouse: { x: 0, y: 0, iter: 0 },\n    narrowDevice: false,\n    orientableDevice: false,\n    screen: { width: 0, height: 0, min: 0 },\n  } as Int,\n  reducers: {\n    setUi: (state, action) => ({ ...state, ...action.payload }),\n    toggleSquare: state => ({ ...state, square: !state.square }),\n    setDrawer: (state, action) => ({ ...state, drawer: action.payload }),\n    setTab: (state, action) => ({ ...state, tab: action.payload }),\n    setScreenSize: (state, action) => {\n      const res = { ...state, screen: action.payload };\n      res.screen.min = Math.min(res.screen.width, res.screen.height);\n      return res;\n    },\n    setInfobox: (state, action) => ({ ...state, infobox: action.payload }),\n    setMouseOnCanvas: (state, action) => ({\n      ...state,\n      mouseOnCanvas: action.payload,\n    }),\n    setMouseInfo: (state, action) => ({ ...state, mouse: action.payload }),\n    setNarrowDevice: (state, action) => ({\n      ...state,\n      narrowDevice: action.payload,\n    }),\n    setSnack: (state, action) => ({ ...state, snack: action.payload }),\n  },\n});\n\nexport const { reducer, actions } = ui;\nexport const {\n  setUi,\n  setDrawer,\n  setTab,\n  setInfobox,\n  setMouseOnCanvas,\n  setMouseInfo,\n  setSnack,\n  setNarrowDevice,\n  toggleSquare,\n  setScreenSize,\n} = actions;\n","import Engine from \"./engine\";\nimport Vector from \"./math/vector\";\nimport { Root } from \"../redux/reducer\";\n\nconst cross = (pos: Vector, context: CanvasRenderingContext2D) => {\n  const size = 20;\n  context.beginPath();\n  context.moveTo(pos.x - size, pos.y);\n  context.lineTo(pos.x + size, pos.y);\n  context.moveTo(pos.x, pos.y - size);\n  context.lineTo(pos.x, pos.y + size);\n  context.stroke();\n};\n\nexport default class Guide {\n  private context: CanvasRenderingContext2D;\n\n  constructor(\n    public canvas: HTMLCanvasElement,\n    private engine: Engine,\n    private getState: () => Root,\n  ) {\n    this.context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  }\n\n  draw() {\n    const guide = this.getState().guide;\n    if (!guide.active) {\n      this.canvas.hidden = true;\n      return;\n    }\n\n    this.canvas.hidden = false;\n    const cam = this.engine.ctx.camera;\n    const scr = cam.cpx2scr(new Vector(guide.x, guide.y));\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    this.context.lineWidth = 3;\n    this.context.strokeStyle = \"#000000\";\n    cross(scr.plus(new Vector(3, 3)), this.context);\n    this.context.strokeStyle = \"#FFFFFF\";\n    cross(scr, this.context);\n  }\n}\n","import { Dispatch } from \"@reduxjs/toolkit\";\nimport { Root } from \"./reducer\";\nimport Engine from \"../engine/engine\";\nimport { updateSet } from \"./set\";\nimport Controller from \"./controller\";\nimport Improver from \"./improver\";\nimport * as url from \"./url\";\nimport throttle from \"lodash/throttle\";\nimport debounce from \"lodash/debounce\";\nimport Vector from \"../engine/math/vector\";\nimport {\n  setMouseOnCanvas,\n  setMouseInfo,\n  setInfobox,\n  setDrawer,\n  setSnack,\n  setNarrowDevice,\n  setTab,\n  setScreenSize,\n  toggleSquare,\n  setUi,\n} from \"./ui\";\nimport * as colorActions from \"./colors\";\nimport { getPreset } from \"../engine/fractals\";\nimport { bindKeys } from \"../util/keybinder\";\nimport Guide from \"../engine/guide\";\nimport { setGuide } from \"./guide\";\nimport Matrix from \"../engine/math/matrix\";\nimport { AffineTransform } from \"../engine/math/camera\";\n\ntype D = Dispatch<any>;\n\nlet engine: Engine;\nlet guide: Guide;\nlet urlUpdate: () => void;\n\nexport const getEngine = () => engine;\n\nexport const displayPoi = (state: Root) => {\n  const obj = {\n    name: \"\",\n    fractalId: state.set.fractalId,\n    x: state.set.x,\n    y: state.set.y,\n    w: state.set.w,\n  };\n  console.log(\"---- POI\");\n  console.log(JSON.stringify(obj, null, 2));\n};\n\nexport const initEngine = (\n  canvas: HTMLCanvasElement,\n  canvasGuide: HTMLCanvasElement,\n): any => (dispatch: D, getState: () => Root) => {\n  // ---- init global keyboard shortcuts\n  bindKeys(\"I\", () => dispatch(setInfobox(!getState().ui.infobox)));\n  bindKeys(\"esc\", () => dispatch(setDrawer(!getState().ui.drawer)));\n  bindKeys(\"D\", () => {\n    dispatch(setDrawer(true));\n    dispatch(setTab(\"debug\"));\n  });\n  bindKeys(\"Q\", () => dispatch(toggleSquare()));\n  bindKeys(\"P\", () => displayPoi(getState()));\n  bindKeys(\"M\", () => dispatch(setUi({ showPois: !getState().ui.showPois })));\n\n  // ---- init window size & capture resize events\n  const getWindowSize = () => [window.innerWidth, window.innerHeight];\n  const onResize = () => {\n    const [width, height] = getWindowSize();\n    [canvas.width, canvas.height] = getWindowSize();\n    [canvasGuide.width, canvasGuide.height] = getWindowSize();\n    dispatch(setScreenSize({ width, height }));\n  };\n  onResize();\n  window.addEventListener(\"resize\", () => {\n    onResize();\n    engine.resize(canvas.width, canvas.height);\n    engine.draw();\n  });\n\n  // ---- update ui.smallDevice boolean when device (or orientation) changes\n  const onMediaChange = (media: any) =>\n    dispatch(setNarrowDevice(media.matches));\n  const matchMedia = window.matchMedia(\"(max-width: 450px)\");\n  onMediaChange(matchMedia);\n  matchMedia.addListener(onMediaChange);\n\n  window.addEventListener(\n    \"error\",\n    debounce(() => {\n      console.error(\"error caught, resetting engine\");\n      url.readInit(dispatch, true);\n      engine.draw();\n    }, 200),\n  );\n\n  // ---- capture canvas enter & leave events for infobox\n  canvas.addEventListener(\"mouseenter\", () => {\n    dispatch(setMouseOnCanvas(true));\n  });\n  canvas.addEventListener(\"mouseleave\", () => {\n    dispatch(setMouseOnCanvas(false));\n  });\n  canvas.addEventListener(\n    \"mousemove\",\n    throttle(evt => {\n      const cpx = engine.ctx.camera.scr2cpx(\n        new Vector(evt.offsetX, evt.offsetY),\n      );\n      const iter = engine.getIterationsAt(cpx);\n      dispatch(setMouseInfo({ x: cpx.x, y: cpx.y, iter }));\n    }, 50), // 20 fps max\n  );\n\n  // ---- read URL and infer start params\n  const paramsFetcher = () => {\n    // convert current redux state into engine state\n    const rdx = getState();\n    return {\n      ...rdx.set,\n      painter: rdx.colors,\n    };\n  };\n  url.readInit(dispatch);\n  engine = new Engine(canvas, paramsFetcher);\n  // @ts-ignore\n  window.engine = engine;\n\n  urlUpdate = debounce(() => {\n    url.update(getState());\n  }, 250);\n  engine.ctx.event.on(\"draw.start\", urlUpdate);\n  engine.ctx.event.on(\"draw.redraw\", urlUpdate);\n  engine.ctx.event.on(\"zoom.limit\", () => {\n    dispatch(setSnack(\"Sorry, FractalJS cannot zoom further...\"));\n  });\n  engine.ctx.event.on(\n    \"zoom.limit\",\n    debounce(() => {\n      dispatch(setSnack(undefined));\n    }, 5000),\n  );\n\n  guide = new Guide(canvasGuide, engine, getState);\n  engine.ctx.event.on(\"draw.start\", () => {\n    guide.draw();\n  });\n\n  new Controller(engine, dispatch);\n  Improver(engine, dispatch, getState); // add improvement capabilities\n  engine.draw();\n};\n\nexport const changeFractalType = (type: string): any => (dispatch: D) => {\n  const setValues = getPreset(type);\n  dispatch(updateSet(setValues));\n  dispatch(updateSet({ viewport: { ...Matrix.identity } }));\n  dispatch(colorActions.setPaint({ density: 20 }));\n  dispatch(setGuide({ active: false }));\n  engine.draw();\n};\n\nexport const changeSmooth = (smooth: boolean): any => (dispatch: D) => {\n  dispatch(updateSet({ smooth }));\n  engine.draw();\n};\n\nexport const changeXY = (pt: Vector, w?: number): any => (dispatch: D) => {\n  if (w === undefined) dispatch(updateSet({ x: pt.x, y: pt.y }));\n  else dispatch(updateSet({ x: pt.x, y: pt.y, w }));\n  engine.draw();\n};\n\nexport const setColorOffset = (val: number): any => (dispatch: D) => {\n  dispatch(colorActions.setOffset(val));\n  engine.drawColor();\n};\n\nexport const setColorDensity = (val: number): any => (dispatch: D) => {\n  dispatch(colorActions.setDensity(val));\n  engine.drawColor();\n};\n\nexport const setColorId = (id: number): any => (dispatch: D) => {\n  dispatch(colorActions.setPaint({ id, fn: \"s\" }));\n  engine.drawColor();\n};\n\nexport const toggleGuide = (): any => async (\n  dispatch: Dispatch<any>,\n  getState: () => Root,\n) => {\n  const ui = getState().ui;\n  if (ui.mouseOnCanvas) {\n    dispatch(setGuide({ active: true, x: ui.mouse.x, y: ui.mouse.y }));\n    guide.draw();\n    urlUpdate();\n  }\n};\n\nexport const viewportReset = (): any => (dispatch: D) => {\n  dispatch(updateSet({ viewport: { ...Matrix.identity } }));\n  engine.draw();\n};\n\nexport const viewportTransform = (\n  type: AffineTransform,\n  valuex: number,\n  valuey?: number,\n): any => (dispatch: D, getState: () => Root) => {\n  let transform = Matrix.identity;\n  switch (type) {\n    case \"rotation\":\n      transform = Matrix.GetRotationMatrix(valuex);\n      break;\n    case \"shear\":\n      transform = Matrix.GetShearMatrix(valuex, valuey!);\n      break;\n    case \"scale\":\n      transform = Matrix.GetScaleMatrix(valuex, valuey!);\n      break;\n  }\n  let matrix = Matrix.fromRaw(getState().set.viewport);\n  matrix = matrix.multiply(transform);\n  dispatch(updateSet({ viewport: { ...matrix } }));\n  engine.draw();\n};\n","import { updateSet } from \"./set\";\nimport { Dispatch } from \"@reduxjs/toolkit\";\nimport Engine from \"../engine/engine\";\nimport { Root } from \"./reducer\";\nimport { param } from \"../params\";\n\n/*\nThe improver hijacks engine to use a more complex rendering; so it's\nimplemented as a function and a closure instead of a class (whose 'this'\nwould have been messy)\n*/\nexport default function Improver(\n  engineArg: Engine,\n  dispatch: Dispatch<any>,\n  getState: () => Root,\n) {\n  const engine = engineArg;\n  const draw = engine.draw.bind(engine);\n  let frameId = 0;\n  let lastState = \"\";\n\n  const sleep = (duration: number) =>\n    new Promise(resolve => setTimeout(() => resolve(), duration));\n\n  // compute number of pixels in 10% fringe and trigger a redrawing if this\n  // number is above a threshold\n  const analysePicture2 = () => {\n    const histo = engine.getHistogram();\n    const nbPixels = engine.ctx.camera.screen.x * engine.ctx.camera.screen.y;\n    const iter = engine.ctx.iter;\n    let nb = 0;\n    for (let i = Math.round(iter * 0.9); i <= iter; i += 1) {\n      nb += histo[i];\n    }\n    const perc = (100 * nb) / nbPixels;\n    const shouldIncrease = perc > 0.2;\n    const shouldDecrease = perc < 0.05;\n    const txt = `10% fringe is ${nb}px or ${perc.toFixed(2)}%`;\n    return { shouldIncrease, shouldDecrease, txt };\n  };\n\n  // @ts-ignore\n  engine.draw = async () => {\n    try {\n      // ID detects when a rendering is interrupted\n      frameId += 1;\n      const id = frameId;\n\n      // state detects when the fractal is drew afresh, needing a coarse rendering first\n      const state = engine.ctx.fractalId + engine.ctx.smooth;\n      if (state !== lastState) {\n        await draw({ details: \"subsampling\", size: 4 });\n        if (frameId !== id) return;\n      }\n      lastState = state;\n\n      // perform a normal drawing\n      await draw({ details: \"normal\", id });\n      if (frameId !== id) return;\n\n      // analyze, then increase iterations if needed\n      let analysis: any = analysePicture2();\n      while (analysis.shouldIncrease) {\n        const newIter = Math.round(engine.ctx.iter * 1.5);\n        // console.log(`+ iter ${engine.ctx.iter} -> ${newIter}: ${analysis.txt}`);\n        dispatch(updateSet({ iter: newIter }));\n        engine.ctx.iter = newIter;\n        await draw({ details: \"normal\", id });\n        if (frameId !== id) return;\n        analysis = analysePicture2();\n      }\n      if (analysis.shouldDecrease) {\n        const newIter = Math.round(Math.max(50, engine.ctx.iter / 1.5));\n        // console.log(`- iter ${engine.ctx.iter} -> ${newIter}: ${analysis.txt}`);\n        dispatch(updateSet({ iter: newIter }));\n        engine.ctx.iter = newIter;\n      }\n\n      // wait one sec, then supersample\n      if (param.supersampling) {\n        await sleep(1000);\n        if (frameId !== id) return;\n        await draw({ details: \"supersampling\", size: 4, id });\n      }\n    } catch (err) {\n      // ignore interrupted frames\n    }\n  };\n}\n","import React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { changeFractalType } from \"../../redux/rdxengine\";\nimport { Root } from \"../../redux/reducer\";\nimport { listForUi } from \"../../engine/fractals\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles(theme => ({\n  swatches: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginLeft: -theme.spacing(1),\n    \"& > *\": {\n      \"& > *\": {\n        textTransform: \"none\",\n        width: \"100%\",\n      },\n      width: \"50%\",\n      paddingLeft: theme.spacing(1),\n      paddingBottom: theme.spacing(1),\n    },\n  },\n}));\n\nfunction Fractal() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const type = useSelector((state: Root) => state.set.fractalId);\n\n  const buttons = listForUi().map(o => {\n    return (\n      <div key={o.fractalId}>\n        <Button\n          variant={type === o.fractalId ? \"contained\" : \"outlined\"}\n          color={type === o.fractalId ? \"primary\" : \"default\"}\n          onClick={() => dispatch(changeFractalType(o.fractalId))}\n        >\n          {o.name}\n        </Button>\n      </div>\n    );\n  });\n  return (\n    <div>\n      <List\n        component=\"nav\"\n        subheader={\n          <ListSubheader component=\"div\">Pick a fractal set</ListSubheader>\n        }\n      >\n        <ListItem>\n          <div className={classes.swatches}>{buttons}</div>\n        </ListItem>\n      </List>\n    </div>\n  );\n}\n\nexport default Fractal;\n","import React from \"react\";\nimport throttle from \"lodash/throttle\";\nimport Slider from \"@material-ui/core/Slider\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Root } from \"../../redux/reducer\";\nimport {\n  setColorOffset,\n  setColorDensity,\n  setColorId,\n} from \"../../redux/rdxengine\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { getBufferFromId } from \"../../util/palette\";\nimport { Typography } from \"@material-ui/core\";\n\nconst DENSITY = (20 * 20) ** (1 / 100);\n\nconst gradients = (() => {\n  const res: { id: number; dataURL: string }[] = [];\n  const WIDTH = 100;\n  const HEIGHT = 50;\n  const RES = WIDTH;\n  const canvas = document.createElement(\"canvas\") as HTMLCanvasElement;\n  const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  canvas.width = WIDTH;\n  canvas.height = HEIGHT;\n  const imageData = context.createImageData(canvas.width, canvas.height);\n  const imageBuffer = new Uint32Array(imageData.data.buffer);\n  [0, 2, 3, 4, 5, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19].forEach((id) => {\n    const colorBuffer = getBufferFromId(id, RES);\n    for (let i = 0; i < WIDTH; i += 1) {\n      for (let j = 0; j < HEIGHT; j += 1) {\n        imageBuffer[j * WIDTH + i] =\n          colorBuffer[Math.round(i * 0.6 + j * 0.6) % RES];\n      }\n    }\n    context.putImageData(imageData, 0, 0, 0, 0, canvas.width, canvas.height);\n    const dataURL = canvas.toDataURL(\"image/png\");\n    res.push({ id, dataURL });\n  });\n  return res;\n})();\n\nconst useStyles = makeStyles((theme) => ({\n  swatches: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    marginRight: -theme.spacing(1),\n    \"& > *\": {\n      paddingBottom: theme.spacing(1),\n      paddingRight: theme.spacing(1),\n      width: \"20%\",\n      height: \"56px\",\n      position: \"relative\",\n      \"& > img\": {\n        width: \"100%\",\n        height: \"100%\",\n        borderRadius: \"4px\",\n      },\n      \"& > i\": {\n        position: \"absolute\",\n        bottom: 0,\n        right: 0,\n        color: \"white\",\n        fontSize: \"36px\",\n        padding: \"0px\",\n        textShadow: \"2px 2px 2px #888\",\n      },\n    },\n  },\n  txt: {\n    width: \"100px\",\n  },\n}));\n\nfunction Palette() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const colors = useSelector((state: Root) => state.colors);\n  const swatches = gradients.map((gradient) => (\n    <div key={gradient.id} onClick={() => dispatch(setColorId(gradient.id))}>\n      <img alt=\"\" src={gradient.dataURL} />\n      {colors.id === gradient.id ? (\n        <i className=\"material-icons\">check_circle</i>\n      ) : null}\n    </div>\n  ));\n\n  const densitySlider = Math.log(20 * colors.density) / Math.log(DENSITY);\n  const getDensity = (val: number) => (1 / 20) * DENSITY ** val;\n\n  return (\n    <div>\n      <List component=\"nav\" dense>\n        <ListSubheader component=\"div\">\n          Pick & adjust a color palette\n        </ListSubheader>\n        <ListItem>\n          <div className={classes.swatches}>{swatches}</div>\n        </ListItem>\n        <ListItem>\n          <Typography className={classes.txt}>Move</Typography>\n          <Slider\n            min={0}\n            max={1}\n            step={0.001}\n            value={colors.offset}\n            onChange={throttle((_, v) => dispatch(setColorOffset(v)), 100)}\n          />\n        </ListItem>\n        <ListItem>\n          <Typography className={classes.txt}>Stretch</Typography>\n          <Slider\n            min={0}\n            max={100}\n            step={1}\n            value={densitySlider}\n            onChange={throttle(\n              (_, v) => dispatch(setColorDensity(getDensity(v))),\n              100,\n            )}\n          />\n        </ListItem>\n      </List>\n    </div>\n  );\n}\n\nexport default Palette;\n","import React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport Switch from \"@material-ui/core/Switch\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { changeSmooth } from \"../../redux/rdxengine\";\nimport { Root } from \"../../redux/reducer\";\nimport { setInfobox } from \"../../redux/ui\";\n\nfunction Settings() {\n  const dispatch = useDispatch();\n  const smooth = useSelector((state: Root) => state.set.smooth);\n  const ui = useSelector((state: Root) => state.ui);\n\n  return (\n    <div>\n      <List\n        component=\"nav\"\n        subheader={\n          <ListSubheader component=\"div\">Advanced settings</ListSubheader>\n        }\n      >\n        <ListItem>\n          <ListItemText primary=\"Smooth rendering\" />\n          <ListItemSecondaryAction>\n            <Switch\n              edge=\"end\"\n              onChange={(event) => {\n                dispatch(changeSmooth(event.target.checked));\n              }}\n              checked={smooth}\n              color=\"primary\"\n            />\n          </ListItemSecondaryAction>\n        </ListItem>\n        {ui.narrowDevice ? null : (\n          <ListItem>\n            <ListItemText primary=\"Information box\" />\n            <ListItemSecondaryAction>\n              <Switch\n                edge=\"end\"\n                onChange={(event) => {\n                  dispatch(setInfobox(event.target.checked));\n                }}\n                checked={ui.infobox}\n                color=\"primary\"\n              />\n            </ListItemSecondaryAction>\n          </ListItem>\n        )}\n      </List>\n    </div>\n  );\n}\n\nexport default Settings;\n","export const isMobileDevice = () =>\n  typeof window.orientation !== \"undefined\" ||\n  navigator.userAgent.indexOf(\"IEMobile\") !== -1;\n\nexport const isTouchDevice = () =>\n  \"ontouchstart\" in window ||\n  navigator.maxTouchPoints > 0 ||\n  navigator.msMaxTouchPoints > 0;\n\nexport const isMouseDevice = () =>\n  matchMedia(\"(pointer:fine)\").matches || matchMedia(\"(hover:hover)\").matches;\n","import React from \"react\";\nimport { Typography } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { Divider } from \"@material-ui/core\";\nimport GitHubButton from \"react-github-btn\";\nimport { isMobileDevice, isTouchDevice, isMouseDevice } from \"../../util/misc\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    avatar: {\n      backgroundColor: theme.palette.primary.main,\n    },\n    inline: {\n      display: \"inline\",\n    },\n    keyboard: {\n      \"& > span\": {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        border: \"1px solid #888\",\n        background: \"#EEE\",\n        borderRadius: \"4px\",\n        padding: \"1px 4px\",\n        margin: \"2px 0px\",\n        fontSize: \"14px\",\n        minWidth: \"1.8em\",\n        textAlign: \"center\",\n        color: \"black\",\n        marginRight: \"0.4em\",\n      },\n    },\n  }),\n);\n\nconst Keys = () => {\n  const classes = useStyles();\n  return (\n    <span className={classes.keyboard}>\n      <span>ðŸ œ</span>\n      <span>ðŸ </span>\n      <span>ðŸ ž</span>\n      <span>ðŸ Ÿ</span> : move\n      <br />\n      {/* zoom */}\n      <span>\n        <b>+</b>\n      </span>\n      <span>\n        <b>-</b>\n      </span>{\" \"}\n      : zoom\n      <br />\n      {/* rotate */}\n      <span>R</span> + <span>ðŸ œ</span>\n      <span>ðŸ ž</span> : rotate\n      <br />\n      <span>S</span> + <span>ðŸ œ</span>\n      <span>ðŸ </span>\n      <span>ðŸ ž</span>\n      <span>ðŸ Ÿ</span> : scale x or y\n      <br />\n      <span>H</span> + <span>ðŸ œ</span>\n      <span>ðŸ </span>\n      <span>ðŸ ž</span>\n      <span>ðŸ Ÿ</span> : shear x or y\n      <br />\n      <span>V</span> : reset viewport\n      <br />\n      all + <span>shift</span> : smaller movement\n      <br />\n      <span>G</span> : set a guide point\n    </span>\n  );\n};\n\nconst Speech = () => {\n  const classes = useStyles();\n  return (\n    <Typography\n      component=\"span\"\n      variant=\"body1\"\n      className={classes.inline}\n      color=\"textPrimary\"\n    >\n      FractalJS is open-source. You can report bugs, or add you favorite fractal\n      set by heading to{\" \"}\n      <a\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        href=\"https://github.com/solendil/fractaljs/\"\n      >\n        GitHub\n      </a>\n      .\n    </Typography>\n  );\n};\n\nexport default function SimpleCard() {\n  const classes = useStyles();\n\n  return (\n    <>\n      <List component=\"nav\" style={{ maxWidth: `360px` }}>\n        <ListSubheader component=\"div\">Controls</ListSubheader>\n        {isTouchDevice() ? (\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar className={classes.avatar}>\n                <i className=\"material-icons\">touch_app</i>\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary=\"Touch\" secondary=\"Swipe & Pinch to zoom\" />\n          </ListItem>\n        ) : null}\n        {isMouseDevice() ? (\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar className={classes.avatar}>\n                <i className=\"material-icons\">mouse</i>\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary=\"Mouse\" secondary=\"Drag & wheel zoom\" />\n          </ListItem>\n        ) : null}\n        {!isMobileDevice() ? (\n          <ListItem>\n            <ListItemAvatar>\n              <Avatar className={classes.avatar}>\n                <i className=\"material-icons\">keyboard</i>\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary=\"Keyboard\" secondary={<Keys />} />\n          </ListItem>\n        ) : null}\n        <Divider />\n        <ListSubheader component=\"div\">About</ListSubheader>\n        <ListItem>\n          <Speech />\n        </ListItem>\n        <ListItem>\n          <GitHubButton\n            href=\"https://github.com/solendil/fractaljs\"\n            data-color-scheme=\"no-preference: light; light: light; dark: light;\"\n            data-size=\"large\"\n            data-show-count={true}\n            aria-label=\"Star solendil/fractaljs on GitHub\"\n          >\n            Star\n          </GitHubButton>{\" \"}\n        </ListItem>\n      </List>\n    </>\n  );\n}\n","import React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport { getEngine } from \"../../redux/rdxengine\";\n\nexport default function Debug() {\n  const engine = getEngine();\n  const camera = engine.ctx.camera;\n  return (\n    <div>\n      <List component=\"nav\">\n        <ListSubheader component=\"div\">Debug</ListSubheader>\n        <ListItem>Threads: {engine.ctx.nbThreads}</ListItem>\n        <ListItem>\n          Screen: {camera.screen.x} * {camera.screen.y}\n        </ListItem>\n      </List>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\n\ninterface Props {\n  className: string;\n}\n\n// hack typescript which does not know this property\ninterface ShareNavigator {\n  share: (props: any) => Promise<any>;\n}\n\nconst Share = (props: Props) => {\n  const nav = (navigator as unknown) as ShareNavigator;\n  if (!nav.share) return null;\n  return (\n    <IconButton\n      className={props.className}\n      onClick={() => {\n        nav.share({\n          title: \"FractalJS\",\n          text: \"Check out this fractal picture !\",\n          url: window.location.href,\n        });\n      }}\n    >\n      <i className=\"material-icons\">share</i>\n    </IconButton>\n  );\n};\n\nexport default Share;\n","import React from \"react\";\nimport map from \"lodash/map\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { navigation } from \"./Navigation\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setTab, setDrawer, setUi } from \"../redux/ui\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\nimport Share from \"./ShareButton\";\nimport { Root } from \"../redux/reducer\";\n\nconst useStyles = makeStyles(theme => ({\n  bar: {\n    backgroundColor: fade(theme.palette.primary.main, 0.8),\n    backdropFilter: \"blur(8px)\",\n    position: \"fixed\",\n    display: \"flex\",\n    [theme.breakpoints.only(\"xs\")]: {\n      width: \"100%\",\n      height: \"56px\",\n      bottom: 0,\n    },\n    [theme.breakpoints.up(\"sm\")]: {\n      height: \"100%\",\n      flexDirection: \"column\",\n      left: 0,\n      flexWrap: \"wrap-reverse\",\n    },\n  },\n  icons: {\n    color: \"white\",\n    [theme.breakpoints.only(\"xs\")]: {\n      width: \"60px\",\n    },\n    [theme.breakpoints.up(\"sm\")]: {\n      width: \"56px\",\n    },\n  },\n  selected: {\n    color: theme.palette.secondary.main,\n  },\n  brand: {\n    [theme.breakpoints.only(\"xs\")]: {\n      display: \"none\",\n    },\n    color: \"white\",\n    fontSize: \"20px\",\n    lineHeight: \"56px\",\n    writingMode: \"vertical-rl\",\n    transform: \"rotate(180deg)\",\n    fontFamily: \"roboto\",\n    paddingBottom: \"56px\",\n    paddingTop: \"0.5em\",\n    letterSpacing: \"3px\",\n    fontWeight: 500,\n    flexGrow: 1,\n    textDecoration: \"none\",\n  },\n}));\n\nconst ToolBar = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const showPois = useSelector((state: Root) => state.ui.showPois);\n\n  const buttons = map(navigation, (def, tabId) =>\n    !def.hidden ? (\n      <IconButton\n        key={tabId}\n        className={classes.icons}\n        onClick={() => {\n          dispatch(setTab(tabId));\n          dispatch(setDrawer(true));\n        }}\n      >\n        <i className=\"material-icons\">{def.icon}</i>\n      </IconButton>\n    ) : null,\n  ).filter(Boolean);\n  buttons.push(\n    <a\n      href=\"https://github.com/solendil/FractalJS\"\n      target=\"_\"\n      className={classes.brand}\n      key=\"brand\"\n    >\n      FractalJS\n    </a>,\n  );\n  const poi = (\n    <IconButton\n      className={`${classes.icons} ${showPois ? classes.selected : \"\"}`}\n      key=\"pois\"\n      onClick={() => dispatch(setUi({ showPois: !showPois }))}\n    >\n      <i className=\"material-icons\">map</i>\n    </IconButton>\n  );\n\n  buttons.splice(2, 0, poi);\n  buttons.splice(2, 0, <Share key=\"share\" className={classes.icons} />);\n\n  return <div className={classes.bar}>{buttons}</div>;\n};\n\nexport default ToolBar;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SwipeableDrawer from \"@material-ui/core/SwipeableDrawer\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport Fractal from \"./pages/Fractal\";\nimport Palette from \"./pages/Palette\";\nimport Settings from \"./pages/Settings\";\nimport About from \"./pages/About\";\nimport Debug from \"./pages/Debug\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Root } from \"../redux/reducer\";\nimport { setDrawer } from \"../redux/ui\";\nimport Divider from \"@material-ui/core/Divider\";\nimport MyToolbar from \"./Toolbar\";\n\nexport const navigation: { [key: string]: any } = {\n  fractal: { icon: \"collections\", component: <Fractal /> },\n  palette: { icon: \"format_paint\", component: <Palette /> },\n  settings: { icon: \"settings\", component: <Settings /> },\n  about: { icon: \"help\", component: <About /> },\n  debug: { hidden: true, component: <Debug /> },\n};\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    top: \"auto\",\n    bottom: 0,\n  },\n  drawer: {\n    minWidth: \"360px\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: \"360px\",\n    },\n  },\n  trans: {\n    // if we wanna make a transparent background\n    // backgroundColor: \"rgb(255, 255, 255, 0.85)\",\n    // backdropFilter: \"blur(5px)\",\n    [theme.breakpoints.only(\"xs\")]: {\n      borderTopLeftRadius: \"10px\",\n      borderTopRightRadius: \"10px\",\n    },\n  },\n  handle: {\n    width: \"33%\",\n    margin: \"4px auto -2px auto\",\n    height: \"4px\",\n  },\n}));\n\nconst Navigation = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { drawer, tab } = useSelector((state: Root) => ({\n    drawer: state.ui.drawer,\n    tab: state.ui.tab,\n  }));\n  const bigDevice = useMediaQuery(\"(min-width:450px)\");\n  const content = navigation[tab || \"fractal\"].component;\n\n  return (\n    <>\n      <MyToolbar />\n      <SwipeableDrawer\n        anchor={bigDevice ? \"left\" : \"bottom\"}\n        open={drawer}\n        disableDiscovery\n        disableSwipeToOpen\n        PaperProps={{ className: classes.trans }}\n        BackdropProps={{ invisible: true }}\n        onClose={() => dispatch(setDrawer(false))}\n        onOpen={() => dispatch(setDrawer(true))}\n      >\n        <div className={classes.drawer}>\n          {!bigDevice ? <Divider className={classes.handle} /> : null}\n          {content}\n        </div>\n      </SwipeableDrawer>\n    </>\n  );\n};\n\nexport default Navigation;\n","import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Typography } from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport { Root } from \"../redux/reducer\";\n\nconst useStyles = makeStyles((theme) => ({\n  box: {\n    position: \"fixed\",\n    bottom: 0,\n    right: 0,\n    margin: \"16px\",\n    background: \"white\",\n    padding: \"16px\",\n  },\n}));\n\nfunction InfoBox() {\n  const classes = useStyles();\n  const set = useSelector((state: Root) => state.set);\n  const ui = useSelector((state: Root) => state.ui);\n  if (ui.narrowDevice) return null;\n  if (!ui.infobox) return null;\n  const d: any = {};\n  if (ui.mouseOnCanvas) {\n    d.x = ui.mouse.x;\n    d.y = ui.mouse.y;\n    d.iter = ui.mouse.iter;\n    d.w = set.w;\n  } else {\n    d.x = set.x;\n    d.y = set.y;\n    d.iter = set.iter;\n    d.w = set.w;\n  }\n  return (\n    <Paper elevation={3} className={classes.box}>\n      <Typography color=\"primary\" gutterBottom variant=\"h6\">\n        {ui.mouseOnCanvas ? \"Mouse\" : \"Screen\"}\n      </Typography>\n      <Typography component=\"div\">\n        <Box fontFamily=\"Monospace\">X: {d.x.toFixed(16)}</Box>\n        <Box fontFamily=\"Monospace\">Y: {d.y.toFixed(16)}</Box>\n        <Box fontFamily=\"Monospace\">iterations: {d.iter.toFixed(2)}</Box>\n        <Box fontFamily=\"Monospace\">extent: {d.w.toExponential(2)}</Box>\n      </Typography>\n    </Paper>\n  );\n}\n\nexport default InfoBox;\n","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Root } from \"../redux/reducer\";\nimport { makeStyles } from \"@material-ui/core\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\n\nconst useStyles = makeStyles((theme) => ({\n  snackbar: {\n    [theme.breakpoints.only(\"xs\")]: {\n      bottom: 64,\n    },\n  },\n}));\n\nconst MySnackbar = () => {\n  const ui = useSelector((state: Root) => state.ui);\n  const classes = useStyles();\n  if (!ui.snack) return null;\n\n  return (\n    <Snackbar\n      open={true}\n      className={classes.snackbar}\n      message=\"Sorry, FractalJS cannot zoom further...\"\n    ></Snackbar>\n  );\n};\n\nexport default MySnackbar;\n","import React from \"react\";\nimport Camera from \"../../engine/math/camera\";\nimport Matrix from \"../../engine/math/matrix\";\n\nexport type PoiProps = {\n  name: string;\n  x: number;\n  y: number;\n  w: number;\n  camera: Camera;\n  screen: {\n    height: number;\n    width: number;\n  };\n};\n\nconst Poi = (props: PoiProps) => {\n  const { x, y, w, camera } = props;\n\n  // first we need a matrix that converts 0,0; width,width of div to complex plane\n  // prettier-ignore\n  const m = Matrix.GetTriangleToTriangle(\n    0, 0, 0, 360, 360, 360,\n    x - w/2, y + w/2,\n    x - w/2, y - w/2,\n    x + w/2, y - w/2,\n  )\n\n  const m2 = camera.matrix_inv.multiply(m);\n  const style = {\n    transform: `matrix(${m2.a}, ${m2.b}, ${m2.c}, ${m2.d}, ${m2.e}, ${m2.f})`,\n  };\n  return (\n    <div className=\"poi\" style={style}>\n      <div className=\"frame\"></div>\n      <div className=\"bottom\">\n        {props.name}\n        {/* <button\n          onClick={() => {\n            console.log(\"tickle!\");\n          }}\n        >\n          <i className=\"material-icons\">info_outline</i>\n        </button>\n        <button>\n          <i className=\"material-icons\">where_to_vote</i>\n        </button> */}\n      </div>\n    </div>\n  );\n};\n\nexport default Poi;\n","const rawDb = [\n  {\n    name: \"The Mandelbrot set\",\n    fractalId: \"mandelbrot\",\n    x: -0.7700865783521146,\n    y: 0.0005149610839296841,\n    w: 3.2541397276576007,\n  },\n  {\n    name: \"The seahorse valley\",\n    fractalId: \"mandelbrot\",\n    x: -0.8850169319618038,\n    y: 0.20430236940113136,\n    w: 0.5341582685511642,\n  },\n  {\n    name: 'Double-spirals on the left, \"seahorses\" on the right',\n    fractalId: \"mandelbrot\",\n    x: -0.761898850758455,\n    y: 0.13624533125298993,\n    w: 0.06172323608813737,\n  },\n  {\n    name: '\"Seahorse\" upside down',\n    fractalId: \"mandelbrot\",\n    x: -0.7434670975470078,\n    y: 0.1264225543830674,\n    w: 0.01619893159287557,\n  },\n  {\n    name: \"Seahorse tail\",\n    fractalId: \"mandelbrot\",\n    x: -0.7435575011333871,\n    y: 0.13141411010448878,\n    w: 0.0023624968121003496,\n  },\n  {\n    name: \"Part of the tail\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436534729475947,\n    y: 0.13188172343759305,\n    w: 0.0007349349876731434,\n  },\n  {\n    name: \"Satellite\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436414448061901,\n    y: 0.13182674539039832,\n    w: 0.00012108054070541848,\n  },\n  {\n    name: \"Satellite\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436431541413343,\n    y: 0.13182586483571457,\n    w: 0.000014770086109824968,\n  },\n  {\n    name: '\"Antenna\" of the satellite',\n    fractalId: \"mandelbrot\",\n    x: -0.7436447696546592,\n    y: 0.13182527423151064,\n    w: 0.000002970883958121094,\n  },\n  {\n    name: 'The \"seahorse valley\" of the satellite',\n    fractalId: \"mandelbrot\",\n    x: -0.7436441018154397,\n    y: 0.13182604877870288,\n    w: 6.725696241359014e-7,\n  },\n  {\n    name: \"Double-spirals\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438803098491,\n    y: 0.13182591847076758,\n    w: 1.6094281332162775e-7,\n  },\n  {\n    name: \"Satellites of second order\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438993338419,\n    y: 0.13182589080585413,\n    w: 5.0066736140673944e-8,\n  },\n  {\n    name: \"Island\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438886058956,\n    y: 0.13182590433282593,\n    w: 4.1947898743490354e-9,\n  },\n  {\n    name: \"Double hook\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438871772372,\n    y: 0.13182590424946874,\n    w: 6.117797120607018e-10,\n  },\n  {\n    name: \"Islands\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438870371828,\n    y: 0.13182590420568097,\n    w: 5.260191508094819e-11,\n  },\n  {\n    name: \"Detail of one island\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438870365094,\n    y: 0.13182590421022766,\n    w: 7.448163315952692e-12,\n  },\n  {\n    name: \"Detail of the spiral\",\n    fractalId: \"mandelbrot\",\n    x: -0.7436438870357782,\n    y: 0.13182590421248866,\n    w: 4.2535996934475523e-13,\n  },\n  {\n    name: \"Frequency overload\",\n    fractalId: \"tippetts\",\n    x: -0.7036494534576752,\n    y: 0.39624415815626096,\n    w: 0.0056686048452011415,\n  },\n  {\n    name: \"Crossroad\",\n    fractalId: \"tippetts\",\n    x: 0.27818862424130375,\n    y: -0.8136071097929828,\n    w: 0.004360465265539319,\n  },\n  {\n    name: \"Yummy waves\",\n    fractalId: \"tippetts\",\n    x: -1.4111616659280735,\n    y: -0.0028525496453486393,\n    w: 0.009579942188389867,\n  },\n];\n\nexport interface Poi {\n  id: number;\n  name: string;\n  x: number;\n  y: number;\n  w: number;\n}\ninterface Db {\n  [fractalId: string]: Poi[];\n}\n\nlet id = 0;\n\nconst buildDb = (): Db => {\n  const res: Db = {};\n  rawDb.sort((a, b) => a.w - b.w);\n  rawDb.forEach(poi => {\n    if (!(poi.fractalId in res)) res[poi.fractalId] = [];\n    res[poi.fractalId].push({\n      id: id++,\n      name: poi.name,\n      x: poi.x,\n      y: poi.y,\n      w: poi.w,\n    });\n  });\n  return res;\n};\n\nexport const poiDb: Db = buildDb();\n","import React from \"react\";\nimport Vector from \"../../engine/math/vector\";\n\nexport type PoiProps = {\n  scr: Vector;\n};\n\nconst Cross = (props: PoiProps) => {\n  const { scr } = props;\n  const style = {\n    transform: `translate(${scr.x}px, ${scr.y}px) translate(-50%, -50%)`,\n  };\n  return (\n    <div className=\"cross\" style={style}>\n      <div className=\"h1\"></div>\n      <div className=\"h2\"></div>\n      <div className=\"v1\"></div>\n      <div className=\"v2\"></div>\n    </div>\n  );\n};\n\nexport default Cross;\n","import React from \"react\";\nimport Poi from \"./Poi\";\nimport { Root } from \"../../redux/reducer\";\nimport Camera from \"../../engine/math/camera\";\nimport Vector from \"../../engine/math/vector\";\nimport { createSelector } from \"@reduxjs/toolkit\";\nimport Matrix from \"../../engine/math/matrix\";\nimport { useSelector } from \"react-redux\";\nimport { poiDb } from \"../../engine/pois\";\nimport Cross from \"./Cross\";\n\n// create a camera reselector\nconst set = (state: Root) => state.set;\nconst screen = (state: Root) => state.ui.screen;\nconst cameraSelector = createSelector(set, screen, (set, screen) => {\n  return new Camera(\n    new Vector(screen.width, screen.height),\n    new Vector(set.x, set.y),\n    set.w,\n    Matrix.fromRaw(set.viewport),\n  );\n});\n\nconst CROSS_THRESHOLD = 50; // screen size of a poi before switching from cross to full\nconst AGG_THRESHOLD = 15; // aggregation threshold of crosses\n\nconst Pois = () => {\n  const camera = useSelector((state: Root) => cameraSelector(state));\n  const screen = useSelector((state: Root) => state.ui.screen);\n  const fractalId = useSelector((state: Root) => state.set.fractalId);\n\n  const pois = (poiDb[fractalId] || []).map(poi => ({\n    ...poi,\n    width: poi.w * camera.matrix_inv.a,\n  }));\n\n  const crosses = pois\n    .filter(poi => poi.width < CROSS_THRESHOLD)\n    .map(poi => ({\n      ...poi,\n      scr: camera.cpx2scr(new Vector(poi.x, poi.y)),\n    }));\n  const aggs: typeof crosses = [];\n  crosses.forEach(poi => {\n    for (let agg of aggs) {\n      if (poi.scr.distanceTo(agg.scr) < AGG_THRESHOLD) return;\n    }\n    aggs.push(poi);\n  });\n\n  const htmlCrosses = aggs.map(poi => <Cross key={poi.id} {...poi} />);\n\n  const full = pois.filter(\n    poi => poi.width >= CROSS_THRESHOLD && poi.width < screen.min * 2,\n  );\n  const htmlFullPois = full.map(poi => (\n    <Poi key={poi.id} camera={camera} screen={screen} {...poi} />\n  ));\n  return (\n    <div>\n      {htmlFullPois}\n      {htmlCrosses}\n    </div>\n  );\n};\n\nexport default Pois;\n","import React from \"react\";\nimport { Root } from \"../../redux/reducer\";\nimport { useSelector } from \"react-redux\";\nimport Pois from \"./Pois\";\n\nconst Overlay = () => {\n  const square = useSelector((state: Root) => state.ui.square);\n  const showPois = useSelector((state: Root) => state.ui.showPois);\n\n  return (\n    <div className=\"pois offset\">\n      {square ? (\n        <div className=\"squares\">\n          <div className=\"square\" />\n          <div className=\"third\" />\n        </div>\n      ) : null}\n      {showPois ? <Pois /> : null}\n    </div>\n  );\n};\n\nexport default Overlay;\n","import React, { useRef } from \"react\";\nimport \"./App.scss\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Root } from \"../redux/reducer\";\nimport Navigation from \"./Navigation\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { initEngine } from \"../redux/rdxengine\";\nimport InfoBox from \"./InfoBox\";\nimport Snackbar from \"./Snackbar\";\nimport Overlay from \"./overlay/Overlay\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const canvasRef = useRef(null);\n  const canvasGuideRef = useRef(null);\n  const drawer = useSelector((state: Root) => state.ui.drawer);\n  const tab = useSelector((state: Root) => state.ui.tab);\n  const bigDevice = useMediaQuery(\"(min-width:450px)\");\n\n  React.useEffect(() => {\n    const canvas = (canvasRef.current as unknown) as HTMLCanvasElement;\n    const canvasGuide = (canvasGuideRef.current as unknown) as HTMLCanvasElement;\n    dispatch(initEngine(canvas, canvasGuide));\n  }, [dispatch]);\n\n  let offsetClass = \"\";\n  if (drawer) offsetClass = bigDevice ? \"offset-left\" : `offset-top-${tab}`;\n\n  return (\n    <div className={`main ${offsetClass}`}>\n      <canvas ref={canvasRef} className=\"offset\"></canvas>\n      <canvas ref={canvasGuideRef} className=\"offset guide\"></canvas>\n      <Overlay />\n      <Navigation />\n      <InfoBox />\n      <Snackbar />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport { reducer as ui } from \"./ui\";\nimport { reducer as guide } from \"./guide\";\nimport { reducer as set } from \"./set\";\nimport { reducer as colors } from \"./colors\";\n\nconst root = combineReducers({\n  ui,\n  guide,\n  set,\n  colors,\n});\n\nexport default root;\nexport type Root = ReturnType<typeof root>;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./ui/App\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport reducer from \"./redux/reducer\";\nimport { Provider } from \"react-redux\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\nconst whyDidYouRender = require(\"@welldone-software/why-did-you-render\");\nwhyDidYouRender(React, {\n  trackHooks: true,\n  trackAllPureComponents: true,\n  trackExtraHooks: [[require(\"react-redux/lib\"), \"useSelector\"]],\n});\n\nconst store = configureStore({ reducer });\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: \"#1976d2\" },\n    secondary: { main: \"#ffc107\" },\n  },\n  breakpoints: {\n    values: {\n      xs: 0,\n      sm: 450, // 'sm' value at 450 (ie mobile portrait width) is our only real point\n      md: 960,\n      lg: 1280,\n      xl: 1920,\n    },\n  },\n});\n\nReactDOM.render(\n  <Provider store={store}>\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  </Provider>,\n  document.getElementById(\"root\"),\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}